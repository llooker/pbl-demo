{"version":3,"sources":["images sync /^/.//.*/.svg$","images/atom.svg","images/atom_logo_white.svg","images sync /^/.//.*/.jpg$","images/atom_background1.jpg","images/atom_background2.jpg","images/atom_background3.jpg","images/atom_background4.jpg","images sync /^/.//.*_logo_black/.svg$","AppContext.js","components/Material/UserMenu.js","components/Demo/CodeFlyout.js","webpack:///./src/components/Demo/SplashPage/SplashPage.js?046c","components/Demo/SplashPage/styles.js","components/Highlights/Highlight.js","components/Demo/SplashPage/SingleValueVis.js","components/Demo/SplashPage/NaturalLanguage.js","components/Demo/SplashPage/Welcome.js","components/Demo/SplashPage/VectorThumbnail.js","components/Demo/SplashPage/PopularAnalysis.js","components/Demo/SplashPage/ContentCarousel.js","components/Material/BottomBar.js","components/Demo/SplashPage/EmbeddedQuery.js","components/Demo/SplashPage/SplashPage.js","components/Demo/Dashboard/styles.js","components/Accessories/NumberToColoredPercent.js","components/Demo/Dashboard/CheckboxSvgMapRegion.js","components/Demo/Dashboard/Dashboard.js","webpack:///./src/components/Demo/Dashboard/Dashboard.js?b45b","components/Material/ModalTable.js","components/Demo/CustomVis/styles.js","components/Demo/CustomVis/CustomVis.js","webpack:///./src/components/Demo/CustomVis/CustomVis.js?b545","components/Demo/ReportBuilder/styles.js","components/Demo/ReportBuilder/helpers.js","components/Demo/ReportBuilder/ReportBuilder.js","webpack:///./src/components/Demo/ReportBuilder/ReportBuilder.js?9721","components/Demo/QueryBuilder/styles.js","components/Demo/QueryBuilder/helpers.js","components/Demo/QueryBuilder/QueryBuilder.js","webpack:///./src/components/Demo/QueryBuilder/QueryBuilder.js?9efc","components/Demo/MonetizationModal.js","components/Home.js","components/SignIn.js","LookerHelpers/pblsession.js","App.js","serviceWorker.js","index.js","images/atom_splash_blog.jpg","images/atom_splash_inventory.jpg","images/atom_splash_trends.jpg","images/atom_logo_black.svg","tools.js"],"names":["map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","module","exports","AppContext","React","createContext","useStyles","require","validIdHelper","makeStyles","theme","zIndex1500","zIndex","mr12","marginRight","UserMenu","props","lookerUser","onLogoutSuccess","lookerUserAttributeBrandOptions","handleUserMenuSwitch","classes","useContext","togglePayWallModal","userProfile","codeShow","toggleShow","useState","anchorEl","setAnchorEl","user_attributes","brand","selectedBrand","setSelectedBrand","handleClose","newValue","property","useEffect","className","IconButton","aria-label","aria-controls","aria-haspopup","onClick","event","currentTarget","color","Avatar","alt","name","src","imageUrl","Typography","permission_level","charAt","toUpperCase","substring","keepMounted","open","Boolean","onClose","MenuItem","autoFocus","Divider","divider","Autocomplete","options","getOptionLabel","option","label","style","width","onChange","target","innerText","renderInput","params","TextField","variant","loadingText","disableautofocus","onKeyDown","stopPropagation","CodeFlyout","toggleCodeShow","lookerContent","clientSideCode","serverSideCode","height","permissionNeededCode","Fade","in","length","Grid","container","spacing","padding20","codeFlyoutContainer","item","sm","mrAuto","textAlign","cursor","CodeSnippet","language","dracula","showLineNumbers","JSON","stringify","redPrimary","red","greenPrimary","green","redLight","greenLight","root","flexGrow","backgroundColor","palette","background","paper","overflow","borderRadius","flexCentered","display","justifyContent","alignItems","hidden","visibility","position","tabs","dNone","dBlock","tree","maxWidth","icon","fontSize","mt12","marginTop","w100","mlAuto","marginLeft","skeleton","minWidth","minHeight","card","maxHeight200","maxHeight","mt30","mb30","marginBottom","textCenter","cursorPointer","border","height800","maxHeight100","maxHeight400","minHeight200","redNeg","fontWeight","greenPos","padding30","padding","mb12","overflowScroll","overflowHidden","overflowVisible","maxHeight150","minHeight150","carouselLegend","opacity","carouselLegendTitle","carouselLegendBody","positionRelative","padding15","maxHeight75","overflowYScroll","overflowY","overflowX","drawerHeader","mixins","toolbar","positionFixedTopRight","top","right","bottom","margin","boxShadow","Highlight","children","show","ApiHighlight","Chip","size","align","left","EmbedHighlight","EmbedMethodHighlight","decodeHtml","SingleValueVis","undefined","apiContent","setApiContent","sdk","corsApiCall","dataObjForSparkline","isSubscribed","runInlineQuery","then","response","a","inlineQuery","ok","run_inline_query","result_format","body","lookerResponseData","data","dataArrForDataObj","fields","thisDataItem","toString","change","y","push","upOrDownArrow","isNaN","toFixed","parseInt","labelText","chipFormat","replace","Card","lookerCardShadow","Fragment","xScale","type","format","precision","yScale","min","max","stacked","reverse","axisLeft","orient","tickSize","tickPadding","tickRotation","axisBottom","enablePoints","enableGridX","enableGridY","colors","visColor","animate","CircularProgress","circularProgress","NaturalLanguage","index","clientLookerResponse","inlineQueriesMap","Welcome","givenName","inlineQueries","key","VectorThumbnail","handleMenuItemSelect","svg","setSvg","getThumbnail","content_thumbnail","resourceType","resource_id","blob","Blob","url","URL","createObjectURL","maxHeight60","PopularAnalysis","vectors","ContentCarousel","blogImage","inventoryImage","trendsImage","infiniteLoop","autoPlay","showThumbs","BottomBar","mtAuto","mb10","Button","startIcon","HighlightOutlined","ml12","Code","EmbeddedQuery","iFrameExists","setIFrame","lookerHost","$","html","queryUrl","encodeURIComponent","document","location","origin","fetch","json","LookerEmbedSDK","createExploreWithUrl","appendTo","getElementById","withClassName","withTheme","build","connect","explore","init","catch","error","console","fetchData","maxHeight350","elevation","title","maxHeight80Percent","SplashPage","window","innerHeight","setHeight","staticContent","handleTabChange","demoComponentType","addEventListener","height100Percent","Box","noContainerScroll","innerIndex","gridWidth","minHeight680","padding10","verticalAlignTop","verticalAlign","w33","dot","borderRadius0","NumberToColoredPercent","val","positive_good","abs_val","up","down","val_formatted","Math","abs","toLocaleString","minimumFractionDigits","CheckboxSVGMap","prototype","toggleLocation","this","setState","prevState","selectedLocations","regionFromStateClicked","_","find","locations","statesWithinRegionClicked","filter","region","allUniqueRegions","i","indexOf","allUniqueRegionsFromSelectedLocations","j","regionsNotCurrentlySelected","differenceBy","allRegionsNotSelected","statesNotWithinRegionsClicked","attributes","value","componentDidMount","Dashboard","activeTabValue","dashboardObj","setDashboardObj","setClientSideCode","dashboardOptions","setDashboardOptions","regionValue","setRegionValue","tileToggleValue","setTileToggleValue","visColorToggleValue","setVisColorToggleValue","lightThemeToggleValue","setLightThemeToggleValue","fontThemeSelectValue","setFontThemeSelectValue","expansionPanelHeight","setExpansionPanelHeight","atomTheme","isThemeableDashboard","paletteToUse","default","useMemo","createMuiTheme","handleTileToggle","filteredLayout","layouts","dashboard_layout_components","row","dynamicFieldLookUp","elements","dashboard_element_id","newDashboardLayout","setOptions","handleVisColorToggle","newColorSeries","dynamicVisConfig","newDashboardElements","vis_config","series_colors","innerKey","custom_color","map_value_colors","series_cell_visualizations","hasOwnProperty","themeName","performLookerApiCalls","dynamicTheme","dashboardId","themeToUse","createDashboardWithId","withNext","withParams","on","changeHeight","dashboard","orderedArrayForApiContent","filters","jsonQuery","desiredFilterName","queryResultsForDropdown","desiredProperty","ThemeProvider","FilterBar","customFilterAction","filterName","newFilterValue","updateFilters","run","handleThemeChange","Skeleton","animation","mt","expanded","setExpanded","sliderValue","setSliderValue","lifetimeRevenueTierValue","setLifetimeRevenueTierValue","customUsa","Usa","handleSliderChange","lifetimeRevenueTierMap","lifetimeRevenueTierIconMap","SentimentDissatisfied","SentimentSatisfied","SentimentVerySatisfied","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpandMore","FilterList","heading","ExpansionPanelDetails","filterComponents","Array","isArray","renderOption","justify","trend","allUniqueRegionsFromSelectedLocationsCommaSep","join","Slider","ToggleButtonGroup","exclusive","ageTier","Icon","ToggleButton","capitalize","dynamicThemeMode","Switch","checked","inputProps","dynamicThemeFont","FormControl","formControl","InputLabel","Select","labelId","prettifyString","shadows","table","getModalStyle","transform","ModalTable","modalContent","modalStyle","Modal","aria-labelledby","aria-describedby","TableContainer","component","Paper","Table","stickyHeader","TableHead","TableRow","TableCell","lastIndexOf","TableBody","rendered","round","height500","height600","height700","textField","selectEmpty","positionTopRight","CustomVis","fromDate","setFromDate","toDate","setToDate","category","setCategory","desiredField","setDesiredField","setOpen","setModalContent","handleModalOpen","day","originalInlineQueryCopy","parse","total","limit","modalObj","filterData","uniqueDates","Set","filteredAndReducedForAll","uniqueDate","reduce","acc","thisObj","desiredFields","uniqueCategories","incrementDate","handleFromDate","Date","newValueAsDate","addDays","handleToDate","handleCategory","handleDesiredField","from","to","emptyColor","yearSpacing","monthBorderColor","dayBorderWidth","dayBorderColor","legends","anchor","direction","translateY","itemCount","itemWidth","itemHeight","itemsSpacing","itemDirection","split","utils","DateFnsUtils","disableToolbar","KeyboardButtonProps","minDate","maxDate","dateInput","increment","dateFormatTotime","getTime","toISOString","ml24","parentHoverVisibility","childHoverVisibility","faSm","whiteSpaceNoWrap","whiteSpace","TabPanel","other","role","p","ReportBuilder","setExploreObj","setValue","qid","setQid","tabContent","handleChange","action","contentType","contentId","secondaryAction","exploreId","newReportEmbedContainer","iFrameArray","classList","contains","remove","add","indexOfDeletedContent","updatedIFrameArray","slice","splice","empty","delete_look","animateLoad","folder","sharedFolder","me","embedUser","h","looks","look","clientId","query","client_id","embeddedUserFolder","search_looks","user_id","embedUserLooks","embedUserFolderId","folder_id","looksToUse","dashboardsToUse","dashboards","objToUse","lookId","lookIsRendered","createLookWithId","setTimeout","dashboardIsRendered","createExploreWithId","log","AppBar","Tabs","Tab","a11yProps","tabContentItem","tabContentItemIndex","TreeSideBar","sharedFolderId","treeCounter","selected","setSelected","expandedArr","TreeView","defaultCollapseIcon","defaultExpandIcon","onNodeToggle","nodeIds","onNodeSelect","outerIndex","TreeItem","nodeId","disabled","treecounter","contentid","labelRoot","grey","orange","typography","pxToRem","fontWeightRegular","visuallyHidden","clip","bluePrimary","blueSecondary","orangePrimary","orangeSecondary","bottomBarSpacer","maxHeight600","m12","m6","descendingComparator","b","orderBy","QueryBuilder","innerWidth","setWidth","newQuery","resultFormat","apiContentCopy","status","timer","now","create_query","lookerCreateQueryResponseData","create_query_task","query_id","lookerCreateTaskResponseData","taskInterval","setInterval","query_task_results","method","headers","Accept","lookerCheckTaskResponseData","clearInterval","EnhancedTable","rows","gridTitle","measureCounter","dimensionCounter","initializeFieldChipDataHelper","queryBody","datalabel","fieldType","fieldsChipData","setFieldsChipData","queryModified","setQueryModified","queryShouldRun","setQueryShouldRun","filterType","filtersData","setFilterData","handleFieldChipClick","chip","updatedFieldsChipData","handleSelectChange","updatedFiltersData","handleQuerySubmit","newFields","currentFilters","newQueryObj","datePermissionMap","advanced","basic","premium","Search","measurecounter","Done","dimensioncounter","EnhancedTableHead","order","onSelectAllClick","onRequestSort","numSelected","rowCount","numeric","disablePadding","sortDirection","TableSortLabel","active","setOrder","setOrderBy","page","setPage","dense","setDense","rowsPerPage","setRowsPerPage","emptyRows","array","comparator","stabilizedThis","el","sort","stableSort","getComparator","hover","colSpan","FormControlLabel","control","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","flexDirection","transition","font75","font875","MonetizationModal","switchLookerUser","payWallModal","modalListMap","modal","LookerUserPermissions","CardContent","Rating","readOnly","fontStyle","List","ListItem","ListItemIcon","ListItemText","primary","CardActions","disableSpacing","fullWidth","borderColor","defaultTheme","main","secondary","vidlyTheme","blue","Home","toggleHighlightShow","highlightShow","state","handleDrawerChange","drawerOpen","fromSplash","selectedMenuItemValue","UsecaseContent","activeUsecase","demoComponents","lookerContentItem","renderedDemoComponentsCopy","renderedDemoComponents","unshift","selectedMenuItem","newLookerUser","permissions","time_horizon","lookerUserTimeHorizonMap","switchUserAttributeBrand","drawerTabValue","appLayout","usecaseFromUrl","layout","prevProps","prevPermissionLevel","currPermissionLevel","prevUserBrand","currUserBrand","demoComponentMap","themeMap","applySession","orderedDemoComponentsForMenu","orderedDemoComponentsForMenuObj","expandedTreeItemsArr","cumulativePusher","menuCategory","selectedMenuItemVal","Provider","CssBaseline","TopBar","Drawer","drawer","drawerPaper","ChevronLeft","MenuList","clsx","content","contentShift","DemoComponent","hide","Component","withStyles","appBar","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","easeOut","enteringScreen","menuButton","flexShrink","borderRight","relative","absolute","right0","top0","right24","top24","highlightLegend","fontSize1em","mt5","mb5","list","nested","paddingLeft","appBarBottom","roundedTab","paddingBottom30","paddingBottom","Toolbar","edge","Menu","Badge","badgeContent","AddAlert","demoComponentIconMap","HomeIcon","VisibilityOutlined","ShowChart","TableChartOutlined","DateRangeOutlined","LibraryBooksOutlined","outerItem","MatchingIconComponent","button","lightGrey","h100","pos","actions","cardCopy","SignIn","googleClientId","onSuccess","onFailure","backgroundImageInt","floor","random","backgroundImage","logoImage","backgroundSize","buttonText","cookiePolicy","PblSessionEmbed","accessToken","isAuthenticated","activeToken","setToken","fetchToken","settings","transport","BrowserTransport","AuthToken","token","access_token","isActive","getToken","mode","credentials","Authorization","AuthSession","Login","responseGoogle","profileObj","pathname","process","usecaseHelper","PrivateRoute","checkToken","rest","render","App","checkSession","sessionResponse","sessionResponseData","session","lookerApiToken","api_user_token","lookerTokenExpires","api_token_last_refreshed","expires_in","createSdkHelper","external_user_id","email","first_name","last_name","familyName","InitialLookerUser","sessionData","newUser","userAttributeCopy","lookerUserResponse","newAttribute","group_ids","groupIds","func","args","res","path","LookerUserAttributeBrandOptions","keyArr","href","DefaultSettings","base_url","Looker40SDK","hostname","match","ReactDOM","navigator","serviceWorker","ready","registration","unregister","makeid","result","characters","charactersLength","str","frags","getUrlVars","hash","myJson","hashes","txt","createElement","innerHTML"],"mappings":"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","file":"static/js/main.58cb1f81.chunk.js","sourcesContent":["var map = {\n\t\"./atom.svg\": 1036,\n\t\"./atom_logo_black.svg\": 462,\n\t\"./atom_logo_white.svg\": 1037\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1035;","module.exports = __webpack_public_path__ + \"static/media/atom.e208988c.svg\";","module.exports = __webpack_public_path__ + \"static/media/atom_logo_white.89cfe3df.svg\";","var map = {\n\t\"./atom_background1.jpg\": 1039,\n\t\"./atom_background2.jpg\": 1040,\n\t\"./atom_background3.jpg\": 1041,\n\t\"./atom_background4.jpg\": 1042,\n\t\"./atom_splash_blog.jpg\": 444,\n\t\"./atom_splash_inventory.jpg\": 445,\n\t\"./atom_splash_trends.jpg\": 446\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1038;","module.exports = __webpack_public_path__ + \"static/media/atom_background1.9ed7593f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_background2.7d29770e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_background3.b9aecb61.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_background4.1acd6c1b.jpg\";","var map = {\n\t\"./atom_logo_black.svg\": 462\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1043;","import React from 'react';\n \nconst AppContext = React.createContext(null);\n \nexport default AppContext;","import React, { useContext, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { IconButton, Menu, MenuItem, Typography, Divider, TextField, Avatar } from '@material-ui/core';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nimport AppContext from '../../AppContext';\n\nconst { validIdHelper } = require('../../tools');\n\nconst useStyles = makeStyles((theme) => ({\n  zIndex1500: {\n    zIndex: 1500\n  },\n  mr12: {\n    marginRight: 12\n  }\n}))\n\nexport default function UserMenu(props) {\n\n  const { lookerUser, onLogoutSuccess, lookerUserAttributeBrandOptions, handleUserMenuSwitch } = props\n  const classes = useStyles();\n  const { togglePayWallModal, codeShow, toggleShow, userProfile } = useContext(AppContext)\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [selectedBrand, setSelectedBrand] = React.useState(lookerUser.user_attributes.brand || '');\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = (newValue, property) => {\n    setAnchorEl(null);\n    if (newValue == null) {\n      onLogoutSuccess({})\n    } else if (newValue === 'modal') {\n      togglePayWallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      })\n    } else if (typeof newValue === 'string') {\n      handleUserMenuSwitch(newValue, property)\n    }\n  };\n  useEffect(() => {\n    // console.log('useEffect')\n    setSelectedBrand(lookerUser.user_attributes.brand || '')\n  }, [lookerUser]);\n\n  return (\n    <div className={`${classes.zIndex1500}`}>\n      <IconButton\n        aria-label=\"account of current user\"\n        aria-controls=\"menu-appbar\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n        color=\"inherit\"\n      >\n        <Avatar alt={userProfile.name} src={userProfile.imageUrl} className={classes.mr12} />\n\n        <Typography>\n          {typeof lookerUser.user_attributes.permission_level === 'string' ?\n            lookerUser.user_attributes.permission_level.charAt(0).toUpperCase() + lookerUser.user_attributes.permission_level.substring(1) : ''}\n        </Typography>\n      </IconButton>\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <MenuItem autoFocus={false}>Select User Level</MenuItem>\n        <MenuItem autoFocus={false} onClick={() => handleClose('basic', 'permission')}>Basic</MenuItem>\n        <MenuItem autoFocus={false} onClick={() => handleClose('advanced', 'permission')}>Advanced</MenuItem>\n        <MenuItem autoFocus={false} onClick={() => handleClose('premium', 'permission')}>Premium</MenuItem>\n        <Divider className={classes.divider} />\n        <MenuItem onClick={() => handleClose(null)}>Sign Out</MenuItem>\n        <Divider className={classes.divider} />\n        <MenuItem onClick={() => handleClose('modal')}>Show Monetization Modal</MenuItem>\n        <Divider className={classes.divider} />\n        <MenuItem>Current brand: {selectedBrand}</MenuItem>\n        <MenuItem>\n          <Autocomplete\n            id=\"combo-box-usermenu\"\n            options={lookerUserAttributeBrandOptions}\n            getOptionLabel={(option) => option.label}\n            style={{ width: 300 }}\n            onChange={(event) => handleClose((event.target.innerText || ''), 'brand')}\n            renderInput={(params) => <TextField {...params}\n              label=\"Change merchant brand\"\n              variant=\"outlined\"\n            />}\n            loadingText=\"Loading...\"\n            disableautofocus=\"true\"\n            onKeyDown={(event) => event.stopPropagation()}\n          />\n        </MenuItem>\n      </Menu>\n    </div>\n  );\n}\n","import React, { useContext } from 'react';\nimport { Typography, Grid, Fade, ClickAwayListener } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\n// import { docco } from 'react-syntax-highlighter/dist/esm/styles/hljs';\nimport { dracula } from 'react-syntax-highlighter/dist/esm/styles/hljs'; //hehe\nimport AppContext from '../../AppContext'\n\n//helper function for rendering content in code tab\nexport default function CodeFlyout(props) {\n  const { toggleCodeShow } = useContext(AppContext);\n  const { codeShow } = useContext(AppContext);\n\n  const { classes, lookerContent, clientSideCode, serverSideCode, lookerUser, permissionNeededCode, height } = props\n  return (\n    // <ClickAwayListener onClickAway={toggleCodeShow} mouseEvent={!codeShow ? false : 'click'}>\n    <Fade in={codeShow || false}>\n      {Object.keys(lookerUser).length ?\n        <Grid container spacing={3}\n          className={`${classes.padding20} ${classes.codeFlyoutContainer}`}\n          style={{ height }}>\n          <Grid item sm={11}>\n            <Typography variant=\"h6\" className={` ${classes.mrAuto}`} style={{ color: 'white' }}>\n              Looker User Object\n            </Typography>\n          </Grid>\n          <Grid item sm={1}\n            style={{ textAlign: 'right' }}\n          >\n            <CloseIcon style={{ color: 'white', cursor: 'pointer' }} onClick={() => toggleCodeShow()} />\n          </Grid>\n\n          <Grid item sm={12}>\n            <CodeSnippet code={lookerUser} />\n          </Grid>\n        </Grid> : ''\n      }\n    </Fade >\n    // </ClickAwayListener >\n  )\n}\n\nfunction CodeSnippet(props) {\n  // console.log('CodeSnippet');\n  // console.log('props', props);\n  const { code } = props\n  return (\n    <SyntaxHighlighter language=\"json\" style={dracula} showLineNumbers={true} >\n      {typeof code === \"object\" ? JSON.stringify(code, true, 4) : code}\n    </SyntaxHighlighter>)\n}","export default \"//imports\\nimport $ from 'jquery';\\nimport _ from 'lodash'\\nimport React, { useState, useEffect, useContext } from 'react';\\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, Divider } from '@material-ui/core'\\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\\nimport CodeFlyout from '../CodeFlyout';\\nimport rawSampleCode from '!!raw-loader!./SplashPage.js'; // eslint-disable-line import/no-webpack-loader-syntax\\nimport useStyles from './styles.js';\\nimport { TabPanel, a11yProps } from './helpers.js';\\nimport { SingleValueVis } from './SingleValueVis';\\nimport { Welcome } from './Welcome';\\nimport { PopularAnalysis } from './PopularAnalysis';\\nimport { EmbeddedLook } from './EmbeddedLook';\\nimport { EmbeddedDashboard } from './EmbeddedDashboard';\\nimport { ContentCarousel } from './ContentCarousel';\\nimport BottomBar from '../../Material/BottomBar.js'\\nimport AppContext from '../../../AppContext';\\nimport { EmbeddedQuery } from './EmbeddedQuery';\\nconst { validIdHelper } = require('../../../tools');\\n\\n//start of SplashPage Component\\nexport default function SplashPage(props) {\\n  // console.log('SplashPage')\\n  //intialize state using hooks\\n  const topBarBottomBarHeight = 112;\\n  const [value, setValue] = useState(0);\\n  const [iFrameExists, setIFrame] = useState(1);\\n  const [clientSideCode, setClientSideCode] = useState('');\\n  const [serverSideCode, setServerSideCode] = useState('');\\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\\n\\n  const { toggleShow } = useContext(AppContext)\\n  const { show } = useContext(AppContext)\\n  const { codeShow } = useContext(AppContext)\\n\\n\\n  //declare constants\\n  const classes = useStyles();\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, handleTabChange, handleMenuItemSelect, lookerUser, lookerHost } = props;\\n  const codeTab = {\\n    type: 'code flyout', label: 'Code', id: 'codeFlyout',\\n    lookerContent, lookerUser, clientSideCode, serverSideCode\\n  }\\n  const demoComponentType = type || 'code flyout';\\n\\n  //handle tab change\\n  const handleChange = (event, newValue) => {\\n    handleTabChange(0);\\n    setValue(newValue);\\n  };\\n\\n  /**\\n   * listen for lookerContent and call \\n   * setSampleCode\\n  */\\n  useEffect(() => {\\n    window.addEventListener(\\\"resize\\\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\\n  }, [lookerContent]);\\n\\n  /**\\n   * What this return  does:\\n   * Rendering of actual html elements,\\n   * this section is necessary but less relevant to looker functionality itself\\n   */\\n  return (\\n    <div className={`${classes.root} demoComponent`}\\n      style={{ height }}>\\n      <Card elevation={1} className={`${classes.padding30} \\n      ${classes.height100Percent}\\n      ${classes.overflowScroll}`}\\n      >\\n        <Grid container\\n          key={validIdHelper(type)}>\\n          <div className={classes.root}>\\n            {iFrameExists ? '' :\\n              <Grid item sm={12} >\\n                <Card className={`${classes.card} ${classes.flexCentered}`}>\\n                  <CircularProgress className={classes.circularProgress} />\\n                </Card>\\n              </Grid>\\n            }\\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\\n              <Grid container\\n                spacing={3}\\n                key={`${validIdHelper(demoComponentType + '-outerFragment')}`}\\n                className={`${classes.noContainerScroll}`}\\n              >\\n                {\\n                  codeShow ? <Grid item sm={6}\\n                    className={`${classes.positionFixedTopRight}`}\\n                  >\\n                    <CodeFlyout {...props}\\n                      classes={classes}\\n                      lookerUser={lookerUser}\\n                      height={height}\\n                    />\\n                  </Grid> : ''}\\n                {lookerContent.map((lookerContent, innerIndex) => {\\n                  return (\\n                    <Grid\\n                      key={`${validIdHelper(demoComponentType + '-innerFragment-' + innerIndex)}`}\\n                      item\\n                      sm={parseInt(lookerContent.gridWidth)}\\n                    >\\n                      {(lookerContent.type === 'welcome') && <Welcome\\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\\n                      />}\\n                      {(lookerContent.type === 'carousel') && <ContentCarousel\\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\\n                      />}\\n                      {(lookerContent.type === 'single value') && <SingleValueVis\\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\\n                      />}\\n                      {/* {(lookerContent.type === 'dashboard') && <EmbeddedDashboard\\n                        {...{ lookerContent, classes, lookerHost }} id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent.id}`)}\\n                      />} */}\\n                      {(lookerContent.type === 'dashboard') && <EmbeddedQuery\\n                        {...{ lookerContent, classes, lookerHost }} id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent.id}`)}\\n                      />}\\n                      {(lookerContent.type === 'popular analysis') && <PopularAnalysis\\n                        {...{ lookerContent, classes, demoComponentType, handleMenuItemSelect, lookerHost }}\\n                      />}\\n                    </Grid>\\n                  )\\n                })}\\n              </Grid>\\n            </Box >\\n          </div >\\n        </Grid >\\n      </Card >\\n    </div >\\n  )\\n}\";","import { makeStyles } from '@material-ui/core/styles';\nimport { red, green } from '@material-ui/core/colors';\nconst redPrimary = red[500];\nconst greenPrimary = green[500];\nconst redDark = red[900];\nconst greenDark = green[900];\nconst redLight = red[100];\nconst greenLight = green[100];\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    overflow: 'scroll',\n    borderRadius: 8\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  skeleton: {\n    minWidth: 275,\n    minHeight: 600,\n  },\n  card: {\n    minWidth: 275,\n  },\n  maxHeight200: {\n    maxHeight: 200,\n    height: 200,\n    overflow: 'hidden'\n  },\n  mt30: {\n    marginTop: 30\n  },\n  mb30: {\n    marginBottom: 30\n  },\n  textCenter: {\n    textAlign: 'center'\n  },\n  cursorPointer: {\n    cursor: 'pointer'\n  },\n  border: {\n    border: '1px solid black'\n  },\n  height800: {\n    height: 800\n  },\n  maxHeight100: {\n    maxHeight: 100,\n    height: 100,\n  },\n  maxHeight400: {\n    maxHeight: 400,\n    height: 400,\n  },\n  minHeight200: {\n    minHeight: 200,\n    overflow: 'scroll'\n  },\n  redNeg: {\n    backgroundColor: redLight,\n    color: redPrimary,\n    fontWeight: 800\n  },\n  greenPos: {\n    backgroundColor: greenLight,\n    color: greenPrimary,\n    fontWeight: 800\n  },\n  padding30: {\n    padding: 30\n  },\n  mb12: {\n    marginBottom: 12\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowHidden: {\n    overflow: 'hidden'\n  },\n  overflowVisible: {\n    overflow: 'visible'\n  },\n  maxHeight150: {\n    maxHeight: 150,\n    height: 150,\n  },\n  minHeight150: {\n    minHeight: 150,\n    overflow: 'scroll'\n  },\n  carouselLegend: {\n    backgroundColor: 'rgb(192,192,192, .5)\t !important',\n    textAlign: 'center !important',\n    opacity: `100 !important`,\n    fontWeight: 800,\n    // width: `${25}% !important`,\n  },\n  carouselLegendTitle: {\n    fontSize: '24px !important',\n\n  },\n  carouselLegendBody: {\n    fontSize: '16px !important',\n\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  padding15: {\n    padding: 15\n  },\n  maxHeight75: {\n    maxHeight: 75,\n    height: 75,\n  },\n  overflowYScroll: {\n    overflowY: 'scroll',\n    overflowX: 'hidden'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowHidden: {\n    overflow: 'hidden'\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  },\n  lookerCardShadow: {\n    border: 'none',\n    borderRadius: '6px',\n    boxShadow: 'rgba(0, 0, 0, 0.11) 0px 2px 12px, rgba(0, 0, 0, 0.04) 0px 1px 4px'\n  },\n  maxHeight60: {\n    maxHeight: 60,\n    height: 60,\n  },\n  maxHeight350: {\n    maxHeight: 350,\n    height: 350,\n  },\n  maxHeight80Percent: {\n    maxHeight: '80%',\n    height: '80%'\n  }\n}));","import React, { useContext } from 'react';\nimport AppContext from '../../AppContext';\nimport zIndex from '@material-ui/core/styles/zIndex';\nimport { Chip, Fade } from '@material-ui/core';\n\n\n// maybe move this to config?\nexport const API_COLOR = '#A142F4'\nexport const API_BACKGROUND_COLOR = 'rgba(161, 66, 244, 0.1)'\nexport const EMBED_COLOR = '#12B5CB'\nexport const EMBED_BACKGROUND_COLOR = 'rgba(18, 181, 203, 0.1)'\nexport const EMBED_METHOD_COLOR = '#297AF4'\nexport const EMBED_METHOD_BACKGROUND_COLOR = 'rgba(41, 122, 244, 0.1)'\n\nfunction Highlight({ children, color, height, width, margin, id, backgroundColor, ...props }) {\n  // console.log('Highlight')\n  // console.log('props', props)\n  const { show } = useContext(AppContext)\n  var style = {};\n  if (show) {\n    style = {\n      ...style,\n      // boxShadow: `0 0 10px ${color}, \n      // inset 0 0 10px ${color}`,\n\n      border: `3px solid ${color}`,\n      backgroundColor: `${backgroundColor}`,\n      borderRadius: `4px`,\n      // zIndex: 10000000000000000,\n      position: 'relative',\n      // padding: '10px'\n    }\n  } else {\n    style = {\n      border: `3px solid transparent`,\n      backgroundColor: `transparent`,\n      // padding: '10px'\n    }\n  }\n\n  if (height) { style['height'] = height }\n  if (width) { style['width'] = width }\n  if (margin) { style['margin'] = margin }\n\n  // boxShadow: `0 4px 80px ${color}22`\n\n  return (\n    <div id={id} style={style}\n    // {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ApiHighlight({ ...props }) {\n  const { show } = useContext(AppContext)\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={API_COLOR} backgroundColor={API_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"API\"}\n      className={show ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{ backgroundColor: \"#A142F4\", color: '#fff', top: '-10px', left: '-10px', position: 'absolute' }}\n    />\n    {children}\n\n  </Highlight>\n}\n\nexport function EmbedHighlight({ ...props }) {\n  const { show } = useContext(AppContext)\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={EMBED_COLOR} backgroundColor={EMBED_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"Embed\"}\n      className={show ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{\n        backgroundColor: \"#12B5CB\",\n        color: '#fff',\n        top: '-10px',\n        left: '-10px',\n        position: 'absolute',\n      }}\n    />\n    {children}\n\n  </Highlight>\n}\n\nexport function EmbedMethodHighlight({ ...props }) {\n  const { show } = useContext(AppContext)\n  const { classes } = props\n  const { children } = props\n\n  return <Highlight {...props} color={EMBED_METHOD_COLOR} backgroundColor={EMBED_METHOD_BACKGROUND_COLOR}>\n\n    <Chip size=\"small\"\n      label={\"Embed Method\"}\n      className={show ? 'test' : `${classes.hidden}`}\n      display=\"inline\"\n      align=\"right\"\n      style={{\n        backgroundColor: \"#297AF4\",\n        color: '#fff',\n        top: '-10px',\n        left: '-10px',\n        position: 'absolute'\n      }}\n    />\n    {children}\n\n  </Highlight>\n}\n","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, CircularProgress, Grid, Chip } from '@material-ui/core';\nimport { ResponsiveLine } from '@nivo/line';\nconst { validIdHelper, decodeHtml } = require('../../../tools');\n\n\n\nexport function SingleValueVis({ lookerContent, classes }) {\n  // console.log('SingleValueVis')\n  // console.log('lookerContent', lookerContent)\n\n  const [apiContent, setApiContent] = useState(undefined);\n  const { userProfile, lookerUser, show, sdk, corsApiCall } = useContext(AppContext);\n\n  let dataObjForSparkline = {}\n\n  useEffect(() => {\n    let isSubscribed = true\n    corsApiCall(runInlineQuery).then(response => {\n      if (isSubscribed) {\n        setApiContent(response)\n      }\n    })\n    return () => isSubscribed = false\n  }, [lookerContent, lookerUser]);\n\n  const runInlineQuery = async () => {\n\n    setApiContent(undefined)\n    let { inlineQuery } = lookerContent;\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n    dataObjForSparkline.id = validIdHelper(`singleVisValue-${lookerContent.id}`);\n    dataObjForSparkline.data = [];\n\n    let dataArrForDataObj = [];\n    lookerResponseData.map(item => {\n      if (item[lookerContent.inlineQuery.fields[0]]\n        // && item['order_items.count']['order_items.previous_period'][\"This Period\" ? \"This Period\" : \"Previous Period\"]\n      ) {\n        let thisDataItem = {\n          \"x\": item[lookerContent.inlineQuery.fields[0]].toString(),\n          \"y\": item[lookerContent.inlineQuery.fields[1]] || 0,\n          \"change\": item.change\n        }\n        if (thisDataItem && thisDataItem.y !== \"null\") dataArrForDataObj.push(thisDataItem)\n      }\n    })\n    dataObjForSparkline.data = [...dataArrForDataObj]\n    //setApiContent([dataObjForSparkline])\n    return [dataObjForSparkline]\n  }\n\n  const upOrDownArrow = apiContent && apiContent.length ? isNaN((apiContent[0].data[0].change * 100).toFixed(2)) ? '' : parseInt((apiContent[0].data[0].change * 100).toFixed(0)) >= 0 ? `&uarr;` : `&darr;` : '';\n  const labelText = !apiContent ? '' : lookerContent.chipFormat === \"revenue\" ?\n    `$${(apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '').replace(/\\d(?=(\\d{3})+\\.)/g, '$&,')}` :\n    lookerContent.chipFormat === \"integer\" ? parseInt(apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '') : lookerContent.chipFormat === 'percent' ?\n      `${((apiContent[0].data && apiContent[0].data[0] ? apiContent[0].data[0].y.toFixed(2) : '') * 100)\n      }% `\n      : '';\n  return (\n    <Card className={`${classes.padding15} \n    ${classes.overflowHidden} \n    ${classes.lookerCardShadow}\n    `}\n    >\n      <div\n        style={{\n          height: lookerContent.height,\n        }}\n      >\n        {apiContent ?\n          <React.Fragment>\n            <ApiHighlight height={130} classes={classes} >\n              <Grid container className={`${classes.textCenter} `}>\n                <Grid item sm={12}>\n                  <Typography variant=\"body2\" align=\"left\" color=\"secondary\">\n                    {lookerContent.label}\n                  </Typography>\n                </Grid>\n                <Grid item sm={6}>\n                  <Typography variant=\"subtitle1\" align=\"left\">\n                    <b>{labelText}</b>\n                  </Typography>\n                </Grid>\n                <Grid item sm={6}>\n                  <Chip size=\"small\"\n                    label={`${decodeHtml(upOrDownArrow)} ${parseInt(apiContent[0].data[0].change * 100).toFixed(0)}% `}\n                    className={isNaN((apiContent[0].data[0].change * 100).toFixed(2)) ? '' : parseInt((apiContent[0].data[0].change * 100).toFixed(0)) >= 0 ? classes.greenPos : classes.redNeg}\n                    display=\"inline\"\n                    align=\"right\"\n                  />\n                </Grid>\n              </Grid>\n              <ResponsiveLine\n                data={apiContent}\n                margin={{ top: 25, right: 25, bottom: 25, left: 25 }}\n                xScale={{\n                  type: 'time',\n                  format: '%Y-%m-%d',\n                  precision: 'day',\n                }}\n                yScale={{ type: 'linear', min: 'auto', max: 'auto', stacked: true, reverse: false }}\n                axisLeft={{\n                  orient: \"left\",\n                  tickSize: 0,\n                  tickPadding: 5,\n                  tickRotation: 0,\n                  format: () => null\n                }}\n                axisBottom={{\n                  orient: \"bottom\",\n                  tickSize: 0,\n                  tickPadding: 5,\n                  tickRotation: 0,\n                  format: () => null,\n                  // legend: lookerContent.label,\n                  // legendOffset: 15,\n                  // legendPosition: 'middle'\n                }}\n                enablePoints={false}\n                enableGridX={false}\n                enableGridY={false}\n                height={100}\n                colors={lookerContent.visColor}\n                animate={true}\n              />\n            </ApiHighlight>\n          </React.Fragment>\n          :\n          <Grid item sm={12} className={`${classes.flexCentered} `} style={{ height: lookerContent.height }}>\n            <CircularProgress className={classes.circularProgress}\n              style={{ color: `${lookerContent.visColor} ` }} />\n          </Grid>\n        }\n      </div >\n    </Card >\n  );\n}\n","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { ApiHighlight } from '../../Highlights/Highlight';\n\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, Grid, CircularProgress, Chip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nconst { validIdHelper, decodeHtml } = require('../../../tools');\n\n\nexport function NaturalLanguage({ lookerContent, inlineQuery, index, classes }) {\n  const [apiContent, setApiContent] = useState(undefined);\n  const { userProfile, lookerUser, show, sdk, corsApiCall } = useContext(AppContext);\n\n  useEffect(() => {\n    let isSubscribed = true\n    corsApiCall(runInlineQuery).then(response => {\n      if (isSubscribed) {\n        setApiContent(response)\n      }\n    })\n    return () => isSubscribed = false\n  }, [inlineQuery, lookerUser]);\n\n  const runInlineQuery = async () => {\n    setApiContent(undefined)\n    let clientLookerResponse = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n    return clientLookerResponse[0];\n  }\n\n  const upOrDownArrow = apiContent ? apiContent.change > 0 ? `&uarr;` : `&darr;` : '';\n\n  return (\n    <Grid item sm={12}>\n      {apiContent ?\n        <React.Fragment >\n          <ApiHighlight classes={classes} >\n            <Typography variant=\"subtitle1\" display=\"inline\">\n              Your {lookerContent.inlineQueriesMap[index]} category, <b>{apiContent['products.category']}</b>, is {apiContent.change > 0 ? 'up ' : 'down '}\n            </Typography>\n            <Chip size=\"small\"\n              label={`${decodeHtml(upOrDownArrow)} ${parseInt(apiContent.change * 100).toFixed(0)}% `}\n              className={apiContent.change > 0 ? classes.greenPos : classes.redNeg}\n              display=\"inline\"\n            />\n            <Typography variant=\"subtitle1\" display=\"inline\">\n              &nbsp;over the past week.\n        </Typography>\n          </ApiHighlight>\n        </React.Fragment>\n        : <div style={{ height: '56px' }}></div>\n\n        // <Grid item sm={12} >\n        //   <Card className={`${classes.card} ${classes.flexCentered}`}>\n        //     <CircularProgress className={classes.circularProgress}\n        //       style={{ color: `${lookerContent.visColor} ` }} />\n        //   </Card>\n        // </Grid>\n      }\n    </Grid >\n  );\n}\n\n","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, CircularProgress, Grid, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\nimport { NaturalLanguage } from './NaturalLanguage';\nconst { validIdHelper } = require('../../../tools');\n\nexport function Welcome({ lookerContent, classes }) {\n  // console.log('Welcome')\n  const { userProfile, lookerUser } = useContext(AppContext)\n\n  useEffect(() => {\n    // setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n  return (\n    <div\n      className={`${classes.overflowScroll} ${classes.padding15}`}\n      style={{ maxHeight: lookerContent.height }}\n    >\n      <Typography variant=\"h4\">Welcome back, {userProfile.givenName}!</Typography>\n      <br />\n      <>\n        {lookerContent.inlineQueries.map((inlineQuery, index) => (\n          <NaturalLanguage\n            key={`${validIdHelper('naturalLanguage-splashPage-' + index)}`}\n            {...{ lookerContent, inlineQuery, index, classes }}\n          />\n        )\n        )}\n      </>\n    </div >\n  );\n}\n","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, Grid, CircularProgress, Divider, Chip } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nexport function VectorThumbnail({ lookerContent, classes, item, handleMenuItemSelect, index }) {\n  // console.log('VectorThumbnail')\n\n  const [svg, setSvg] = useState(undefined)\n  const { userProfile, lookerUser, show, sdk, corsApiCall } = useContext(AppContext);\n\n\n  useEffect(() => {\n    let isSubscribed = true\n    corsApiCall(getThumbnail).then(response => {\n      if (isSubscribed) {\n        setSvg(response)\n      }\n    })\n    return () => isSubscribed = false\n  }, [item, lookerUser]);\n\n  const getThumbnail = async () => {\n    let clientLookerResponse = await sdk.ok(sdk.content_thumbnail({ type: item.resourceType, resource_id: item.id }));\n    const blob = new Blob([clientLookerResponse], { type: 'image/svg+xml' });\n    let url = URL.createObjectURL(blob);\n    return url;\n  }\n\n  return (\n    <Grid container\n      onClick={() => handleMenuItemSelect(item.id, 1)}\n      className={`${classes.cursorPointer}`}\n      spacing={3}\n    >\n      {svg ?\n        <>\n          <Grid item sm={1} />\n          <Grid item sm={6}>\n            <ApiHighlight classes={classes}>\n              <div\n                className={` ${classes.maxHeight60} ${classes.textCenter} ${classes.cursorPointer} ${classes.overflowHidden}`}\n              >\n                <img\n                  onClick={() => handleMenuItemSelect(item.id, 1)}\n                  src={svg}\n                  style={{ width: '100%' }}\n                />\n\n              </div>\n            </ApiHighlight>\n          </Grid>\n          <Grid item sm={4}>\n            <Typography variant=\"subtitle1\"  >{item.label}</Typography>\n          </Grid>\n          {index < 2 ?\n            <Grid item sm={12}>\n              <Divider className={`${classes.divider} ${classes.mb12} ${classes.mt12}`} />\n            </Grid> : ''}\n        </>\n        :\n        ''\n      }\n    </Grid >\n  );\n}","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, CircularProgress, Grid, Divider } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { ResponsiveLine } from '@nivo/line';\nimport { VectorThumbnail } from './VectorThumbnail';\nimport { NaturalLanguage } from './NaturalLanguage';\nconst { validIdHelper } = require('../../../tools');\n\n\n\nexport function PopularAnalysis({ lookerContent, classes, handleMenuItemSelect }) {\n  const [apiContent, setApiContent] = useState([]);\n\n  return (\n\n    <Card className={`${classes.padding15} \n    ${classes.overflowHidden} \n    ${classes.lookerCardShadow}\n    `}\n    // variant=\"outlined\"\n    >\n      <div\n        className={`${classes.overflowYScroll}`}\n        style={{ height: lookerContent.height }}\n      >\n        <Grid container\n          spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"h6\" align=\"center\" color=\"secondary\">\n              Helpful Dashboards\n          </Typography></Grid>\n          {lookerContent.vectors.map((item, index) => {\n            return (\n              <VectorThumbnail\n                key={`${validIdHelper('vectorThumbnail-splashPage-' + index)}`}\n                {...{ lookerContent, item, classes, handleMenuItemSelect, index }}\n              />\n            )\n          }\n          )}\n        </Grid>\n\n      </div >\n    </Card>\n  );\n}\n","import React, { useState, useEffect, useLayoutEffect, useRef, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { Typography, Card, CardActionArea, CardActions, CardContent, CardMedia, Button, CircularProgress, Grid, Divider, Hidden } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport \"react-responsive-carousel/lib/styles/carousel.min.css\"; // requires a loader\nimport { Carousel } from 'react-responsive-carousel';\nimport { ApiHighlight } from '../../Highlights/Highlight';\n\nconst { validIdHelper } = require('../../../tools');\n\n\n\nexport function ContentCarousel({ lookerContent, classes }) {\n  // console.log('Welcome')\n  const { userProfile, lookerUser } = useContext(AppContext)\n\n  useEffect(() => {\n    // setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n  const blogImage = require(`../../../images/atom_splash_blog.jpg`)\n  const blogTitle = 'Blog'\n  const blogBody = 'Read our latest thoughts on the ecommerce landscape'\n  const inventoryImage = require(`../../../images/atom_splash_inventory.jpg`)\n  const inventoryTitle = 'Inventory Best Practices'\n  const inventoryBody = 'McKinsey & Co found in a recent study that retailers who implement JIT inventory and fulfillment practices can result in 5 - 15% longer run operating margin vs similar competitors that dont while maintaining similar CSAT scores'\n  const trendsImage = require(`../../../images/atom_splash_trends.jpg`)\n  const trendsTitle = 'Macro Trends'\n  const trendsBody = 'Online and brick and mortar retailers are rapidly converging on Omni Channel where the traditional walls of retail vs online are blurred. Amazon partners with Kohls to create in person returns and Walmart acquires Jet.com to boost its reach and  ability to execute an online strategy. As a brand partner how do you capitalize on these trends?'\n\n  return (\n    <div\n      className={`${classes.overflowHidden}  MuiPaper-rounded`}\n      style={{\n        maxHeight: lookerContent.height,\n        borderRadius: '4px'\n      }}\n    >\n\n      <Carousel infiniteLoop={true} autoPlay={true} showThumbs={false}>\n        <div\n          style={{\n            maxHeight: lookerContent.height,\n            // backgroundImage: `url(${backgroundImage1})`,\n            // backgroundSize: 'cover'\n          }}\n        >\n          <img src={blogImage} />\n          <p className={`legend ${classes.carouselLegend}`}>\n            <span className={`${classes.carouselLegendTitle}`}>{blogTitle}</span>\n            <br />\n            <span className={`${classes.carouselLegendBody}`}>{`${blogBody.substring(0, 50)}...`}</span>\n          </p>\n        </div>\n        <div\n          style={{\n            maxHeight: lookerContent.height,\n            // backgroundImage: `url(${backgroundImage2})`,\n            // backgroundSize: 'cover'\n          }}\n        >\n          <img src={inventoryImage} />\n          <p className={`legend ${classes.carouselLegend}`}>\n            <span className={`${classes.carouselLegendTitle}`}>{inventoryTitle}</span>\n            <br />\n            <span className={`${classes.carouselLegendBody}`}>{`${inventoryBody.substring(0, 50)}...`}</span>\n          </p>\n        </div>\n        <div\n          style={{\n            maxHeight: lookerContent.height,\n            // backgroundImage: `url(${backgroundImage3})`,\n            // backgroundSize: 'cover'\n          }}\n        >\n          <img src={trendsImage} />\n          <p className={`legend ${classes.carouselLegend}`}>\n            <span className={`${classes.carouselLegendTitle}`}>{trendsTitle}</span>\n            <br />\n            <span className={`${classes.carouselLegendBody}`}>{`${trendsBody.substring(0, 50)}...`}</span>\n          </p>\n        </div>\n      </Carousel>\n    </div >\n  );\n}\n\n// export function createMarkup() {\n//   return { __html: 'First &middot; Second' };\n// }\n","import React, { useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Button, Grid } from '@material-ui/core';\nimport { Code, HighlightOutlined } from '@material-ui/icons';\nimport clsx from 'clsx';\n\nimport AppContext from '../../AppContext';\n\n\nexport default function BottomBar(props) {\n  // console.log('BottomBar')\n  // console.log('props', props)\n\n  const { classes } = props\n  const { toggleShow } = useContext(AppContext)\n  const { toggleCodeShow } = useContext(AppContext)\n\n  return (\n    <Grid container\n      className={`${classes.mtAuto} ${classes.mb10}`}>\n      <Grid item sm={6}>\n        <Button\n          display=\"inline\"\n          startIcon={<HighlightOutlined />}\n          onClick={toggleShow}>Source\n      </Button>\n      </Grid>\n      <Grid item sm={6}>\n        <Button\n          className={`${classes.ml12}`}\n          display=\"inline\"\n          startIcon={<Code />}\n          onClick={toggleCodeShow}>Code\n      </Button>\n      </Grid>\n    </Grid >\n  );\n}\n","import $ from 'jquery';\nimport React, { useEffect, useRef, useCallback, useState, useContext } from 'react';\nimport AppContext from '../../../AppContext';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\nimport { Typography, Grid, Card, CircularProgress, Box, Chip } from '@material-ui/core';\nimport { urlencoded } from 'body-parser';\n\nexport function EmbeddedQuery({ lookerContent, classes, id }) {\n\n  const [iFrameExists, setIFrame] = useState(0);\n  const { userProfile, lookerUser, show, lookerHost } = useContext(AppContext)\n\n  useEffect(() => {\n    $(`#${id}`).html('')\n    setIFrame(0)\n\n    // let queryUrl = encodeURIComponent(`embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A30.893092092422695%2C%22map_longitude%22%3A-94.54010009765625%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=${document.location.origin}`)\n    //https://pbldev.looker.com/explore/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config=%7B%22users.country%22%3A%5B%7B%22type%22%3A%22%3D%22%2C%22values%22%3A%5B%7B%22constant%22%3A%22USA%22%7D%2C%7B%7D%5D%2C%22id%22%3A0%2C%22error%22%3Afalse%7D%5D%7D&origin=share-expanded\n    let queryUrl = encodeURIComponent(`embed/query/atom_fashion/order_items?fields=order_items.created_time,users.name,order_items.total_sale_price,users.approx_location,users.city&f[users.country]=USA&sorts=order_items.created_time+desc&limit=100&query_timezone=America%2FLos_Angeles&vis=%7B%22map_plot_mode%22%3A%22points%22%2C%22heatmap_gridlines%22%3Afalse%2C%22heatmap_gridlines_empty%22%3Afalse%2C%22heatmap_opacity%22%3A0.5%2C%22show_region_field%22%3Atrue%2C%22draw_map_labels_above_data%22%3Atrue%2C%22map_tile_provider%22%3A%22traffic_day%22%2C%22map_position%22%3A%22custom%22%2C%22map_scale_indicator%22%3A%22off%22%2C%22map_pannable%22%3Atrue%2C%22map_zoomable%22%3Atrue%2C%22map_marker_type%22%3A%22circle%22%2C%22map_marker_icon_name%22%3A%22shopping_cart%22%2C%22map_marker_radius_mode%22%3A%22proportional_value%22%2C%22map_marker_units%22%3A%22pixels%22%2C%22map_marker_proportional_scale_type%22%3A%22linear%22%2C%22map_marker_color_mode%22%3A%22fixed%22%2C%22show_view_names%22%3Afalse%2C%22show_legend%22%3Atrue%2C%22quantize_map_value_colors%22%3Afalse%2C%22reverse_map_value_colors%22%3Afalse%2C%22map_latitude%22%3A40.267214274019075%2C%22map_longitude%22%3A-94.70352172851564%2C%22map_zoom%22%3A4%2C%22map_marker_color%22%3A%5B%22%234595EC%22%5D%2C%22series_types%22%3A%7B%7D%2C%22type%22%3A%22looker_map%22%2C%22defaults_version%22%3A1%2C%22hidden_fields%22%3A%5B%22users.name%22%2C%22order_items.created_time%22%5D%7D&filter_config={}&origin=share-expanded&sdk=2&embed_domain=${document.location.origin}`)\n    async function fetchData() {\n      // You can await here\n      await fetch(`/auth?src=${queryUrl}`)\n        .then(response => response.json())\n        .then(data => {\n          LookerEmbedSDK.createExploreWithUrl(data.url)\n            .appendTo(document.getElementById(id))\n            .withClassName('explore')\n            .withClassName('splashPage')\n            .withClassName(lookerContent.id)\n            .withTheme('atom_fashion')\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('then explore', explore)\n              setIFrame(1)\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n            })\n            .catch((error) => {\n              // console.log('catch', error)\n              console.error('Connection error', error)\n            })\n        });\n      // ...\n\n    }\n    fetchData();\n\n    // console.log('signedUrl', signedUrl)\n\n\n  }, [lookerUser])\n\n  return (\n\n    <Card className={`${classes.padding15} \n    // ${classes.overflowHidden} \n    ${classes.lookerCardShadow}\n    `}\n    // variant=\"outlined\"\n    >\n      <div\n        className={`${classes.overflowHidden}`}\n        style={{ height: lookerContent.height }}\n      >\n        {\n          iFrameExists ? '' :\n\n            <Grid item sm={12} >\n              <Card className={`${classes.card} ${classes.flexCentered} ${classes.maxHeight350} ${classes.overflowHidden}`} elevation={0}>\n                <CircularProgress className={classes.circularProgress}\n                />\n              </Card>\n            </Grid>\n        }\n        <Grid container spacing={4}>\n          <Grid item sm={12}>\n            <EmbedHighlight classes={classes}\n              height={iFrameExists ? 350 : 0}\n            >\n              <Typography variant=\"h6\" align=\"center\" color=\"secondary\">\n                {lookerContent.title}\n              </Typography>\n              <div\n                className={`embedContainer embedContainerNoHeader splashPage ${classes.overflowHidden} ${classes.maxHeight80Percent}`}\n                id={id}\n                key={id}\n              >\n              </div>\n            </EmbedHighlight>\n          </Grid></Grid>\n      </div >\n    </Card >\n  );\n}","//imports\nimport $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, Divider } from '@material-ui/core'\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./SplashPage.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport { SingleValueVis } from './SingleValueVis';\nimport { Welcome } from './Welcome';\nimport { PopularAnalysis } from './PopularAnalysis';\nimport { EmbeddedLook } from './EmbeddedLook';\nimport { EmbeddedDashboard } from './EmbeddedDashboard';\nimport { ContentCarousel } from './ContentCarousel';\nimport BottomBar from '../../Material/BottomBar.js'\nimport AppContext from '../../../AppContext';\nimport { EmbeddedQuery } from './EmbeddedQuery';\nconst { validIdHelper } = require('../../../tools');\n\n//start of SplashPage Component\nexport default function SplashPage(props) {\n  // console.log('SplashPage')\n  //intialize state using hooks\n  const topBarBottomBarHeight = 112;\n  const [value, setValue] = useState(0);\n  const [iFrameExists, setIFrame] = useState(1);\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n\n  const { toggleShow } = useContext(AppContext)\n  const { show } = useContext(AppContext)\n  const { codeShow } = useContext(AppContext)\n\n\n  //declare constants\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, handleTabChange, handleMenuItemSelect, lookerUser, lookerHost } = props;\n  const codeTab = {\n    type: 'code flyout', label: 'Code', id: 'codeFlyout',\n    lookerContent, lookerUser, clientSideCode, serverSideCode\n  }\n  const demoComponentType = type || 'code flyout';\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  /**\n   * listen for lookerContent and call \n   * setSampleCode\n  */\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  }, [lookerContent]);\n\n  /**\n   * What this return  does:\n   * Rendering of actual html elements,\n   * this section is necessary but less relevant to looker functionality itself\n   */\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowScroll}`}\n      >\n        <Grid container\n          key={validIdHelper(type)}>\n          <div className={classes.root}>\n            {iFrameExists ? '' :\n              <Grid item sm={12} >\n                <Card className={`${classes.card} ${classes.flexCentered}`}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n            }\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <Grid container\n                spacing={3}\n                key={`${validIdHelper(demoComponentType + '-outerFragment')}`}\n                className={`${classes.noContainerScroll}`}\n              >\n                {\n                  codeShow ? <Grid item sm={6}\n                    className={`${classes.positionFixedTopRight}`}\n                  >\n                    <CodeFlyout {...props}\n                      classes={classes}\n                      lookerUser={lookerUser}\n                      height={height}\n                    />\n                  </Grid> : ''}\n                {lookerContent.map((lookerContent, innerIndex) => {\n                  return (\n                    <Grid\n                      key={`${validIdHelper(demoComponentType + '-innerFragment-' + innerIndex)}`}\n                      item\n                      sm={parseInt(lookerContent.gridWidth)}\n                    >\n                      {(lookerContent.type === 'welcome') && <Welcome\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\n                      />}\n                      {(lookerContent.type === 'carousel') && <ContentCarousel\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\n                      />}\n                      {(lookerContent.type === 'single value') && <SingleValueVis\n                        {...{ lookerContent, classes, demoComponentType, lookerHost }}\n                      />}\n                      {/* {(lookerContent.type === 'dashboard') && <EmbeddedDashboard\n                        {...{ lookerContent, classes, lookerHost }} id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent.id}`)}\n                      />} */}\n                      {(lookerContent.type === 'dashboard') && <EmbeddedQuery\n                        {...{ lookerContent, classes, lookerHost }} id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent.id}`)}\n                      />}\n                      {(lookerContent.type === 'popular analysis') && <PopularAnalysis\n                        {...{ lookerContent, classes, demoComponentType, handleMenuItemSelect, lookerHost }}\n                      />}\n                    </Grid>\n                  )\n                })}\n              </Grid>\n            </Box >\n          </div >\n        </Grid >\n      </Card >\n    </div >\n  )\n}","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    // backgroundColor: theme.palette.background.paper ? theme.palette.background.paper : '',\n    overflow: 'scroll',\n    borderRadius: '8px'\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    // position: 'absolute', //hack for obscuring other elements within Box\n    // zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  mrAuto: {\n    marginRight: 'auto'\n  },\n  card: {\n    minWidth: 275,\n    // minHeight: 400,\n  },\n  padding30: {\n    padding: 30\n  },\n  minHeight680: {\n    minHeight: 680,\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  skeleton: {\n    height: 160,\n    width: '100%'\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  padding10: {\n    padding: 10\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  },\n  verticalAlignTop: {\n    verticalAlign: 'top'\n  },\n  w33: {\n    width: \"33%\"\n  },\n  mr12: {\n    marginRight: 12\n  },\n  dot: {\n    height: \"25px\",\n    width: \"25px\",\n    borderRadius: \"50%\",\n    display: \"inline-block\"\n  },\n  borderRadius0: { borderRadius: 0 }\n}));\n","import React from 'react';\nimport { TextField } from '@material-ui/core';\n\nexport function NumberToColoredPercent( {val, positive_good, abs_val}) {\n  const colors = {\n    up: (positive_good) ? 'green' : 'red',\n    down: (positive_good) ? 'red' : 'green'\n  }\n  const color = (val<0) ? colors.down : (val>0) ? colors.up : 'black'\n  const val_formatted = Math.abs(val).toLocaleString(\"en\", { style: \"percent\", minimumFractionDigits: 2 })\n  const icon = (val<0) ? '' : (val>0) ? '' : ''\n  \n  return (<>\n      <font\n        color={color}\n      >\n        {`${icon} ${val_formatted}`}\n      </font>\n  </>\n  )\n}","import { CheckboxSVGMap } from \"react-svg-map\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport _ from 'lodash'\n\nCheckboxSVGMap.prototype.toggleLocation = function toggleLocation(event) {\n  const location = event.target;\n  // console.log('location', location)\n  // console.log('this.props.map', this.props.map)\n\n  this.setState(prevState => {\n\n    // Copy old state\n    let selectedLocations = [...prevState.selectedLocations];\n    // console.log('selectedLocations', selectedLocations)\n    // console.log('selectedLocations.length', selectedLocations.length)\n\n    //get region associated with states\n    let regionFromStateClicked = _.find(this.props.map.locations, { id: location.id })\n    //all states belonging to region clicked\n    let statesWithinRegionClicked = _.filter(this.props.map.locations, { region: regionFromStateClicked.region })\n\n    //get all unique regions\n    let allUniqueRegions = [];\n    for (let i = 0; i < this.props.map.locations.length; i++) {\n      if (allUniqueRegions.indexOf(this.props.map.locations[i].region) == -1) {\n        allUniqueRegions.push(this.props.map.locations[i].region)\n      }\n    }\n    //get unique regions only from selected locations\n    let allUniqueRegionsFromSelectedLocations = [];\n    for (let j = 0; j < selectedLocations.length; j++) {\n      if (allUniqueRegionsFromSelectedLocations.indexOf(selectedLocations[j].region) == -1) {\n        allUniqueRegionsFromSelectedLocations.push(selectedLocations[j].region)\n      }\n    }\n    //determine which regions are not currently selected\n    let regionsNotCurrentlySelected = _.differenceBy(allUniqueRegions, allUniqueRegionsFromSelectedLocations);\n    let allRegionsNotSelected = [...regionsNotCurrentlySelected, regionFromStateClicked.region];\n    //filter all locations, for all the regions that have not been selected :D\n    let statesNotWithinRegionsClicked = _.filter(this.props.map.locations, (location) => {\n      return allRegionsNotSelected.indexOf(location.region) == -1\n    });\n\n    if (location.attributes['aria-checked'].value === 'true') {\n      // Delete location\n      selectedLocations = statesNotWithinRegionsClicked;\n    } else {\n      // Add location\n      selectedLocations.push(...statesWithinRegionClicked);\n    }\n\n    // Call onChange event handler\n    if (this.props.onChange) {\n      this.props.onChange(selectedLocations);\n    }\n\n    // Return new state\n    return { selectedLocations };\n  });\n}\n\nCheckboxSVGMap.prototype.componentDidMount = function componentDidMount() {\n  //override components for all states to be selected initially\n  this.setState({ selectedLocations: this.props.map.locations });\n}\n\nexport { CheckboxSVGMap as CheckboxSVGMap } \n","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField, FormControlLabel, Chip,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Slider, FormControl, InputLabel, Select, MenuItem, Switch\n} from '@material-ui/core'\nimport { Autocomplete, ToggleButton, ToggleButtonGroup, Skeleton } from '@material-ui/lab'\nimport {\n  ExpandMore, FilterList, SentimentDissatisfied, SentimentSatisfied, SentimentVerySatisfied,\n} from '@material-ui/icons';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\n\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./Dashboard.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport BottomBar from '../../Material/BottomBar.js'\nimport { ApiHighlight, EmbedHighlight, EmbedMethodHighlight } from '../../Highlights/Highlight';\nimport { NumberToColoredPercent } from '../../Accessories/NumberToColoredPercent';\nimport AppContext from '../../../AppContext';\n//new\nimport Usa from \"@svg-maps/usa\";\nimport { CheckboxSVGMap } from \"./CheckboxSvgMapRegion\";\n\nconst { validIdHelper } = require('../../../tools');\n\nexport default function Dashboard(props) {\n  // console.log('Dashboard')\n  // console.log('props', props)\n\n  const { staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n  const demoComponentType = type || 'code flyout';\n  const topBarBottomBarHeight = 112;\n\n  const [value, setValue] = useState(0);\n  const [iFrameExists, setIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState(undefined);\n  const [dashboardObj, setDashboardObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [dashboardOptions, setDashboardOptions] = useState({});\n  const [regionValue, setRegionValue] = useState('Pacific,South,Mountain,Midwest,Northeast');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [tileToggleValue, setTileToggleValue] = useState('');\n  const [visColorToggleValue, setVisColorToggleValue] = useState('#2d4266');\n  const [lightThemeToggleValue, setLightThemeToggleValue] = useState(true);\n  const [fontThemeSelectValue, setFontThemeSelectValue] = useState(\"arial\");\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\n  const { togglePayWallModal, show, codeShow, sdk, atomTheme, corsApiCall } = useContext(AppContext)\n\n  const isThemeableDashboard = validIdHelper(`${demoComponentType}${lookerContent[0].id}`) === 'customfilter1';\n  const darkThemeBackgroundColor = \"#343D4E\";\n\n  const classes = useStyles();\n\n  //condtional theming for dark mode :D\n  let paletteToUse = !lightThemeToggleValue ?\n    {\n      palette: {\n        type: 'dark',\n        background: { paper: darkThemeBackgroundColor, default: darkThemeBackgroundColor },\n      }\n    }\n    :\n    { palette: { ...atomTheme.palette } }\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme(\n        paletteToUse\n      ),\n    [lightThemeToggleValue],\n  );\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleTileToggle = (event, newValue) => {\n    setTileToggleValue(newValue)\n    const filteredLayout = _.filter(dashboardOptions.layouts[0].dashboard_layout_components, (row) => {\n      return (lookerContent[0].dynamicFieldLookUp[newValue].indexOf(dashboardOptions.elements[row.dashboard_element_id].title) > -1)\n    })\n\n    const newDashboardLayout = {\n      ...dashboardOptions.layouts[0],\n      dashboard_layout_components: filteredLayout\n    }\n    dashboardObj.setOptions({ \"layouts\": [newDashboardLayout] })\n  };\n\n  const handleVisColorToggle = (event, newValue) => {\n    let newColorSeries = lookerContent[0].dynamicVisConfig.colors[newValue];\n    let newDashboardElements = { ...dashboardOptions.elements };\n    Object.keys(newDashboardElements).map(key => {\n      if (newDashboardElements[key].vis_config.series_colors) {\n        Object.keys(newDashboardElements[key].vis_config.series_colors).map((innerKey, index) => {\n          newDashboardElements[key].vis_config.series_colors[innerKey] = newColorSeries[index] || newColorSeries[0];\n        })\n      }\n\n      if (newDashboardElements[key].vis_config.custom_color) {\n        newDashboardElements[key].vis_config.custom_color = newColorSeries[0]\n      }\n\n      if (newDashboardElements[key].vis_config.map_value_colors) {\n        newDashboardElements[key].vis_config.map_value_colors.map((item, index) => {\n          newDashboardElements[key].vis_config.map_value_colors[index] = newColorSeries[index] || newColorSeries[0];\n        })\n      }\n\n      // loss some fidelity here\n      if (newDashboardElements[key].vis_config.series_cell_visualizations) {\n        Object.keys(newDashboardElements[key].vis_config.series_cell_visualizations).map((innerKey, index) => {\n          if (newDashboardElements[key].vis_config.series_cell_visualizations[innerKey].hasOwnProperty(\"palette\")) {\n            newDashboardElements[key].vis_config.series_cell_visualizations[innerKey][\"palette\"] = { ...lookerContent[0].dynamicVisConfig.series_cell_visualizations[newValue] }\n          }\n        })\n      }\n\n\n    })\n    setVisColorToggleValue(newValue)\n    dashboardObj.setOptions({ \"elements\": { ...newDashboardElements } })\n  };\n\n  const handleThemeChange = (event, newValue) => {\n    let themeName = '';\n    if (typeof newValue === \"boolean\") {//handleModeToggle\n      setLightThemeToggleValue(newValue)\n      themeName = newValue ? `light_${fontThemeSelectValue}` : `dark_${fontThemeSelectValue}`\n    } else { //handleFontToggle\n      themeName = lightThemeToggleValue ? `light_${newValue}` : `dark_${newValue}`\n      setFontThemeSelectValue(newValue)\n    }\n    corsApiCall(performLookerApiCalls, [lookerContent, themeName])\n  }\n\n  useEffect(() => {\n    let themeName = lightThemeToggleValue ? 'light' : 'dark';\n    themeName += `_${fontThemeSelectValue}`;\n    corsApiCall(performLookerApiCalls, [[...lookerContent], themeName])\n    setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n\n  useEffect(() => {\n    if (Object.keys(dashboardOptions).length && Object.keys(dashboardObj).length && lookerContent[0].dynamicFieldLookUp) {\n      handleTileToggle(null, tileToggleValue ? tileToggleValue : Object.keys(lookerContent[0].dynamicFieldLookUp)[0])\n      handleVisColorToggle(null, visColorToggleValue ? visColorToggleValue : '#2d4266')\n    }\n  }, [dashboardOptions]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\n  })\n\n  const performLookerApiCalls = function (lookerContent, dynamicTheme) {\n    // console.log('performLookerApiCalls')   \n    // console.log({ lookerContent })   \n    // console.log({ dynamicTheme })\n\n    setIFrame(0)\n    $(`.embedContainer.${validIdHelper(demoComponentType)}:visible`).html('')\n    lookerContent.map(async lookerContent => {\n      //dashboard creation\n      let dashboardId = lookerContent.id;\n      let themeToUse = dynamicTheme && isThemeableDashboard ?\n        dynamicTheme :\n        lookerContent.theme ?\n          lookerContent.theme :\n          'atom_fashion';\n      // console.log('themeToUse', themeToUse)\n\n      LookerEmbedSDK.createDashboardWithId(dashboardId) //dashboardSlug\n        .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${dashboardId}`))\n        .withClassName('iframe')\n        .withNext()\n        // .withNext(lookerContent.isNext || false) //how can I make this dynamic based on prop??\n        .withTheme(themeToUse)\n        .withParams({ 'schedule_modal': 'true' })\n        .on('page:property:change', (event) => {\n          // console.log('page property is changing!!!!')\n          changeHeight(event)\n        }) // dashboards-next\n        .on('dashboard:loaded', (event) => {\n          setDashboardOptions(event.dashboard.options)\n        })\n        // .on('drillmenu:click', (event) => {\n        //   drillMenuClick(event)\n        // })\n        .build()\n        .connect()\n        .then((dashboard) => {\n          setIFrame(1)\n          setDashboardObj(dashboard)\n          LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n\n        })\n        .catch((error) => {\n          // console.error('Connection error', error)\n        })\n      //additional api calls\n      //only want to perform when there's not apiContent\n      if (lookerContent.hasOwnProperty('filters') && !apiContent) {\n        // setApiContent(undefined)\n        //get inline query from usecase file & set user attribute dynamically\n        //iterating over filters\n        let orderedArrayForApiContent = []\n        lookerContent.filters.map(async (item, index) => {\n          let jsonQuery = lookerContent.inlineQueries[index];\n          jsonQuery.filters = {\n            ...jsonQuery.filters,\n            [item.desiredFilterName]: lookerUser.user_attributes.brand\n          };\n\n          let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: jsonQuery }));\n          let queryResultsForDropdown = [];\n          let desiredProperty = Object.keys(lookerResponseData[0])[0];\n\n          for (let i = 0; i < lookerResponseData.length; i++) {\n            queryResultsForDropdown.push({\n              'label': lookerResponseData[i][desiredProperty],\n              'trend': (lookerResponseData[i]['trend']) ? lookerResponseData[i]['trend'] : undefined\n            })\n          }\n\n          orderedArrayForApiContent[index] = queryResultsForDropdown\n          setApiContent([...orderedArrayForApiContent])\n        })\n      }\n\n    })\n  }\n\n  const customFilterAction = (dashboardId, filterName, newFilterValue) => {\n    if (Object.keys(dashboardObj).length) {\n      dashboardObj.updateFilters({ [filterName]: newFilterValue })\n      dashboardObj.run()\n    }\n  }\n\n  // const drillMenuClick = (event) => {\n  //   const basicLookerUser = lookerUser.user_attributes.permission_level === 'basic' ? true : false;\n  //   if (basicLookerUser) {\n  //     togglePayWallModal()\n  //     return { cancel: (basicLookerUser) ? true : false }\n  //   }\n  // }\n\n  const changeHeight = (event) => {\n    // console.log('changeHeight')\n    // console.log('event', event)\n  }\n\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}\n    >\n      <ThemeProvider theme={theme}>\n        <Card elevation={1} className={`${classes.padding30} ${classes.height100Percent}`}>\n          <Grid container>\n            <div\n              className={`${classes.root}`}\n            >\n              {lookerContent[0].hasOwnProperty(\"filters\") &&\n                apiContent &&\n                apiContent.length === lookerContent[0].filters.length ?\n                <Grid item\n                  sm={12}\n                  key={validIdHelper(`${demoComponentType}-FilterBar-${lookerContent[0].id}`)}>\n                  <FilterBar {...props}\n                    classes={classes}\n                    apiContent={apiContent}\n                    customFilterAction={customFilterAction}\n                    regionValue={regionValue}\n                    setRegionValue={setRegionValue}\n                    tileToggleValue={tileToggleValue}\n                    handleTileToggle={handleTileToggle}\n                    visColorToggleValue={visColorToggleValue}\n                    handleVisColorToggle={handleVisColorToggle}\n                    lightThemeToggleValue={lightThemeToggleValue}\n                    fontThemeSelectValue={fontThemeSelectValue}\n                    handleThemeChange={handleThemeChange}\n                    isThemeableDashboard={isThemeableDashboard}\n                  />\n                </Grid> :\n                lookerContent[0].hasOwnProperty(\"filters\") ?\n                  <Skeleton variant=\"rect\" animation=\"wave\" className={classes.skeleton} /> :\n                  ''}\n              {\n                iFrameExists\n                  ? ''\n                  :\n                  <Grid item sm={12} style={{ height: height - 30 - expansionPanelHeight }}>\n                    <Card className={`${classes.card} ${classes.flexCentered}`}\n                      elevation={0}\n                      mt={2}\n                      style={{ height: height - 30 - expansionPanelHeight }}>\n                      <CircularProgress className={classes.circularProgress} />\n                    </Card>\n                  </Grid>\n              }\n              <Box\n                className={iFrameExists ? ` ` : `${classes.hidden} `}\n                style={{ height: height - 30 - expansionPanelHeight }}>\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid>\n                    : ''}\n                  <Grid item sm={12}>\n                    <Box className={`${classes.w100} ${classes.padding10}`} mt={lookerContent[0].filter || lookerContent[0].dynamicFieldLookUp ? 2 : 0}>\n                      <EmbedHighlight classes={classes}>\n                        <div\n                          className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                          id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                          key={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\n                        >\n                        </div>\n                      </EmbedHighlight>\n                    </Box>\n                  </Grid>\n                </Grid>\n              </Box>\n            </div>\n          </Grid>\n        </Card>\n      </ThemeProvider>\n    </ div>\n  )\n}\n\n\nfunction FilterBar(props) {\n  // console.log('FilterBar')\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, customFilterAction, regionValue, setRegionValue, tileToggleValue, handleTileToggle, //changeTheme,\n    visColorToggleValue, handleVisColorToggle, lightThemeToggleValue, fontThemeSelectValue, handleThemeChange, isThemeableDashboard\n  } = props;\n\n  const [expanded, setExpanded] = useState(true);\n  const [sliderValue, setSliderValue] = React.useState([]);\n  const [lifetimeRevenueTierValue, setLifetimeRevenueTierValue] = useState('0-24');\n  // const [speedDialOpen, setSpeedDialOpen] = React.useState(false);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const customUsa = {\n    ...Usa,\n    label: \"Custom map label\",\n    locations: Usa.locations.map(location => {\n      // Modify each location\n      switch (location.name) {\n        //9\n        case \"Connecticut\":\n        case \"Maine\":\n        case \"Massachusetts\":\n        case \"New Hampshire\":\n        case \"Rhode Island\":\n        case \"Vermont\":\n        case \"New Jersey\":\n        case \"New York\":\n        case \"Pennsylvania\":\n        case \"Delaware\":\n          return { ...location, region: \"Northeast\" }\n        //12\n        case \"Illinois\":\n        case \"Indiana\":\n        case \"Michigan\":\n        case \"Ohio\":\n        case \"Wisconsin\":\n        case \"Iowa\":\n        case \"Kansas\":\n        case \"Minnesota\":\n        case \"Missouri\":\n        case \"Nebraska\":\n        case \"North Dakota\":\n        case \"South Dakota\":\n          return { ...location, region: \"Midwest\" }\n        //16\n        case \"Florida\":\n        case \"Georgia\":\n        case \"Maryland\":\n        case \"North Carolina\":\n        case \"South Carolina\":\n        case \"Virginia\":\n        case \"District of Columbia\":\n        case \"Washington, DC\":\n        case \"West Virginia\":\n        case \"Alabama\":\n        case \"Kentucky\":\n        case \"Mississippi\":\n        case \"Tennessee\":\n        case \"Arkansas\":\n        case \"Louisiana\":\n        case \"Oklahoma\":\n        case \"Texas\":\n          return { ...location, region: \"South\" }\n        //8\n        case \"Arizona\":\n        case \"Colorado\":\n        case \"Idaho\":\n        case \"Montana\":\n        case \"Nevada\":\n        case \"New Mexico\":\n        case \"Utah\":\n        case \"Wyoming\":\n          return { ...location, region: \"Mountain\" }\n        //5\n        case \"Alaska\":\n        case \"California\":\n        case \"Hawaii\":\n        case \"Oregon\":\n        case \"Washington\":\n          return { ...location, region: \"Pacific\" }\n        // default:\n        //   return location\n      }\n    })\n  };\n\n  const handleSliderChange = (event, newValue) => {\n    setSliderValue(newValue);\n  };\n\n  const lifetimeRevenueTierMap = {\n    \"0 to 99\": \"low\",\n    \"100 to 499\": \"medium\",\n    \"500 or Above\": \"high\",\n  }\n  const lifetimeRevenueTierIconMap = {\n    \"0 to 99\": SentimentDissatisfied,\n    \"100 to 499\": SentimentSatisfied,\n    \"500 or Above\": SentimentVerySatisfied,\n  }\n\n  return (\n\n    <ExpansionPanel\n      expanded={expanded}\n      onChange={handleExpansionPanel}\n      // className={classes.w100}\n      className={`${classes.w100} MuiExpansionPanel-root`}\n      elevation={0}\n    >\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid\n          container spacing={3}>\n          {\n            lookerContent[0].filters || lookerContent[0].dynamicFieldLookUp ?\n              <>\n                {apiContent.map((item, index) => {\n                  return (\n                    lookerContent[0].filterComponents[index] === 'autocomplete' ?\n                      <Grid item sm={3}>\n\n                        <ApiHighlight classes={classes}\n                          key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n\n                          <Typography\n                          >Filter By Product:</Typography>\n                          <Autocomplete\n                            id={`combo-box-dashboard-${lookerContent.id}`}\n                            options={Array.isArray(apiContent[index]) ?\n                              apiContent[index] :\n                              []}\n                            renderOption={(option) => (\n                              <Grid container justify=\"space-between\">\n                                <Grid item >\n                                  {option.label}\n                                </Grid>\n                                {option.trend && <Grid item>\n                                  <NumberToColoredPercent\n                                    val={option.trend}\n                                    positive_good={true}\n                                    abs_val={Math.abs(option.trend)}\n                                  />\n                                </Grid>}\n                              </Grid>\n                            )}\n                            getOptionLabel={(option) => option.label}\n                            onChange={(event, newValue) => {\n                              customFilterAction(lookerContent[0].id,\n                                lookerContent[0].filters[index].filterName,\n                                (newValue) ? newValue.label : '')\n                            }}\n                            renderInput={(params) => <TextField {...params}\n                              label={lookerContent[0].filters[index].filterName}\n                              variant=\"outlined\"\n                            />}\n                            loadingText=\"Loading...\"\n                          />\n                        </ApiHighlight>\n                      </Grid>\n                      : lookerContent[0].filterComponents[index] === 'mapfilter' ?\n                        <>\n                          <Grid item sm={4} >\n                            <EmbedMethodHighlight classes={classes}\n                              key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                              <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                              >Region(s): <b>{regionValue ? regionValue : \"Outside US\"}</b></Typography>\n\n                              <CheckboxSVGMap map={customUsa}\n                                onChange={(locations) => {\n\n                                  let allUniqueRegionsFromSelectedLocations = [];\n                                  for (let j = 0; j < locations.length; j++) {\n                                    if (allUniqueRegionsFromSelectedLocations.indexOf(locations[j].region) == -1) {\n                                      allUniqueRegionsFromSelectedLocations.push(locations[j].region)\n                                    }\n                                  }\n                                  let allUniqueRegionsFromSelectedLocationsCommaSep = allUniqueRegionsFromSelectedLocations.join(\",\")\n                                  setRegionValue(allUniqueRegionsFromSelectedLocationsCommaSep)\n                                  customFilterAction(lookerContent[0].id,\n                                    lookerContent[0].filters[index].filterName,\n                                    (regionValue) ? regionValue : '')\n                                }}\n                              />\n                            </EmbedMethodHighlight>\n                          </Grid>\n                        </>\n                        : lookerContent[0].filterComponents[index] === \"rangeslider\"\n                          ?\n\n                          <Grid container item sm={4} >\n                            <Grid item sm={12}>\n                              <EmbedMethodHighlight classes={classes}\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                                >Age Range:</Typography>\n                                <Slider\n                                  value={sliderValue.length ? sliderValue : Array.isArray(apiContent[index]) ? [apiContent[index][0].label, apiContent[index][apiContent[index].length - 1].label] : []}\n                                  onChange={handleSliderChange}\n                                  onChange={(event, newValue) => {\n                                    setSliderValue(newValue);\n                                  }}\n                                  valueLabelDisplay=\"auto\"\n                                  aria-labelledby=\"range-slider\"\n                                  onChangeCommitted={(event, newValue) => {\n                                    customFilterAction(lookerContent[0].id,\n                                      lookerContent[0].filters[index].filterName,\n                                      (newValue) ? `[${newValue}]` : '[]')\n                                  }}\n                                  min={Array.isArray(apiContent[index]) ? apiContent[index][0].label : ''}\n                                  max={Array.isArray(apiContent[index]) ? apiContent[index][apiContent[index].length - 1].label : ''}\n                                  name=\"Age Range\"\n                                  marks={Array.isArray(apiContent[index]) ? [{ value: apiContent[index][0].label, label: apiContent[index][0].label }, { value: apiContent[index][apiContent[index].length - 1].label, label: apiContent[index][apiContent[index].length - 1].label }] : ''}\n                                  disabled={Array.isArray(apiContent[index]) ? false : true}\n                                />\n                              </EmbedMethodHighlight>\n                            </Grid>\n                            <Grid item sm={12}>\n                              <EmbedMethodHighlight classes={classes}\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\n                                >Lifetime Revenue Tier:</Typography>\n                                <ToggleButtonGroup\n                                  value={lifetimeRevenueTierValue}\n                                  exclusive //for now\n                                  onChange={(event, newValue) => {\n                                    setLifetimeRevenueTierValue(newValue)\n                                    customFilterAction(lookerContent[0].id,\n                                      lookerContent[0].filters[index + 1].filterName,\n                                      (newValue) ? newValue : '')\n                                  }}\n                                  aria-label=\"ageTier\"\n                                  className={classes.w100}>\n                                  >\n                                {apiContent[index + 1].map((ageTier, index) => {\n                                    if (ageTier.label !== \"Undefined\") {\n                                      const Icon = lifetimeRevenueTierIconMap[ageTier.label];\n                                      return (\n                                        <ToggleButton\n                                          key={validIdHelper(`${type}-FilterBar-ToggleButton-${lookerContent[0].id}-${index}`)}\n                                          value={ageTier.label}\n                                          aria-label={ageTier.label}\n                                          className={classes.w33}>\n                                          <Icon className={classes.mr12} />\n                                          {_.capitalize(lifetimeRevenueTierMap[ageTier.label]) || ageTier.label}\n                                        </ToggleButton>\n                                      )\n                                    }\n                                  })}\n                                </ToggleButtonGroup>\n\n                              </EmbedMethodHighlight>\n                            </Grid>\n                          </Grid>\n                          :\n                          '')\n                })}\n                {lookerContent[0].dynamicFieldLookUp ?\n                  <>\n                    <Grid item sm={3}>\n                      <EmbedMethodHighlight classes={classes} >\n                        <Typography\n                        >Dynamic Tiles:</Typography>\n                        <ToggleButtonGroup\n                          value={tileToggleValue}\n                          exclusive\n                          onChange={handleTileToggle}\n                          aria-label=\"text alignment\"\n                        >\n                          {Object.keys(lookerContent[0].dynamicFieldLookUp).map(key => {\n                            return (\n                              <ToggleButton\n                                key={validIdHelper(`dynamicDashTileToggle-${key}`)}\n                                value={key} aria-label=\"left aligned\">\n                                {key}\n                              </ToggleButton>\n                            )\n                          })}\n                        </ToggleButtonGroup>\n                      </EmbedMethodHighlight>\n                    </Grid>\n                  </>\n                  : ''\n                }\n                {lookerContent[0].dynamicVisConfig ?\n                  <>\n                    <Grid item sm={2}>\n                      <EmbedMethodHighlight classes={classes} >\n                        <Typography\n                        >Dynamic Vis Color:</Typography>\n                        <ToggleButtonGroup\n                          value={visColorToggleValue}\n                          exclusive\n                          onChange={handleVisColorToggle}\n                          aria-label=\"text alignment\"\n                        >\n                          {Object.keys(lookerContent[0].dynamicVisConfig.colors).map(key => {\n                            return (\n                              <ToggleButton\n                                key={validIdHelper(`dynamicDashVisConfigToggle-${key}`)}\n                                value={key} aria-label=\"left aligned\">\n                                <span className={`${classes.dot}`} style={{\n                                  backgroundColor: (lookerContent[0].dynamicVisConfig.colors[key][lookerContent[0].dynamicVisConfig.colors[key].length - 1]\n                                    || key)\n                                }}></span>\n                              </ToggleButton>\n                            )\n                          })}\n                        </ToggleButtonGroup>\n\n                      </EmbedMethodHighlight>\n                    </Grid>\n                  </>\n                  : ''\n                }\n                {lookerContent[0].dynamicThemeMode ?\n                  <>\n                    <Grid item sm={1}>\n                      <EmbedHighlight classes={classes} >\n                        <Typography\n                        >{lightThemeToggleValue ? \"Light mode\" : \"Dark mode\"}</Typography>\n\n                        <Switch\n                          checked={!lightThemeToggleValue}\n                          onChange={() => handleThemeChange(null, !lightThemeToggleValue)}\n                          color=\"primary\"\n                          name=\"light theme toggle\"\n                          inputProps={{ 'aria-label': 'primary checkbox' }}\n                        />\n\n                      </EmbedHighlight>\n                    </Grid>\n                  </>\n                  : ''\n                }\n                {lookerContent[0].dynamicThemeFont ?\n                  <>\n                    <Grid item sm={2}>\n                      <EmbedHighlight classes={classes} >\n\n                        <FormControl className={classes.formControl}>\n                          <InputLabel id=\"demo-simple-select-label\"\n                          >Change font</InputLabel>\n                          <Select\n                            labelId=\"demo-simple-select-label\"\n                            id=\"demo-simple-select\"\n                            value={fontThemeSelectValue}\n                            onChange={(event) => {\n                              handleThemeChange(null, event.target.value)\n                            }}\n                          >\n                            <MenuItem value=\"arial\">Arial</MenuItem>\n                            <MenuItem value=\"roboto\">Roboto</MenuItem>\n                            <MenuItem value=\"vollkorn\">Vollkorn</MenuItem>\n                          </Select>\n                        </FormControl>\n\n                      </EmbedHighlight>\n                    </Grid>\n                  </>\n                  : ''\n                }\n              </>\n              : ''\n          }\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}","export default \"import $ from 'jquery';\\nimport _ from 'lodash'\\nimport React, { useState, useEffect, useContext } from 'react';\\nimport {\\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField, FormControlLabel, Chip,\\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Slider, FormControl, InputLabel, Select, MenuItem, Switch\\n} from '@material-ui/core'\\nimport { Autocomplete, ToggleButton, ToggleButtonGroup, Skeleton } from '@material-ui/lab'\\nimport {\\n  ExpandMore, FilterList, SentimentDissatisfied, SentimentSatisfied, SentimentVerySatisfied,\\n} from '@material-ui/icons';\\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\\n\\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\\nimport CodeFlyout from '../CodeFlyout';\\nimport rawSampleCode from '!!raw-loader!./Dashboard.js'; // eslint-disable-line import/no-webpack-loader-syntax\\nimport useStyles from './styles.js';\\nimport { TabPanel, a11yProps } from './helpers.js';\\nimport BottomBar from '../../Material/BottomBar.js'\\nimport { ApiHighlight, EmbedHighlight, EmbedMethodHighlight } from '../../Highlights/Highlight';\\nimport { NumberToColoredPercent } from '../../Accessories/NumberToColoredPercent';\\nimport AppContext from '../../../AppContext';\\n//new\\nimport Usa from \\\"@svg-maps/usa\\\";\\nimport { CheckboxSVGMap } from \\\"./CheckboxSvgMapRegion\\\";\\n\\nconst { validIdHelper } = require('../../../tools');\\n\\nexport default function Dashboard(props) {\\n  // console.log('Dashboard')\\n  // console.log('props', props)\\n\\n  const { staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\\n  const demoComponentType = type || 'code flyout';\\n  const topBarBottomBarHeight = 112;\\n\\n  const [value, setValue] = useState(0);\\n  const [iFrameExists, setIFrame] = useState(0);\\n  const [apiContent, setApiContent] = useState(undefined);\\n  const [dashboardObj, setDashboardObj] = useState({});\\n  const [clientSideCode, setClientSideCode] = useState('');\\n  const [dashboardOptions, setDashboardOptions] = useState({});\\n  const [regionValue, setRegionValue] = useState('Pacific,South,Mountain,Midwest,Northeast');\\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\\n  const [tileToggleValue, setTileToggleValue] = useState('');\\n  const [visColorToggleValue, setVisColorToggleValue] = useState('#2d4266');\\n  const [lightThemeToggleValue, setLightThemeToggleValue] = useState(true);\\n  const [fontThemeSelectValue, setFontThemeSelectValue] = useState(\\\"arial\\\");\\n  const [expansionPanelHeight, setExpansionPanelHeight] = useState(0);\\n  const { togglePayWallModal, show, codeShow, sdk, atomTheme, corsApiCall } = useContext(AppContext)\\n\\n  const isThemeableDashboard = validIdHelper(`${demoComponentType}${lookerContent[0].id}`) === 'customfilter1';\\n  const darkThemeBackgroundColor = \\\"#343D4E\\\";\\n\\n  const classes = useStyles();\\n\\n  //condtional theming for dark mode :D\\n  let paletteToUse = !lightThemeToggleValue ?\\n    {\\n      palette: {\\n        type: 'dark',\\n        background: { paper: darkThemeBackgroundColor, default: darkThemeBackgroundColor },\\n      }\\n    }\\n    :\\n    { palette: { ...atomTheme.palette } }\\n\\n  const theme = React.useMemo(\\n    () =>\\n      createMuiTheme(\\n        paletteToUse\\n      ),\\n    [lightThemeToggleValue],\\n  );\\n\\n  //handle tab change\\n  const handleChange = (event, newValue) => {\\n    handleTabChange(0);\\n    setValue(newValue);\\n  };\\n\\n  const handleTileToggle = (event, newValue) => {\\n    setTileToggleValue(newValue)\\n    const filteredLayout = _.filter(dashboardOptions.layouts[0].dashboard_layout_components, (row) => {\\n      return (lookerContent[0].dynamicFieldLookUp[newValue].indexOf(dashboardOptions.elements[row.dashboard_element_id].title) > -1)\\n    })\\n\\n    const newDashboardLayout = {\\n      ...dashboardOptions.layouts[0],\\n      dashboard_layout_components: filteredLayout\\n    }\\n    dashboardObj.setOptions({ \\\"layouts\\\": [newDashboardLayout] })\\n  };\\n\\n  const handleVisColorToggle = (event, newValue) => {\\n    let newColorSeries = lookerContent[0].dynamicVisConfig.colors[newValue];\\n    let newDashboardElements = { ...dashboardOptions.elements };\\n    Object.keys(newDashboardElements).map(key => {\\n      if (newDashboardElements[key].vis_config.series_colors) {\\n        Object.keys(newDashboardElements[key].vis_config.series_colors).map((innerKey, index) => {\\n          newDashboardElements[key].vis_config.series_colors[innerKey] = newColorSeries[index] || newColorSeries[0];\\n        })\\n      }\\n\\n      if (newDashboardElements[key].vis_config.custom_color) {\\n        newDashboardElements[key].vis_config.custom_color = newColorSeries[0]\\n      }\\n\\n      if (newDashboardElements[key].vis_config.map_value_colors) {\\n        newDashboardElements[key].vis_config.map_value_colors.map((item, index) => {\\n          newDashboardElements[key].vis_config.map_value_colors[index] = newColorSeries[index] || newColorSeries[0];\\n        })\\n      }\\n\\n      // loss some fidelity here\\n      if (newDashboardElements[key].vis_config.series_cell_visualizations) {\\n        Object.keys(newDashboardElements[key].vis_config.series_cell_visualizations).map((innerKey, index) => {\\n          if (newDashboardElements[key].vis_config.series_cell_visualizations[innerKey].hasOwnProperty(\\\"palette\\\")) {\\n            newDashboardElements[key].vis_config.series_cell_visualizations[innerKey][\\\"palette\\\"] = { ...lookerContent[0].dynamicVisConfig.series_cell_visualizations[newValue] }\\n          }\\n        })\\n      }\\n\\n\\n    })\\n    setVisColorToggleValue(newValue)\\n    dashboardObj.setOptions({ \\\"elements\\\": { ...newDashboardElements } })\\n  };\\n\\n  const handleThemeChange = (event, newValue) => {\\n    let themeName = '';\\n    if (typeof newValue === \\\"boolean\\\") {//handleModeToggle\\n      setLightThemeToggleValue(newValue)\\n      themeName = newValue ? `light_${fontThemeSelectValue}` : `dark_${fontThemeSelectValue}`\\n    } else { //handleFontToggle\\n      themeName = lightThemeToggleValue ? `light_${newValue}` : `dark_${newValue}`\\n      setFontThemeSelectValue(newValue)\\n    }\\n    corsApiCall(performLookerApiCalls, [lookerContent, themeName])\\n  }\\n\\n  useEffect(() => {\\n    let themeName = lightThemeToggleValue ? 'light' : 'dark';\\n    themeName += `_${fontThemeSelectValue}`;\\n    corsApiCall(performLookerApiCalls, [[...lookerContent], themeName])\\n    setClientSideCode(rawSampleCode)\\n  }, [lookerContent, lookerUser]);\\n\\n\\n  useEffect(() => {\\n    if (Object.keys(dashboardOptions).length && Object.keys(dashboardObj).length && lookerContent[0].dynamicFieldLookUp) {\\n      handleTileToggle(null, tileToggleValue ? tileToggleValue : Object.keys(lookerContent[0].dynamicFieldLookUp)[0])\\n      handleVisColorToggle(null, visColorToggleValue ? visColorToggleValue : '#2d4266')\\n    }\\n  }, [dashboardOptions]);\\n\\n  useEffect(() => {\\n    window.addEventListener(\\\"resize\\\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\\n    setExpansionPanelHeight($('.MuiExpansionPanel-root:visible').innerHeight() || 0)\\n  })\\n\\n  const performLookerApiCalls = function (lookerContent, dynamicTheme) {\\n    // console.log('performLookerApiCalls')   \\n    // console.log({ lookerContent })   \\n    // console.log({ dynamicTheme })\\n\\n    setIFrame(0)\\n    $(`.embedContainer.${validIdHelper(demoComponentType)}:visible`).html('')\\n    lookerContent.map(async lookerContent => {\\n      //dashboard creation\\n      let dashboardId = lookerContent.id;\\n      let themeToUse = dynamicTheme && isThemeableDashboard ?\\n        dynamicTheme :\\n        lookerContent.theme ?\\n          lookerContent.theme :\\n          'atom_fashion';\\n      // console.log('themeToUse', themeToUse)\\n\\n      LookerEmbedSDK.createDashboardWithId(dashboardId) //dashboardSlug\\n        .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${dashboardId}`))\\n        .withClassName('iframe')\\n        .withNext()\\n        // .withNext(lookerContent.isNext || false) //how can I make this dynamic based on prop??\\n        .withTheme(themeToUse)\\n        .withParams({ 'schedule_modal': 'true' })\\n        .on('page:property:change', (event) => {\\n          // console.log('page property is changing!!!!')\\n          changeHeight(event)\\n        }) // dashboards-next\\n        .on('dashboard:loaded', (event) => {\\n          setDashboardOptions(event.dashboard.options)\\n        })\\n        // .on('drillmenu:click', (event) => {\\n        //   drillMenuClick(event)\\n        // })\\n        .build()\\n        .connect()\\n        .then((dashboard) => {\\n          setIFrame(1)\\n          setDashboardObj(dashboard)\\n          LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\\n\\n        })\\n        .catch((error) => {\\n          // console.error('Connection error', error)\\n        })\\n      //additional api calls\\n      //only want to perform when there's not apiContent\\n      if (lookerContent.hasOwnProperty('filters') && !apiContent) {\\n        // setApiContent(undefined)\\n        //get inline query from usecase file & set user attribute dynamically\\n        //iterating over filters\\n        let orderedArrayForApiContent = []\\n        lookerContent.filters.map(async (item, index) => {\\n          let jsonQuery = lookerContent.inlineQueries[index];\\n          jsonQuery.filters = {\\n            ...jsonQuery.filters,\\n            [item.desiredFilterName]: lookerUser.user_attributes.brand\\n          };\\n\\n          let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: jsonQuery }));\\n          let queryResultsForDropdown = [];\\n          let desiredProperty = Object.keys(lookerResponseData[0])[0];\\n\\n          for (let i = 0; i < lookerResponseData.length; i++) {\\n            queryResultsForDropdown.push({\\n              'label': lookerResponseData[i][desiredProperty],\\n              'trend': (lookerResponseData[i]['trend']) ? lookerResponseData[i]['trend'] : undefined\\n            })\\n          }\\n\\n          orderedArrayForApiContent[index] = queryResultsForDropdown\\n          setApiContent([...orderedArrayForApiContent])\\n        })\\n      }\\n\\n    })\\n  }\\n\\n  const customFilterAction = (dashboardId, filterName, newFilterValue) => {\\n    if (Object.keys(dashboardObj).length) {\\n      dashboardObj.updateFilters({ [filterName]: newFilterValue })\\n      dashboardObj.run()\\n    }\\n  }\\n\\n  // const drillMenuClick = (event) => {\\n  //   const basicLookerUser = lookerUser.user_attributes.permission_level === 'basic' ? true : false;\\n  //   if (basicLookerUser) {\\n  //     togglePayWallModal()\\n  //     return { cancel: (basicLookerUser) ? true : false }\\n  //   }\\n  // }\\n\\n  const changeHeight = (event) => {\\n    // console.log('changeHeight')\\n    // console.log('event', event)\\n  }\\n\\n\\n  return (\\n    <div className={`${classes.root} demoComponent`}\\n      style={{ height }}\\n    >\\n      <ThemeProvider theme={theme}>\\n        <Card elevation={1} className={`${classes.padding30} ${classes.height100Percent}`}>\\n          <Grid container>\\n            <div\\n              className={`${classes.root}`}\\n            >\\n              {lookerContent[0].hasOwnProperty(\\\"filters\\\") &&\\n                apiContent &&\\n                apiContent.length === lookerContent[0].filters.length ?\\n                <Grid item\\n                  sm={12}\\n                  key={validIdHelper(`${demoComponentType}-FilterBar-${lookerContent[0].id}`)}>\\n                  <FilterBar {...props}\\n                    classes={classes}\\n                    apiContent={apiContent}\\n                    customFilterAction={customFilterAction}\\n                    regionValue={regionValue}\\n                    setRegionValue={setRegionValue}\\n                    tileToggleValue={tileToggleValue}\\n                    handleTileToggle={handleTileToggle}\\n                    visColorToggleValue={visColorToggleValue}\\n                    handleVisColorToggle={handleVisColorToggle}\\n                    lightThemeToggleValue={lightThemeToggleValue}\\n                    fontThemeSelectValue={fontThemeSelectValue}\\n                    handleThemeChange={handleThemeChange}\\n                    isThemeableDashboard={isThemeableDashboard}\\n                  />\\n                </Grid> :\\n                lookerContent[0].hasOwnProperty(\\\"filters\\\") ?\\n                  <Skeleton variant=\\\"rect\\\" animation=\\\"wave\\\" className={classes.skeleton} /> :\\n                  ''}\\n              {\\n                iFrameExists\\n                  ? ''\\n                  :\\n                  <Grid item sm={12} style={{ height: height - 30 - expansionPanelHeight }}>\\n                    <Card className={`${classes.card} ${classes.flexCentered}`}\\n                      elevation={0}\\n                      mt={2}\\n                      style={{ height: height - 30 - expansionPanelHeight }}>\\n                      <CircularProgress className={classes.circularProgress} />\\n                    </Card>\\n                  </Grid>\\n              }\\n              <Box\\n                className={iFrameExists ? ` ` : `${classes.hidden} `}\\n                style={{ height: height - 30 - expansionPanelHeight }}>\\n                <Grid container\\n                  spacing={3}\\n                  className={`${classes.noContainerScroll}`}>\\n                  {codeShow ?\\n                    <Grid item sm={6}\\n                      className={`${classes.positionFixedTopRight}`}\\n                    >\\n                      <CodeFlyout {...props}\\n                        classes={classes}\\n                        lookerUser={lookerUser}\\n                        height={height}\\n                      />\\n                    </Grid>\\n                    : ''}\\n                  <Grid item sm={12}>\\n                    <Box className={`${classes.w100} ${classes.padding10}`} mt={lookerContent[0].filter || lookerContent[0].dynamicFieldLookUp ? 2 : 0}>\\n                      <EmbedHighlight classes={classes}>\\n                        <div\\n                          className={`embedContainer ${validIdHelper(demoComponentType)}`}\\n                          id={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\\n                          key={validIdHelper(`embedContainer-${demoComponentType}-${lookerContent[0].id}`)}\\n                        >\\n                        </div>\\n                      </EmbedHighlight>\\n                    </Box>\\n                  </Grid>\\n                </Grid>\\n              </Box>\\n            </div>\\n          </Grid>\\n        </Card>\\n      </ThemeProvider>\\n    </ div>\\n  )\\n}\\n\\n\\nfunction FilterBar(props) {\\n  // console.log('FilterBar')\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\\n    apiContent, customFilterAction, regionValue, setRegionValue, tileToggleValue, handleTileToggle, //changeTheme,\\n    visColorToggleValue, handleVisColorToggle, lightThemeToggleValue, fontThemeSelectValue, handleThemeChange, isThemeableDashboard\\n  } = props;\\n\\n  const [expanded, setExpanded] = useState(true);\\n  const [sliderValue, setSliderValue] = React.useState([]);\\n  const [lifetimeRevenueTierValue, setLifetimeRevenueTierValue] = useState('0-24');\\n  // const [speedDialOpen, setSpeedDialOpen] = React.useState(false);\\n\\n  const handleExpansionPanel = (event, newValue) => {\\n    setExpanded(expanded ? false : true);\\n  };\\n\\n  const customUsa = {\\n    ...Usa,\\n    label: \\\"Custom map label\\\",\\n    locations: Usa.locations.map(location => {\\n      // Modify each location\\n      switch (location.name) {\\n        //9\\n        case \\\"Connecticut\\\":\\n        case \\\"Maine\\\":\\n        case \\\"Massachusetts\\\":\\n        case \\\"New Hampshire\\\":\\n        case \\\"Rhode Island\\\":\\n        case \\\"Vermont\\\":\\n        case \\\"New Jersey\\\":\\n        case \\\"New York\\\":\\n        case \\\"Pennsylvania\\\":\\n        case \\\"Delaware\\\":\\n          return { ...location, region: \\\"Northeast\\\" }\\n        //12\\n        case \\\"Illinois\\\":\\n        case \\\"Indiana\\\":\\n        case \\\"Michigan\\\":\\n        case \\\"Ohio\\\":\\n        case \\\"Wisconsin\\\":\\n        case \\\"Iowa\\\":\\n        case \\\"Kansas\\\":\\n        case \\\"Minnesota\\\":\\n        case \\\"Missouri\\\":\\n        case \\\"Nebraska\\\":\\n        case \\\"North Dakota\\\":\\n        case \\\"South Dakota\\\":\\n          return { ...location, region: \\\"Midwest\\\" }\\n        //16\\n        case \\\"Florida\\\":\\n        case \\\"Georgia\\\":\\n        case \\\"Maryland\\\":\\n        case \\\"North Carolina\\\":\\n        case \\\"South Carolina\\\":\\n        case \\\"Virginia\\\":\\n        case \\\"District of Columbia\\\":\\n        case \\\"Washington, DC\\\":\\n        case \\\"West Virginia\\\":\\n        case \\\"Alabama\\\":\\n        case \\\"Kentucky\\\":\\n        case \\\"Mississippi\\\":\\n        case \\\"Tennessee\\\":\\n        case \\\"Arkansas\\\":\\n        case \\\"Louisiana\\\":\\n        case \\\"Oklahoma\\\":\\n        case \\\"Texas\\\":\\n          return { ...location, region: \\\"South\\\" }\\n        //8\\n        case \\\"Arizona\\\":\\n        case \\\"Colorado\\\":\\n        case \\\"Idaho\\\":\\n        case \\\"Montana\\\":\\n        case \\\"Nevada\\\":\\n        case \\\"New Mexico\\\":\\n        case \\\"Utah\\\":\\n        case \\\"Wyoming\\\":\\n          return { ...location, region: \\\"Mountain\\\" }\\n        //5\\n        case \\\"Alaska\\\":\\n        case \\\"California\\\":\\n        case \\\"Hawaii\\\":\\n        case \\\"Oregon\\\":\\n        case \\\"Washington\\\":\\n          return { ...location, region: \\\"Pacific\\\" }\\n        // default:\\n        //   return location\\n      }\\n    })\\n  };\\n\\n  const handleSliderChange = (event, newValue) => {\\n    setSliderValue(newValue);\\n  };\\n\\n  const lifetimeRevenueTierMap = {\\n    \\\"0 to 99\\\": \\\"low\\\",\\n    \\\"100 to 499\\\": \\\"medium\\\",\\n    \\\"500 or Above\\\": \\\"high\\\",\\n  }\\n  const lifetimeRevenueTierIconMap = {\\n    \\\"0 to 99\\\": SentimentDissatisfied,\\n    \\\"100 to 499\\\": SentimentSatisfied,\\n    \\\"500 or Above\\\": SentimentVerySatisfied,\\n  }\\n\\n  return (\\n\\n    <ExpansionPanel\\n      expanded={expanded}\\n      onChange={handleExpansionPanel}\\n      // className={classes.w100}\\n      className={`${classes.w100} MuiExpansionPanel-root`}\\n      elevation={0}\\n    >\\n      <ExpansionPanelSummary\\n        expandIcon={<ExpandMore />}\\n        aria-controls=\\\"panel1a-content\\\"\\n        id=\\\"panel1a-header\\\"\\n      >\\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\\n\\n      </ExpansionPanelSummary>\\n      <ExpansionPanelDetails>\\n        <Grid\\n          container spacing={3}>\\n          {\\n            lookerContent[0].filters || lookerContent[0].dynamicFieldLookUp ?\\n              <>\\n                {apiContent.map((item, index) => {\\n                  return (\\n                    lookerContent[0].filterComponents[index] === 'autocomplete' ?\\n                      <Grid item sm={3}>\\n\\n                        <ApiHighlight classes={classes}\\n                          key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\\n\\n                          <Typography\\n                          >Filter By Product:</Typography>\\n                          <Autocomplete\\n                            id={`combo-box-dashboard-${lookerContent.id}`}\\n                            options={Array.isArray(apiContent[index]) ?\\n                              apiContent[index] :\\n                              []}\\n                            renderOption={(option) => (\\n                              <Grid container justify=\\\"space-between\\\">\\n                                <Grid item >\\n                                  {option.label}\\n                                </Grid>\\n                                {option.trend && <Grid item>\\n                                  <NumberToColoredPercent\\n                                    val={option.trend}\\n                                    positive_good={true}\\n                                    abs_val={Math.abs(option.trend)}\\n                                  />\\n                                </Grid>}\\n                              </Grid>\\n                            )}\\n                            getOptionLabel={(option) => option.label}\\n                            onChange={(event, newValue) => {\\n                              customFilterAction(lookerContent[0].id,\\n                                lookerContent[0].filters[index].filterName,\\n                                (newValue) ? newValue.label : '')\\n                            }}\\n                            renderInput={(params) => <TextField {...params}\\n                              label={lookerContent[0].filters[index].filterName}\\n                              variant=\\\"outlined\\\"\\n                            />}\\n                            loadingText=\\\"Loading...\\\"\\n                          />\\n                        </ApiHighlight>\\n                      </Grid>\\n                      : lookerContent[0].filterComponents[index] === 'mapfilter' ?\\n                        <>\\n                          <Grid item sm={4} >\\n                            <EmbedMethodHighlight classes={classes}\\n                              key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\\n                              <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\\n                              >Region(s): <b>{regionValue ? regionValue : \\\"Outside US\\\"}</b></Typography>\\n\\n                              <CheckboxSVGMap map={customUsa}\\n                                onChange={(locations) => {\\n\\n                                  let allUniqueRegionsFromSelectedLocations = [];\\n                                  for (let j = 0; j < locations.length; j++) {\\n                                    if (allUniqueRegionsFromSelectedLocations.indexOf(locations[j].region) == -1) {\\n                                      allUniqueRegionsFromSelectedLocations.push(locations[j].region)\\n                                    }\\n                                  }\\n                                  let allUniqueRegionsFromSelectedLocationsCommaSep = allUniqueRegionsFromSelectedLocations.join(\\\",\\\")\\n                                  setRegionValue(allUniqueRegionsFromSelectedLocationsCommaSep)\\n                                  customFilterAction(lookerContent[0].id,\\n                                    lookerContent[0].filters[index].filterName,\\n                                    (regionValue) ? regionValue : '')\\n                                }}\\n                              />\\n                            </EmbedMethodHighlight>\\n                          </Grid>\\n                        </>\\n                        : lookerContent[0].filterComponents[index] === \\\"rangeslider\\\"\\n                          ?\\n\\n                          <Grid container item sm={4} >\\n                            <Grid item sm={12}>\\n                              <EmbedMethodHighlight classes={classes}\\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\\n                                >Age Range:</Typography>\\n                                <Slider\\n                                  value={sliderValue.length ? sliderValue : Array.isArray(apiContent[index]) ? [apiContent[index][0].label, apiContent[index][apiContent[index].length - 1].label] : []}\\n                                  onChange={handleSliderChange}\\n                                  onChange={(event, newValue) => {\\n                                    setSliderValue(newValue);\\n                                  }}\\n                                  valueLabelDisplay=\\\"auto\\\"\\n                                  aria-labelledby=\\\"range-slider\\\"\\n                                  onChangeCommitted={(event, newValue) => {\\n                                    customFilterAction(lookerContent[0].id,\\n                                      lookerContent[0].filters[index].filterName,\\n                                      (newValue) ? `[${newValue}]` : '[]')\\n                                  }}\\n                                  min={Array.isArray(apiContent[index]) ? apiContent[index][0].label : ''}\\n                                  max={Array.isArray(apiContent[index]) ? apiContent[index][apiContent[index].length - 1].label : ''}\\n                                  name=\\\"Age Range\\\"\\n                                  marks={Array.isArray(apiContent[index]) ? [{ value: apiContent[index][0].label, label: apiContent[index][0].label }, { value: apiContent[index][apiContent[index].length - 1].label, label: apiContent[index][apiContent[index].length - 1].label }] : ''}\\n                                  disabled={Array.isArray(apiContent[index]) ? false : true}\\n                                />\\n                              </EmbedMethodHighlight>\\n                            </Grid>\\n                            <Grid item sm={12}>\\n                              <EmbedMethodHighlight classes={classes}\\n                                key={validIdHelper(`dashEmbed-${type}${lookerContent.id}-${index}`)} >\\n                                <Typography className={`${classes.heading} ${classes.ml12}  ${classes.verticalAlignTop}`}\\n                                >Lifetime Revenue Tier:</Typography>\\n                                <ToggleButtonGroup\\n                                  value={lifetimeRevenueTierValue}\\n                                  exclusive //for now\\n                                  onChange={(event, newValue) => {\\n                                    setLifetimeRevenueTierValue(newValue)\\n                                    customFilterAction(lookerContent[0].id,\\n                                      lookerContent[0].filters[index + 1].filterName,\\n                                      (newValue) ? newValue : '')\\n                                  }}\\n                                  aria-label=\\\"ageTier\\\"\\n                                  className={classes.w100}>\\n                                  >\\n                                {apiContent[index + 1].map((ageTier, index) => {\\n                                    if (ageTier.label !== \\\"Undefined\\\") {\\n                                      const Icon = lifetimeRevenueTierIconMap[ageTier.label];\\n                                      return (\\n                                        <ToggleButton\\n                                          key={validIdHelper(`${type}-FilterBar-ToggleButton-${lookerContent[0].id}-${index}`)}\\n                                          value={ageTier.label}\\n                                          aria-label={ageTier.label}\\n                                          className={classes.w33}>\\n                                          <Icon className={classes.mr12} />\\n                                          {_.capitalize(lifetimeRevenueTierMap[ageTier.label]) || ageTier.label}\\n                                        </ToggleButton>\\n                                      )\\n                                    }\\n                                  })}\\n                                </ToggleButtonGroup>\\n\\n                              </EmbedMethodHighlight>\\n                            </Grid>\\n                          </Grid>\\n                          :\\n                          '')\\n                })}\\n                {lookerContent[0].dynamicFieldLookUp ?\\n                  <>\\n                    <Grid item sm={3}>\\n                      <EmbedMethodHighlight classes={classes} >\\n                        <Typography\\n                        >Dynamic Tiles:</Typography>\\n                        <ToggleButtonGroup\\n                          value={tileToggleValue}\\n                          exclusive\\n                          onChange={handleTileToggle}\\n                          aria-label=\\\"text alignment\\\"\\n                        >\\n                          {Object.keys(lookerContent[0].dynamicFieldLookUp).map(key => {\\n                            return (\\n                              <ToggleButton\\n                                key={validIdHelper(`dynamicDashTileToggle-${key}`)}\\n                                value={key} aria-label=\\\"left aligned\\\">\\n                                {key}\\n                              </ToggleButton>\\n                            )\\n                          })}\\n                        </ToggleButtonGroup>\\n                      </EmbedMethodHighlight>\\n                    </Grid>\\n                  </>\\n                  : ''\\n                }\\n                {lookerContent[0].dynamicVisConfig ?\\n                  <>\\n                    <Grid item sm={2}>\\n                      <EmbedMethodHighlight classes={classes} >\\n                        <Typography\\n                        >Dynamic Vis Color:</Typography>\\n                        <ToggleButtonGroup\\n                          value={visColorToggleValue}\\n                          exclusive\\n                          onChange={handleVisColorToggle}\\n                          aria-label=\\\"text alignment\\\"\\n                        >\\n                          {Object.keys(lookerContent[0].dynamicVisConfig.colors).map(key => {\\n                            return (\\n                              <ToggleButton\\n                                key={validIdHelper(`dynamicDashVisConfigToggle-${key}`)}\\n                                value={key} aria-label=\\\"left aligned\\\">\\n                                <span className={`${classes.dot}`} style={{\\n                                  backgroundColor: (lookerContent[0].dynamicVisConfig.colors[key][lookerContent[0].dynamicVisConfig.colors[key].length - 1]\\n                                    || key)\\n                                }}></span>\\n                              </ToggleButton>\\n                            )\\n                          })}\\n                        </ToggleButtonGroup>\\n\\n                      </EmbedMethodHighlight>\\n                    </Grid>\\n                  </>\\n                  : ''\\n                }\\n                {lookerContent[0].dynamicThemeMode ?\\n                  <>\\n                    <Grid item sm={1}>\\n                      <EmbedHighlight classes={classes} >\\n                        <Typography\\n                        >{lightThemeToggleValue ? \\\"Light mode\\\" : \\\"Dark mode\\\"}</Typography>\\n\\n                        <Switch\\n                          checked={!lightThemeToggleValue}\\n                          onChange={() => handleThemeChange(null, !lightThemeToggleValue)}\\n                          color=\\\"primary\\\"\\n                          name=\\\"light theme toggle\\\"\\n                          inputProps={{ 'aria-label': 'primary checkbox' }}\\n                        />\\n\\n                      </EmbedHighlight>\\n                    </Grid>\\n                  </>\\n                  : ''\\n                }\\n                {lookerContent[0].dynamicThemeFont ?\\n                  <>\\n                    <Grid item sm={2}>\\n                      <EmbedHighlight classes={classes} >\\n\\n                        <FormControl className={classes.formControl}>\\n                          <InputLabel id=\\\"demo-simple-select-label\\\"\\n                          >Change font</InputLabel>\\n                          <Select\\n                            labelId=\\\"demo-simple-select-label\\\"\\n                            id=\\\"demo-simple-select\\\"\\n                            value={fontThemeSelectValue}\\n                            onChange={(event) => {\\n                              handleThemeChange(null, event.target.value)\\n                            }}\\n                          >\\n                            <MenuItem value=\\\"arial\\\">Arial</MenuItem>\\n                            <MenuItem value=\\\"roboto\\\">Roboto</MenuItem>\\n                            <MenuItem value=\\\"vollkorn\\\">Vollkorn</MenuItem>\\n                          </Select>\\n                        </FormControl>\\n\\n                      </EmbedHighlight>\\n                    </Grid>\\n                  </>\\n                  : ''\\n                }\\n              </>\\n              : ''\\n          }\\n        </Grid>\\n      </ExpansionPanelDetails>\\n    </ExpansionPanel >\\n  )\\n}\";","import React, { useState, useEffect } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Modal from '@material-ui/core/Modal';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Card from '@material-ui/core/Card';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nconst { validIdHelper, prettifyString } = require('../../tools');\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 800,\n    maxHeight: 450,\n    overflow: 'scroll',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  table: {\n    maxHeight: 310\n  },\n  card: {\n    minWidth: 275,\n    minHeight: '10rem',\n    boxShadow: 'none'\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n}));\n\nfunction rand() {\n  return Math.round(Math.random() * 20) - 10;\n}\nfunction getModalStyle() {\n  const top = 10 //+ rand();\n  const left = 50 //+ rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${left}%, -${top}%)`,\n  };\n}\n\nexport default function ModalTable(props) {\n  // console.log('ModalTable')\n  // console.log('props', props)\n\n  const classes = useStyles();\n  const { open, onClose, modalContent } = props;\n  const [modalStyle] = React.useState(getModalStyle);\n\n\n  return (\n    <Modal\n      open={open}\n      onClose={onClose}\n      aria-labelledby=\"simple-modal-title\"\n      aria-describedby=\"simple-modal-description\"\n    >\n\n      <div style={modalStyle} className={classes.paper}>\n        <h2 id=\"simple-modal-title\">{modalContent.title}</h2>\n        {modalContent.body ?\n          <TableContainer component={Paper} className={classes.table}>\n            <Table stickyHeader className={classes.table} size=\"small\" aria-label=\"a dense table\">\n              <TableHead>\n                <TableRow>\n                  {Object.keys(modalContent.body[0]).map((key, index) => (\n                    <TableCell align=\"right\"\n                      key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n                      id={validIdHelper(key + '-TableHead-TableCell-' + index)}>\n                      {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}</TableCell>\n\n\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {modalContent.body.map((item, index) => (\n\n                  <TableRow\n                    key={validIdHelper('TableRow-' + index)}\n                    id={validIdHelper('TableRow-' + index)} >\n                    {\n                      Object.keys(item).map(key => (\n                        <TableCell align=\"right\"\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}>\n                          {\n                            modalContent.body[index][key] ?\n                              modalContent.body[index][key].rendered ?\n                                modalContent.body[index][key].rendered :\n                                modalContent.body[index][key].value ?\n                                  modalContent.body[index][key].value :\n                                  typeof modalContent.body[index][key] === 'number' ?\n                                    (Math.round(modalContent.body[index][key] * 100) / 100)//.toLocaleString()\n                                    :\n                                    modalContent.body[index][key] //.toLocaleString() \n                              :\n                              ''\n                          }\n                        </TableCell>\n                      ))\n                    }\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </TableContainer >\n          :\n\n          <Card className={`${classes.card} ${classes.flexCentered}`}>\n            <CircularProgress className={classes.circularProgress} />\n          </Card>}\n\n      </div >\n    </Modal >\n  )\n}","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    overflow: 'scroll',\n    borderRadius: '8px'\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    // position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  card: {\n    minWidth: 275,\n    minHeight: 400\n  },\n  height500: {\n    height: 500\n  },\n  height600: {\n    height: 600\n  },\n  height700: {\n    height: 700\n  },\n  height800: {\n    height: 800\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    width: 200,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  skeleton: {\n    height: 160,\n    width: '100%'\n  },\n  padding30: {\n    padding: 30\n  },\n  positionTopRight: {\n    position: 'absolute',\n    top: -30,\n    right: -50,\n    bottom: 0,\n    zIndex: 100\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  padding10: {\n    padding: 10\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  }\n}));","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Divider, InputLabel, MenuItem,\n  FormControl, Select, Modal\n} from '@material-ui/core'\nimport { Skeleton } from '@material-ui/lab';\nimport { ExpandMore, FilterList } from '@material-ui/icons';\nimport ModalTable from '../../Material/ModalTable';\nimport { ResponsiveCalendar } from '@nivo/calendar'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./CustomVis.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\n//new date pickers\nimport { format, endOfDay, addDays } from 'date-fns';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\nimport AppContext from '../../../AppContext';\nconst { validIdHelper } = require('../../../tools');\n\nexport default function CustomVis(props) {\n  // console.log('CustomVis')\n  const topBarBottomBarHeight = 112;\n  const [value, setValue] = useState(0);\n  const [fromDate, setFromDate] = useState('');\n  const [toDate, setToDate] = useState('');\n  const [category, setCategory] = useState('All')\n  const [desiredField, setDesiredField] = useState('')\n  const [apiContent, setApiContent] = useState(undefined);\n  const [open, setOpen] = React.useState(false);\n  const [modalContent, setModalContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  // const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n\n  //declare constants\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n\n  //handle opening of modal for advanced and premium users\n  const handleModalOpen = async ({ day }) => {\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\n    originalInlineQueryCopy.filters = {\n      ...originalInlineQueryCopy.filters,\n      [originalInlineQueryCopy.fields[0]]: day,\n      [originalInlineQueryCopy.fields[1]]: category === \"All\" ? '' : category\n    }\n    originalInlineQueryCopy.total = true;\n    originalInlineQueryCopy.limit = \"25\";\n\n    setOpen(true);\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\n    let modalObj = {\n      \"title\": `Detail View for ${day}`,\n      \"body\": lookerResponseData\n    }\n    setModalContent(modalObj);\n  };\n\n  //handle modal close\n  const handleModalClose = () => {\n    setModalContent({})\n    setOpen(false);\n  };\n\n  //handle tab change\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  const handleFromDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setFromDate(newValueAsDate);\n    }\n  }\n  const handleToDate = newValue => {\n    let validDate = Date.parse(newValue);\n    if (validDate > 0) {\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\n      setToDate(newValueAsDate);\n    }\n  }\n\n  const handleCategory = newValue => {\n    setCategory(newValue)\n  }\n\n  const handleDesiredField = newValue => {\n    setDesiredField(newValue)\n  }\n\n  //format response from initial api call based on LookerContent array\n  //to match format required by Nivo Calendar component\n  let filterData = [];\n  if (apiContent) {\n    //filtering for fromDate, toDate and category\n    filterData = _.filter(apiContent, (row) => {\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\n        && row[apiContent.inlineQuery.fields[0]] < toDate\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\n      )\n    })\n    //converting filterDAta to desired format for vis\n    filterData = filterData.map(item => {\n      return {\n        'day': item[apiContent.inlineQuery.fields[0]],\n        'category': item[apiContent.inlineQuery.fields[1]],\n        'value': item[desiredField]\n      }\n    })\n\n    //special exception for category all\n    //need to reduce array by day across categories\n    //destructuing in reduce of value would not work for dynamic var\n    if (category === 'All') {\n      //create array of all unique dates\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\n      let filteredAndReducedForAll = []\n      //iterate over unique date\n      uniqueDates.map(uniqueDate => {\n        //filter filterData for current unique date\n        let value = _.filter(filterData, row => {\n          return row.day === uniqueDate\n        }).reduce((acc, { value }) => acc + value, 0)\n        let thisObj = {\n          day: uniqueDate,\n          value: value,\n          category: 'All'\n        }\n        filteredAndReducedForAll.push(thisObj)\n\n      })\n      filterData = filteredAndReducedForAll;\n    }\n  }\n\n  useEffect(() => {\n    if (lookerContent.length) {\n      corsApiCall(performLookerApiCalls, [lookerContent])\n      setDesiredField(lookerContent[0].desiredFields[0])\n      setClientSideCode(rawSampleCode)\n    }\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  })\n\n  const performLookerApiCalls = function (lookerContent) {\n    // console.log('performLookerApiCalls')\n    // console.log({ lookerContent })\n\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\n    lookerContent.map(async lookerContent => {\n      let { inlineQuery } = lookerContent;\n      inlineQuery.filters = {\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\n      };\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\n\n      // console.log('lookerResponseData', lookerResponseData)\n      lookerResponseData = lookerResponseData.filter(item => {\n        return item[inlineQuery.fields[0]]\n      })\n      let uniqueCategories = ['All'];\n      for (let i = 0; i < lookerResponseData.length; i++) {\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\n        }\n      }\n      lookerResponseData.inlineQuery = inlineQuery;\n      lookerResponseData.uniqueCategories = uniqueCategories;\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\n      setApiContent(lookerResponseData)\n    })\n  }\n\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root} `}>\n\n            {!apiContent ?\n              <Skeleton variant=\"rect\" animation=\"wave\" className={classes.skeleton} />\n              :\n              <FilterBar {...props}\n                classes={classes}\n                apiContent={apiContent}\n                fromDate={fromDate}\n                toDate={toDate}\n                category={category}\n                desiredField={desiredField}\n                handleFromDate={handleFromDate}\n                handleToDate={handleToDate}\n                handleCategory={handleCategory}\n                handleDesiredField={handleDesiredField}\n              />\n            }\n\n\n            {!apiContent ?\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n\n              : apiContent && apiContent.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12} >\n\n                      <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\n\n                        <ApiHighlight height={400} classes={classes}>\n                          <ResponsiveCalendar\n                            data={filterData}\n                            align=\"top\"\n                            from={incrementDate(fromDate, 1)}\n                            to={incrementDate(toDate, 1)}\n                            emptyColor=\"#eeeeee\"\n                            colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\n                            yearSpacing={40}\n                            monthBorderColor=\"#ffffff\"\n                            dayBorderWidth={2}\n                            dayBorderColor=\"#ffffff\"\n                            margin={{ bottom: 40, left: 40 }}\n                            legends={[\n                              {\n                                anchor: 'bottom-right',\n                                direction: 'row',\n                                translateY: 36,\n                                itemCount: 4,\n                                itemWidth: 42,\n                                itemHeight: 36,\n                                itemsSpacing: 14,\n                                itemDirection: 'right-to-left'\n                              }\n                            ]}\n                            onClick={(day, event) => {\n                              if (!day.value) {\n                              } else if (lookerUser.user_attributes.permission_level === 'basic') {\n                                togglePayWallModal({\n                                  'show': true,\n                                  'permissionNeeded': 'see_drill_overlay'\n                                });\n                              } else {\n                                corsApiCall(handleModalOpen, [day])\n                                event.stopPropagation();\n                              }\n                            }}\n                          />\n                        </ApiHighlight>\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box> :\n                ''\n            }\n          </div>\n        </Grid >\n        {\n          open ?\n            <ModalTable\n              {...props}\n              open={open}\n              onClose={handleModalClose}\n              classes={classes}\n              modalContent={modalContent}\n            />\n\n            : ''\n        }\n      </Card>\n    </div >\n  )\n}\n//Filter Bar code\nfunction FilterBar(props) {\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\n\n  const [expanded, setExpanded] = useState(true);\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  // console.log('FilterBar')\n  // console.log('fromDate', fromDate)\n  // console.log('toDate', toDate)\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\n\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          {apiContent ?\n            <>\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                    >\n                      Metric</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\n                      value={desiredField}\n                      onChange={(event) => handleDesiredField(event.target.value)}\n                    >\n                      {lookerContent[0].desiredFields.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}\n                        >{item.substring(item.lastIndexOf(\".\") + 1, item.length).split(\"_\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\" \")}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <FormControl className={classes.formControl}>\n                    <InputLabel\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                    >\n                      Category</InputLabel>\n                    <Select\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\n                      value={category}\n                      onChange={(event) => handleCategory(event.target.value)}\n                    >\n                      {apiContent.uniqueCategories.map((item, index) => (\n\n                        <MenuItem\n                          id={validIdHelper(`${item}-${index}`)}\n                          key={validIdHelper(`${item}-${index}`)}\n                          value={item}>{item}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </ApiHighlight>\n              </Grid>\n\n              <Grid item sm={3}>\n\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"fromDate\"\n                      label=\"From date\"\n                      value={fromDate}\n                      onChange={handleFromDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n              <Grid item sm={3}>\n                <ApiHighlight classes={classes}>\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\n                    <KeyboardDatePicker\n                      disableToolbar\n                      variant=\"inline\"\n                      format=\"MM/dd/yyyy\"\n                      margin=\"normal\"\n                      id=\"toDate\"\n                      label=\"To date\"\n                      value={toDate}\n                      onChange={handleToDate}\n                      KeyboardButtonProps={{\n                        'aria-label': 'change date',\n                      }}\n                      minDate={fromDate}\n                      maxDate={toDate}\n                    />\n                  </MuiPickersUtilsProvider>\n                </ApiHighlight>\n              </Grid>\n            </>\n            : ''}\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel >\n  )\n}\n\nfunction incrementDate(dateInput, increment) {\n  var dateFormatTotime = new Date(dateInput);\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\n  return increasedDate.toISOString().split('T')[0];\n}","export default \"import $ from 'jquery';\\nimport _ from 'lodash'\\nimport React, { useState, useEffect, useContext } from 'react';\\nimport {\\n  AppBar, Tabs, Tab, Typography, Box, Grid, CircularProgress, Card, TextField,\\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, Divider, InputLabel, MenuItem,\\n  FormControl, Select, Modal\\n} from '@material-ui/core'\\nimport { Skeleton } from '@material-ui/lab';\\nimport { ExpandMore, FilterList } from '@material-ui/icons';\\nimport ModalTable from '../../Material/ModalTable';\\nimport { ResponsiveCalendar } from '@nivo/calendar'\\nimport CodeFlyout from '../CodeFlyout';\\nimport rawSampleCode from '!!raw-loader!./CustomVis.js'; // eslint-disable-line import/no-webpack-loader-syntax\\nimport useStyles from './styles.js';\\nimport { ApiHighlight } from '../../Highlights/Highlight';\\n//new date pickers\\nimport { format, endOfDay, addDays } from 'date-fns';\\nimport DateFnsUtils from '@date-io/date-fns';\\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers';\\nimport AppContext from '../../../AppContext';\\nconst { validIdHelper } = require('../../../tools');\\n\\nexport default function CustomVis(props) {\\n  // console.log('CustomVis')\\n  const topBarBottomBarHeight = 112;\\n  const [value, setValue] = useState(0);\\n  const [fromDate, setFromDate] = useState('');\\n  const [toDate, setToDate] = useState('');\\n  const [category, setCategory] = useState('All')\\n  const [desiredField, setDesiredField] = useState('')\\n  const [apiContent, setApiContent] = useState(undefined);\\n  const [open, setOpen] = React.useState(false);\\n  const [modalContent, setModalContent] = useState({});\\n  const [clientSideCode, setClientSideCode] = useState('');\\n  // const [serverSideCode, setServerSideCode] = useState('');\\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\\n\\n\\n  //declare constants\\n  const classes = useStyles();\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\\n\\n  //handle opening of modal for advanced and premium users\\n  const handleModalOpen = async ({ day }) => {\\n    let originalInlineQueryCopy = JSON.parse(JSON.stringify(lookerContent[0].inlineQuery));\\n    originalInlineQueryCopy.filters = {\\n      ...originalInlineQueryCopy.filters,\\n      [originalInlineQueryCopy.fields[0]]: day,\\n      [originalInlineQueryCopy.fields[1]]: category === \\\"All\\\" ? '' : category\\n    }\\n    originalInlineQueryCopy.total = true;\\n    originalInlineQueryCopy.limit = \\\"25\\\";\\n\\n    setOpen(true);\\n    let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: originalInlineQueryCopy }));\\n    let modalObj = {\\n      \\\"title\\\": `Detail View for ${day}`,\\n      \\\"body\\\": lookerResponseData\\n    }\\n    setModalContent(modalObj);\\n  };\\n\\n  //handle modal close\\n  const handleModalClose = () => {\\n    setModalContent({})\\n    setOpen(false);\\n  };\\n\\n  //handle tab change\\n  const handleChange = (event, newValue) => {\\n    handleTabChange(0);\\n    setValue(newValue);\\n  };\\n\\n  const handleFromDate = newValue => {\\n    let validDate = Date.parse(newValue);\\n    if (validDate > 0) {\\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\\n      setFromDate(newValueAsDate);\\n    }\\n  }\\n  const handleToDate = newValue => {\\n    let validDate = Date.parse(newValue);\\n    if (validDate > 0) {\\n      let newValueAsDate = format(addDays(new Date(newValue), 1), 'yyyy-MM-dd');\\n      setToDate(newValueAsDate);\\n    }\\n  }\\n\\n  const handleCategory = newValue => {\\n    setCategory(newValue)\\n  }\\n\\n  const handleDesiredField = newValue => {\\n    setDesiredField(newValue)\\n  }\\n\\n  //format response from initial api call based on LookerContent array\\n  //to match format required by Nivo Calendar component\\n  let filterData = [];\\n  if (apiContent) {\\n    //filtering for fromDate, toDate and category\\n    filterData = _.filter(apiContent, (row) => {\\n      return (row[apiContent.inlineQuery.fields[0]] >= fromDate\\n        && row[apiContent.inlineQuery.fields[0]] < toDate\\n        && (category === 'All' ? true : row[apiContent.inlineQuery.fields[1]] === category)\\n      )\\n    })\\n    //converting filterDAta to desired format for vis\\n    filterData = filterData.map(item => {\\n      return {\\n        'day': item[apiContent.inlineQuery.fields[0]],\\n        'category': item[apiContent.inlineQuery.fields[1]],\\n        'value': item[desiredField]\\n      }\\n    })\\n\\n    //special exception for category all\\n    //need to reduce array by day across categories\\n    //destructuing in reduce of value would not work for dynamic var\\n    if (category === 'All') {\\n      //create array of all unique dates\\n      const uniqueDates = [...new Set(filterData.map(item => item.day))];\\n      let filteredAndReducedForAll = []\\n      //iterate over unique date\\n      uniqueDates.map(uniqueDate => {\\n        //filter filterData for current unique date\\n        let value = _.filter(filterData, row => {\\n          return row.day === uniqueDate\\n        }).reduce((acc, { value }) => acc + value, 0)\\n        let thisObj = {\\n          day: uniqueDate,\\n          value: value,\\n          category: 'All'\\n        }\\n        filteredAndReducedForAll.push(thisObj)\\n\\n      })\\n      filterData = filteredAndReducedForAll;\\n    }\\n  }\\n\\n  useEffect(() => {\\n    if (lookerContent.length) {\\n      corsApiCall(performLookerApiCalls, [lookerContent])\\n      setDesiredField(lookerContent[0].desiredFields[0])\\n      setClientSideCode(rawSampleCode)\\n    }\\n  }, [lookerContent, lookerUser])\\n\\n  useEffect(() => {\\n    window.addEventListener(\\\"resize\\\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\\n  })\\n\\n  const performLookerApiCalls = function (lookerContent) {\\n    // console.log('performLookerApiCalls')\\n    // console.log({ lookerContent })\\n\\n    setApiContent(undefined); //set to empty array to show progress bar and skeleton\\n    lookerContent.map(async lookerContent => {\\n      let { inlineQuery } = lookerContent;\\n      inlineQuery.filters = {\\n        [lookerContent.desiredFilterName]: lookerUser.user_attributes.brand\\n      };\\n      let lookerResponseData = await sdk.ok(sdk.run_inline_query({ result_format: lookerContent.result_format || 'json', body: inlineQuery }));\\n\\n      // console.log('lookerResponseData', lookerResponseData)\\n      lookerResponseData = lookerResponseData.filter(item => {\\n        return item[inlineQuery.fields[0]]\\n      })\\n      let uniqueCategories = ['All'];\\n      for (let i = 0; i < lookerResponseData.length; i++) {\\n        if (uniqueCategories.indexOf(lookerResponseData[i][inlineQuery.fields[1]]) === -1) {\\n          uniqueCategories.push(lookerResponseData[i][inlineQuery.fields[1]])\\n        }\\n      }\\n      lookerResponseData.inlineQuery = inlineQuery;\\n      lookerResponseData.uniqueCategories = uniqueCategories;\\n      setFromDate(lookerResponseData[lookerResponseData.length - 1][lookerResponseData.inlineQuery.fields[0]]);\\n      setToDate(incrementDate(lookerResponseData[0][lookerResponseData.inlineQuery.fields[0]], 1));\\n      setApiContent(lookerResponseData)\\n    })\\n  }\\n\\n  let nivoColorScale = ['#61cdbb', '#97e3d5', '#e8c1a0', '#f47560']\\n  let googleColorScale = ['#4595EC', '#F3A759', '#E24E3A', '#65AB5A'];\\n\\n  return (\\n    <div className={`${classes.root} demoComponent`}\\n      style={{ height }}>\\n      <Card elevation={1} className={`\\n      ${classes.padding30} \\n      ${classes.height100Percent}\\n      ${classes.overflowScroll}`\\n      }\\n      >\\n        <Grid container\\n          key={validIdHelper(type)} >\\n          <div className={`${classes.root} `}>\\n\\n            {!apiContent ?\\n              <Skeleton variant=\\\"rect\\\" animation=\\\"wave\\\" className={classes.skeleton} />\\n              :\\n              <FilterBar {...props}\\n                classes={classes}\\n                apiContent={apiContent}\\n                fromDate={fromDate}\\n                toDate={toDate}\\n                category={category}\\n                desiredField={desiredField}\\n                handleFromDate={handleFromDate}\\n                handleToDate={handleToDate}\\n                handleCategory={handleCategory}\\n                handleDesiredField={handleDesiredField}\\n              />\\n            }\\n\\n\\n            {!apiContent ?\\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                <Card className={`${classes.card} ${classes.flexCentered}`}\\n                  elevation={0}\\n                  mt={2}\\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                  <CircularProgress className={classes.circularProgress} />\\n                </Card>\\n              </Grid>\\n\\n              : apiContent && apiContent.length ?\\n                <Box>\\n                  <Grid container\\n                    spacing={3}\\n                    className={`${classes.noContainerScroll}`}>\\n                    {codeShow ?\\n                      <Grid item sm={6}\\n                        className={`${classes.positionFixedTopRight}`}\\n                      >\\n                        <CodeFlyout {...props}\\n                          classes={classes}\\n                          lookerUser={lookerUser}\\n                          height={height}\\n                        />\\n                      </Grid> : ''}\\n                    <Divider className={classes.divider} />\\n                    <Grid item sm={12} >\\n\\n                      <Box className={`${classes.w100} ${classes.padding10}`} mt={2}>\\n\\n                        <ApiHighlight height={400} classes={classes}>\\n                          <ResponsiveCalendar\\n                            data={filterData}\\n                            align=\\\"top\\\"\\n                            from={incrementDate(fromDate, 1)}\\n                            to={incrementDate(toDate, 1)}\\n                            emptyColor=\\\"#eeeeee\\\"\\n                            colors={desiredField === lookerContent[0].desiredFields[0] ? googleColorScale : nivoColorScale}\\n                            yearSpacing={40}\\n                            monthBorderColor=\\\"#ffffff\\\"\\n                            dayBorderWidth={2}\\n                            dayBorderColor=\\\"#ffffff\\\"\\n                            margin={{ bottom: 40, left: 40 }}\\n                            legends={[\\n                              {\\n                                anchor: 'bottom-right',\\n                                direction: 'row',\\n                                translateY: 36,\\n                                itemCount: 4,\\n                                itemWidth: 42,\\n                                itemHeight: 36,\\n                                itemsSpacing: 14,\\n                                itemDirection: 'right-to-left'\\n                              }\\n                            ]}\\n                            onClick={(day, event) => {\\n                              if (!day.value) {\\n                              } else if (lookerUser.user_attributes.permission_level === 'basic') {\\n                                togglePayWallModal({\\n                                  'show': true,\\n                                  'permissionNeeded': 'see_drill_overlay'\\n                                });\\n                              } else {\\n                                corsApiCall(handleModalOpen, [day])\\n                                event.stopPropagation();\\n                              }\\n                            }}\\n                          />\\n                        </ApiHighlight>\\n                      </Box>\\n                    </Grid>\\n                  </Grid>\\n                </Box> :\\n                ''\\n            }\\n          </div>\\n        </Grid >\\n        {\\n          open ?\\n            <ModalTable\\n              {...props}\\n              open={open}\\n              onClose={handleModalClose}\\n              classes={classes}\\n              modalContent={modalContent}\\n            />\\n\\n            : ''\\n        }\\n      </Card>\\n    </div >\\n  )\\n}\\n//Filter Bar code\\nfunction FilterBar(props) {\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, classes,\\n    apiContent, fromDate, toDate, category, desiredField, handleFromDate, handleToDate, handleCategory, handleDesiredField } = props;\\n\\n  const [expanded, setExpanded] = useState(true);\\n\\n  const handleExpansionPanel = (event, newValue) => {\\n    setExpanded(expanded ? false : true);\\n  };\\n\\n  // console.log('FilterBar')\\n  // console.log('fromDate', fromDate)\\n  // console.log('toDate', toDate)\\n\\n  return (\\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} className={classes.w100} elevation={0}>\\n      <ExpansionPanelSummary\\n        expandIcon={<ExpandMore />}\\n        aria-controls=\\\"panel1a-content\\\"\\n        id=\\\"panel1a-header\\\"\\n      >\\n        <FilterList /><Typography className={`${classes.heading} ${classes.ml12}`}>Filter:</Typography>\\n\\n      </ExpansionPanelSummary>\\n      <ExpansionPanelDetails>\\n        <Grid container spacing={3}>\\n          {apiContent ?\\n            <>\\n              <Grid item sm={3}>\\n\\n                <ApiHighlight classes={classes}>\\n                  <FormControl className={classes.formControl}>\\n                    <InputLabel\\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\\n                    >\\n                      Metric</InputLabel>\\n                    <Select\\n                      labelId={`${validIdHelper(type + '-FilterBar-DataPropery-SelectLabel')}`}\\n                      id={`${validIdHelper(type + '-FilterBar-DataPropery-Select')}`}\\n                      value={desiredField}\\n                      onChange={(event) => handleDesiredField(event.target.value)}\\n                    >\\n                      {lookerContent[0].desiredFields.map((item, index) => (\\n\\n                        <MenuItem\\n                          id={validIdHelper(`${item}-${index}`)}\\n                          key={validIdHelper(`${item}-${index}`)}\\n                          value={item}\\n                        >{item.substring(item.lastIndexOf(\\\".\\\") + 1, item.length).split(\\\"_\\\").map(item => item.charAt(0).toUpperCase() + item.substring(1)).join(\\\" \\\")}</MenuItem>\\n                      ))}\\n                    </Select>\\n                  </FormControl>\\n                </ApiHighlight>\\n              </Grid>\\n              <Grid item sm={3}>\\n                <ApiHighlight classes={classes}>\\n                  <FormControl className={classes.formControl}>\\n                    <InputLabel\\n                      id={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\\n                    >\\n                      Category</InputLabel>\\n                    <Select\\n                      labelId={`${validIdHelper(type + '-FilterBar-Category-SelectLabel')}`}\\n                      id={`${validIdHelper(type + '-FilterBar-Category-Select')}`}\\n                      value={category}\\n                      onChange={(event) => handleCategory(event.target.value)}\\n                    >\\n                      {apiContent.uniqueCategories.map((item, index) => (\\n\\n                        <MenuItem\\n                          id={validIdHelper(`${item}-${index}`)}\\n                          key={validIdHelper(`${item}-${index}`)}\\n                          value={item}>{item}</MenuItem>\\n                      ))}\\n                    </Select>\\n                  </FormControl>\\n                </ApiHighlight>\\n              </Grid>\\n\\n              <Grid item sm={3}>\\n\\n                <ApiHighlight classes={classes}>\\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\\n                    <KeyboardDatePicker\\n                      disableToolbar\\n                      variant=\\\"inline\\\"\\n                      format=\\\"MM/dd/yyyy\\\"\\n                      margin=\\\"normal\\\"\\n                      id=\\\"fromDate\\\"\\n                      label=\\\"From date\\\"\\n                      value={fromDate}\\n                      onChange={handleFromDate}\\n                      KeyboardButtonProps={{\\n                        'aria-label': 'change date',\\n                      }}\\n                      minDate={apiContent[apiContent.length - 1][apiContent.inlineQuery.fields[0]]}\\n                      maxDate={apiContent[0][apiContent.inlineQuery.fields[0]]}\\n                    />\\n                  </MuiPickersUtilsProvider>\\n                </ApiHighlight>\\n              </Grid>\\n              <Grid item sm={3}>\\n                <ApiHighlight classes={classes}>\\n                  <MuiPickersUtilsProvider utils={DateFnsUtils}>\\n                    <KeyboardDatePicker\\n                      disableToolbar\\n                      variant=\\\"inline\\\"\\n                      format=\\\"MM/dd/yyyy\\\"\\n                      margin=\\\"normal\\\"\\n                      id=\\\"toDate\\\"\\n                      label=\\\"To date\\\"\\n                      value={toDate}\\n                      onChange={handleToDate}\\n                      KeyboardButtonProps={{\\n                        'aria-label': 'change date',\\n                      }}\\n                      minDate={fromDate}\\n                      maxDate={toDate}\\n                    />\\n                  </MuiPickersUtilsProvider>\\n                </ApiHighlight>\\n              </Grid>\\n            </>\\n            : ''}\\n        </Grid>\\n      </ExpansionPanelDetails>\\n    </ExpansionPanel >\\n  )\\n}\\n\\nfunction incrementDate(dateInput, increment) {\\n  var dateFormatTotime = new Date(dateInput);\\n  var increasedDate = new Date(dateFormatTotime.getTime() + (increment * 86400000));\\n  return increasedDate.toISOString().split('T')[0];\\n}\";","import { makeStyles } from '@material-ui/core/styles';\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    overflow: 'scroll',\n    borderRadius: '8px'\n  },\n  card: {\n    minWidth: 275,\n    minHeight: 400,\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  skeleton: {\n    minWidth: 275,\n    minHeight: 600,\n  },\n  ml24: {\n    marginLeft: 24\n  },\n  parentHoverVisibility: {\n    '&:hover $childHoverVisibility': {\n      visibility: 'visible'\n    }\n\n  },\n  childHoverVisibility: {\n    visibility: 'hidden'\n  },\n  faSm: {\n    fontSize: '.75em'\n  },\n  positionTopRight: {\n    position: 'absolute',\n    top: -30,\n    right: -50,\n    bottom: 0,\n    zIndex: 100\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  padding30: {\n    padding: 30\n  },\n  mr12: {\n    marginRight: 12\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  height100Percent: {\n    height: '100%'\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  whiteSpaceNoWrap: {\n    whiteSpace: 'nowrap'\n  },\n  overflowHidden: {\n    overflow: 'hidden'\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowYScroll: {\n    overflowY: 'scroll',\n    overflowX: 'hidden'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  }\n}));","import React from 'react';\nimport { Typography, Box } from '@material-ui/core'\nimport PropTypes from 'prop-types';\n\nexport function TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <Typography\n            component=\"div\"\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n            aria-labelledby={`simple-tab-${index}`}\n            {...other}\n        >\n            <Box p={3}>{children}</Box>\n        </Typography>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nexport function a11yProps(index) {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    };\n}\n\n","import $ from 'jquery';\nimport _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button } from '@material-ui/core'\nimport { TreeView, TreeItem } from '@material-ui/lab';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./ReportBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { TabPanel, a11yProps } from './helpers.js';\nimport '../../Home.css';\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\nimport AppContext from '../../../AppContext';\nimport { SwapVerticalCircleOutlined } from '@material-ui/icons';\nconst { validIdHelper } = require('../../../tools');\n\n//start of ReportBuilder Component\nexport default function ReportBuilder(props) {\n  const topBarBottomBarHeight = 112;\n  const [iFrameExists, setIFrame] = useState(0);\n  // const [exploreIFrameExists, setExploreIFrame] = useState(0);\n  const [apiContent, setApiContent] = useState([]);\n  const [exploreObj, setExploreObj] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  // const { togglePayWallModal, codeShow } = useContext(AppContext)\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n  const classes = useStyles();\n  const [value, setValue] = useState(0);\n  const [qid, setQid] = useState(null);\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\n\n  const demoComponentType = type;\n  const tabContent = [...lookerContent]\n\n  const handleChange = (event, newValue) => {\n    if (newValue == 1 && lookerUser.user_attributes.permission_level != 'premium') {\n      // handleChange(0)\n      togglePayWallModal({\n        'show': true,\n        'permissionNeeded': 'explore'\n      });\n    } else {\n      setValue(newValue)\n    }\n  };\n\n  useEffect(() => {\n    if (activeTabValue > value) {\n      setValue(activeTabValue)\n    } else {\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n    setClientSideCode(rawSampleCode)\n  }, [lookerContent, lookerUser]);\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\n  })\n\n\n  // useEffect(() => {\n  //   console.log('exploreObj useEffect')\n  //   console.log('Object.keys(exploreObj).length', Object.keys(exploreObj).length)\n  // }, [exploreObj])\n\n\n  useEffect(() => {\n    // console.log('value useEffect')\n    corsApiCall(performLookerApiCalls, [lookerContent, 0]);\n  }, [value])\n\n\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\n\n    let iFrameArray = $(\".embedContainer:visible > iframe\")\n\n    let matchingIndex = 0;\n    for (let i = 0; i < iFrameArray.length; i++) {\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\n        iFrameArray[i].classList.remove('dNone')\n        matchingIndex = i;\n      } else {\n        iFrameArray[i].classList.add('dNone')\n      }\n    }\n\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\n      //save qid to state and use in perform looker api calls\n      setQid(qid);\n      handleChange('edit', 1)\n    } else if (secondaryAction === 'delete') {\n      //remove iframe associated with content that was deleted\n      let indexOfDeletedContent;\n      for (let i = 0; i < iFrameArray.length; i++) {\n        if (iFrameArray[i].classList.contains(contentId)) {\n          indexOfDeletedContent = i;\n        }\n      }\n      let updatedIFrameArray = iFrameArray.slice()\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\n        if (i === 0) {\n          updatedIFrameArray[i].classList.remove('dNone')\n          matchingIndex = i;\n        } else {\n          updatedIFrameArray[i].classList.add('dNone')\n        }\n      }\n      //append updated array\n      $(`#embedContainer-reportbuilder-14`).empty();\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\n\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\n    }\n  }\n\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\n    // console.log('performLookerApiCalls')\n    // console.log('lookerContent', lookerContent)\n    if (animateLoad) {\n      handleChange('refresh', 0)\n      setIFrame(0)\n      setApiContent([])\n    }\n\n    lookerContent.map(async lookerContent => {\n      if (value === 0 &&\n        lookerContent.type === 'folder') {\n\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\n        const embedUser = await sdk.ok(sdk.me())\n\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\n          let clientId = look.query.client_id;\n          sharedFolder.looks[h].client_id = clientId;\n        }\n\n        let embeddedUserFolder = {}\n        if (lookerUser.user_attributes.permission_level === 'premium') {\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\n          if (embedUserLooks && embedUserLooks.length) {\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\n              let clientId = look.query.client_id;\n              embeddedUserFolder.looks[i].client_id = clientId;\n            }\n          }\n        }\n\n        let lookerResponseData = {\n          sharedFolder,\n          embeddedUserFolder\n        }\n\n        // console.log('lookerResponseData', lookerResponseData)\n\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\n          looksToUse = [\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\n          ]\n\n        }\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\n        let objToUse = {\n          looks: looksToUse,\n          dashboards: dashboardsToUse\n        }\n        // console.log('objToUse', objToUse)\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\n        if (objToUse.looks.length) {\n          objToUse.looks.map((item, index) => {\n\n            let lookId = item.id;\n            let lookIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\n                lookIsRendered = true;\n              }\n            }\n\n            if (!lookIsRendered) {\n              LookerEmbedSDK.createLookWithId(lookId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('look')\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName(index > 0 ? 'dNone' : 'oops')\n                .withClassName(lookId)\n                .build()\n                .connect()\n                .then((look) => {\n                  // setIFrame(1)\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n            if (index === objToUse.looks.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n\n        if (objToUse.dashboards.length) {\n          objToUse.dashboards.map((item, index) => {\n            let dashboardId = item.id\n            let dashboardIsRendered = false;\n            for (let i = 0; i < iFrameArray.length; i++) {\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\n                dashboardIsRendered = true;\n              }\n            }\n            if (!dashboardIsRendered) {\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n                .withClassName('iframe')\n                .withClassName('dashboard')\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \"shared\" : \"personal\")\n                .withClassName('dNone')\n                .withClassName(dashboardId)\n                .build()\n                .connect()\n                .then((dashboard) => {\n                  setTimeout(() => {\n                    // setIFrame(1)\n                  }, 1000)\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n                })\n                .catch((error) => {\n                  console.error('Connection error', error)\n                })\n            }\n\n\n            if (index === objToUse.dashboards.length - 1) {\n              setTimeout(() => setIFrame(1), 1000)\n            }\n          })\n        }\n        setApiContent(objToUse)\n      } else if (lookerContent.type === 'explore' &&\n        lookerUser.user_attributes.permission_level === 'premium' &&\n        value === 1) {\n        // console.log('inside else ifff')\n        let exploreId = lookerContent.id;\n        // console.log('exploreId', exploreId)\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\n        //separate logic for embedding explore with qid vs. no qid\n        if (qid) {\n          // console.log('qid ifff')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .withParams({\n              qid: qid\n            })\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n              setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        } else {\n          // console.log('qid else')\n          LookerEmbedSDK.createExploreWithId(exploreId)\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\n            .withClassName('exploreIframe')\n            .on('explore:state:changed', (event) => {\n            })\n            .build()\n            .connect()\n            .then((explore) => {\n              // console.log('explore', explore)\n              // setTimeout(() => {\n              setIFrame(1)\n              setExploreObj(explore)\n              // }, 1000)\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\n              // setQid(null)\n            })\n            .catch((error) => {\n              console.error('Connection error', error)\n            })\n        }\n      }\n      // else console.log('ellse')\n    })\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={classes.root}>\n            {iFrameExists ? '' :\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n            }\n\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\n              <AppBar position=\"static\" elevation={0}>\n                <Tabs\n                  className={classes.tabs}\n                  value={value}\n                  onChange={handleChange}\n                  aria-label=\"simple tabs example\">\n                  {tabContent.map((item, index) => (\n                    <Tab\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\n                      label={index == 1 ?\n                        <div>\n\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\n                          {item.label}\n                        </div> :\n                        item.label}\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\n                      style={index === 1 ? {\n                        backgroundColor: '#5896E6',\n                        borderRadius: '4px',\n                        color: '#fff',\n                        opacity: '1.0'\n                      } : {}}\n                      {...a11yProps(index)} />\n                  ))}\n                </Tabs>\n              </AppBar>\n              <Box className=\"tabPanelContainer\">\n                <Grid container\n                  spacing={3}\n                  className={`${classes.noContainerScroll}`}>\n                  {codeShow ?\n                    <Grid item sm={6}\n                      className={`${classes.positionFixedTopRight}`}\n                    >\n                      <CodeFlyout {...props}\n                        classes={classes}\n                        lookerUser={lookerUser}\n                        height={height}\n                      />\n                    </Grid> : ''}\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\n                    <TabPanel\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\n                      value={value}\n                      index={tabContentItemIndex}\n                      style={{ width: '100%' }} //weird\n                    >\n                      <Grid container>\n                        {\n                          tabContentItemIndex === 0\n                            ?\n                            <React.Fragment\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\n                              <Grid item sm={4} >\n                                <ApiHighlight height={500} classes={classes}>\n                                  <TreeSideBar {...{\n                                    togglePayWallModal,\n                                    classes,\n                                    demoComponentType,\n                                    tabContent,\n                                    tabContentItemIndex,\n                                    action,\n                                    apiContent,\n                                    ...props\n                                  }}\n                                  />\n                                </ApiHighlight>\n                              </Grid>\n                              <Grid item sm={8} >\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight>\n                              </Grid>\n                            </React.Fragment>\n                            :\n                            <Grid item sm={12} >\n                              {/* couldn't get this to work */}\n                              {/* {Object.keys(exploreObj).length ?\n                                <EmbedHighlight classes={classes}>\n                                  <div\n                                    className=\"embedContainer\"\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  >\n                                  </div>\n                                </EmbedHighlight> :\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\n                                  elevation={0}\n                                  mt={2}\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                                  <CircularProgress className={classes.circularProgress} />\n                                </Card>} */}\n                              <EmbedHighlight classes={classes}>\n                                <div\n                                  className=\"embedContainer\"\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\n                                >\n                                </div>\n                              </EmbedHighlight>\n                            </Grid>\n                        }\n                      </Grid>\n                    </TabPanel>\n                  ))}</Grid>\n              </Box>\n            </Box >\n          </div>\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n\n\nfunction TreeSideBar(props) {\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent, lookerUser, togglePayWallModal } = props\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\n  let treeCounter = 0;\n  const [selected, setSelected] = useState(2);\n  const expandedArr = Object.keys(apiContent).length ? [\"1\", \"\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\n  const [expanded, setExpanded] = useState(expandedArr);\n\n  const handleToggle = (event, nodeIds) => {\n    setExpanded(nodeIds);\n  }\n\n  const handleSelect = (event, nodeIds) => {\n    setSelected(nodeIds);\n  };\n\n\n  useEffect(() => {\n    setExpanded(expandedArr);\n    if (selected !== 2) setSelected(2)\n    // let innerTreeItemArray = $(\".innerTreeItem\");\n    // console.log('innerTreeItemArray', innerTreeItemArray)\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\n    //   console.log('inside forrr', i)\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\n    //     console.log('inside iffff')\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\n    //   } else console.log('elllse')\n    // }\n  }, [apiContent]);\n\n\n  return (\n    <TreeView\n      className={classes.tree}\n      defaultCollapseIcon={<ExpandMoreIcon />}\n      defaultExpandIcon={<ChevronRightIcon />}\n      expanded={expanded}\n      onNodeToggle={handleToggle}\n      onNodeSelect={handleSelect}\n    // multiSelect={false}\n    >\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\n        <React.Fragment\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\n          <TreeItem\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\n            nodeId={\"\" + (treeCounter += 1)}\n            // treecounter={treeCounter}\n            label={_.capitalize(key)}\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\n            disabled={apiContent[key].length ? false : true}\n          >\n            {\n              apiContent[key].length ?\n                apiContent[key].map((item, index) => (\n                  <TreeItem\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\n                    nodeId={\"\" + (treeCounter += 1)}\n                    treecounter={treeCounter}\n                    selected={selected === treeCounter}\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\n                    contentid={item.id}\n                    label={item.folder_id === sharedFolderId &&\n                      key === 'looks' ?\n                      <div\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\n                      >\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                        <Grid container>\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\n                            {item.title}</Grid>\n                          <Grid item sm={4}>\n                            <Button\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\n                              size=\"small\"\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                              onClick={(event) => {\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\n                                  action(\n                                    key.substring(0, key.length - 1),\n                                    item.id,\n                                    'explore',\n                                    item.client_id,\n                                    tabContent[tabContentItemIndex + 1].id,\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                  );\n                                  event.stopPropagation();\n                                } else {\n                                  // togglePayWallModal();\n\n                                  togglePayWallModal({\n                                    'show': true,\n                                    'permissionNeeded': 'explore'\n                                  });\n                                }\n                              }\n                              }\n                              color=\"default\"\n                            >\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\n                            </Button>\n                          </Grid>\n                        </Grid>\n\n\n                      </div>\n                      : key === 'looks' ?\n                        <div\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\n                          <Grid container>\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\n                              {item.title}\n                            </Grid>\n                            <Grid item sm={6}>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'edit',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // togglePayWallModal();\n\n                                    togglePayWallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"primary\"\n                              >\n                                Edit\n                                                                                            </Button>\n                              <Button\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\n                                size=\"small\"\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\n                                onClick={(event) => {\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\n                                    // setSelected(treeCounter);\n                                    action(\n                                      key.substring(0, key.length - 1),\n                                      item.id,\n                                      'delete',\n                                      item.client_id,\n                                      tabContent[tabContentItemIndex + 1].id,\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\n                                    );\n                                    event.stopPropagation();\n                                  } else {\n                                    // togglePayWallModal();\n\n                                    togglePayWallModal({\n                                      'show': true,\n                                      'permissionNeeded': 'explore'\n                                    });\n                                  }\n                                }\n                                }\n                                color=\"secondary\"\n                              >\n                                Delete\n                                                                                            </Button>\n                            </Grid>\n                          </Grid>\n\n                        </div>\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\n                    }\n                    onClick={() => {\n                      // setSelected(treeCounter)\n                      action(\n                        key.substring(0, key.length - 1), item.id)\n                    }} />\n\n                ))\n                :\n                ''\n            }\n          </TreeItem>\n\n        </React.Fragment>\n      )) : ''}\n    </TreeView>\n  )\n}","export default \"import $ from 'jquery';\\nimport _ from 'lodash'\\nimport React, { useState, useEffect, useContext } from 'react';\\nimport { AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button } from '@material-ui/core'\\nimport { TreeView, TreeItem } from '@material-ui/lab';\\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\\nimport CodeFlyout from '../CodeFlyout';\\nimport rawSampleCode from '!!raw-loader!./ReportBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\\nimport useStyles from './styles.js';\\nimport { TabPanel, a11yProps } from './helpers.js';\\nimport '../../Home.css';\\nimport { ApiHighlight, EmbedHighlight } from '../../Highlights/Highlight';\\nimport AppContext from '../../../AppContext';\\nimport { SwapVerticalCircleOutlined } from '@material-ui/icons';\\nconst { validIdHelper } = require('../../../tools');\\n\\n//start of ReportBuilder Component\\nexport default function ReportBuilder(props) {\\n  const topBarBottomBarHeight = 112;\\n  const [iFrameExists, setIFrame] = useState(0);\\n  // const [exploreIFrameExists, setExploreIFrame] = useState(0);\\n  const [apiContent, setApiContent] = useState([]);\\n  const [exploreObj, setExploreObj] = useState({});\\n  const [clientSideCode, setClientSideCode] = useState('');\\n  const [serverSideCode, setServerSideCode] = useState('');\\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\\n  // const { togglePayWallModal, codeShow } = useContext(AppContext)\\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\\n\\n  const classes = useStyles();\\n  const [value, setValue] = useState(0);\\n  const [qid, setQid] = useState(null);\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser, lookerHost } = props;\\n\\n  const demoComponentType = type;\\n  const tabContent = [...lookerContent]\\n\\n  const handleChange = (event, newValue) => {\\n    if (newValue == 1 && lookerUser.user_attributes.permission_level != 'premium') {\\n      // handleChange(0)\\n      togglePayWallModal({\\n        'show': true,\\n        'permissionNeeded': 'explore'\\n      });\\n    } else {\\n      setValue(newValue)\\n    }\\n  };\\n\\n  useEffect(() => {\\n    if (activeTabValue > value) {\\n      setValue(activeTabValue)\\n    } else {\\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\\n    }\\n    setClientSideCode(rawSampleCode)\\n  }, [lookerContent, lookerUser]);\\n\\n  useEffect(() => {\\n    window.addEventListener(\\\"resize\\\", () => setHeight((window.innerHeight - topBarBottomBarHeight)));\\n  })\\n\\n\\n  // useEffect(() => {\\n  //   console.log('exploreObj useEffect')\\n  //   console.log('Object.keys(exploreObj).length', Object.keys(exploreObj).length)\\n  // }, [exploreObj])\\n\\n\\n  useEffect(() => {\\n    // console.log('value useEffect')\\n    corsApiCall(performLookerApiCalls, [lookerContent, 0]);\\n  }, [value])\\n\\n\\n  const action = async (contentType, contentId, secondaryAction, qid, exploreId, newReportEmbedContainer) => {\\n\\n    let iFrameArray = $(\\\".embedContainer:visible > iframe\\\")\\n\\n    let matchingIndex = 0;\\n    for (let i = 0; i < iFrameArray.length; i++) {\\n      if (iFrameArray[i].classList.contains(contentType) && iFrameArray[i].classList.contains(contentId)) {\\n        iFrameArray[i].classList.remove('dNone')\\n        matchingIndex = i;\\n      } else {\\n        iFrameArray[i].classList.add('dNone')\\n      }\\n    }\\n\\n    if (secondaryAction === 'edit' || secondaryAction === 'explore') {\\n      //save qid to state and use in perform looker api calls\\n      setQid(qid);\\n      handleChange('edit', 1)\\n    } else if (secondaryAction === 'delete') {\\n      //remove iframe associated with content that was deleted\\n      let indexOfDeletedContent;\\n      for (let i = 0; i < iFrameArray.length; i++) {\\n        if (iFrameArray[i].classList.contains(contentId)) {\\n          indexOfDeletedContent = i;\\n        }\\n      }\\n      let updatedIFrameArray = iFrameArray.slice()\\n      updatedIFrameArray.splice(indexOfDeletedContent, 1)\\n      for (let i = 0; i < updatedIFrameArray.length; i++) {\\n        if (i === 0) {\\n          updatedIFrameArray[i].classList.remove('dNone')\\n          matchingIndex = i;\\n        } else {\\n          updatedIFrameArray[i].classList.add('dNone')\\n        }\\n      }\\n      //append updated array\\n      $(`#embedContainer-reportbuilder-14`).empty();\\n      $(`#embedContainer-reportbuilder-14`).html(updatedIFrameArray);\\n\\n      let lookerResponse = await sdk.ok(sdk.delete_look(contentId));\\n      corsApiCall(performLookerApiCalls, [lookerContent, 1])\\n    }\\n  }\\n\\n  const performLookerApiCalls = function (lookerContent, animateLoad) {\\n    // console.log('performLookerApiCalls')\\n    // console.log('lookerContent', lookerContent)\\n    if (animateLoad) {\\n      handleChange('refresh', 0)\\n      setIFrame(0)\\n      setApiContent([])\\n    }\\n\\n    lookerContent.map(async lookerContent => {\\n      if (value === 0 &&\\n        lookerContent.type === 'folder') {\\n\\n        const sharedFolder = await sdk.ok(sdk.folder(lookerContent.id));\\n        const embedUser = await sdk.ok(sdk.me())\\n\\n        for (let h = 0; h < sharedFolder.looks.length; h++) {\\n          let look = await sdk.ok(sdk.look(sharedFolder.looks[h].id))\\n          let clientId = look.query.client_id;\\n          sharedFolder.looks[h].client_id = clientId;\\n        }\\n\\n        let embeddedUserFolder = {}\\n        if (lookerUser.user_attributes.permission_level === 'premium') {\\n          let embedUserLooks = await sdk.ok(sdk.search_looks({ user_id: embedUser.id }))\\n          if (embedUserLooks && embedUserLooks.length) {\\n            let embedUserFolderId = embedUserLooks[0].folder_id || null;\\n            embeddedUserFolder = await sdk.ok(sdk.folder(embedUserFolderId));\\n            for (let i = 0; i < embeddedUserFolder.looks.length; i++) {\\n              let look = await sdk.ok(sdk.look(embeddedUserFolder.looks[i].id));\\n              let clientId = look.query.client_id;\\n              embeddedUserFolder.looks[i].client_id = clientId;\\n            }\\n          }\\n        }\\n\\n        let lookerResponseData = {\\n          sharedFolder,\\n          embeddedUserFolder\\n        }\\n\\n        // console.log('lookerResponseData', lookerResponseData)\\n\\n        let looksToUse = [...lookerResponseData.sharedFolder.looks];\\n        if (lookerUser.user_attributes.permission_level === 'premium' &&\\n          Object.keys(lookerResponseData.embeddedUserFolder).length) {\\n          looksToUse = [\\n            ...looksToUse, ...lookerResponseData.embeddedUserFolder.looks\\n          ]\\n\\n        }\\n        let dashboardsToUse = [...lookerResponseData.sharedFolder.dashboards]\\n        let objToUse = {\\n          looks: looksToUse,\\n          dashboards: dashboardsToUse\\n        }\\n        // console.log('objToUse', objToUse)\\n        let iFrameArray = $(`.embedContainer.${validIdHelper(demoComponentType)} > iframe`);\\n        if (objToUse.looks.length) {\\n          objToUse.looks.map((item, index) => {\\n\\n            let lookId = item.id;\\n            let lookIsRendered = false;\\n            for (let i = 0; i < iFrameArray.length; i++) {\\n              if (iFrameArray[i].classList.contains('look') && iFrameArray[i].classList.contains(lookId)) {\\n                lookIsRendered = true;\\n              }\\n            }\\n\\n            if (!lookIsRendered) {\\n              LookerEmbedSDK.createLookWithId(lookId)\\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\\n                .withClassName('iframe')\\n                .withClassName('look')\\n                .withClassName(lookerResponseData.sharedFolder.looks.indexOf(item) > -1 ? \\\"shared\\\" : \\\"personal\\\")\\n                .withClassName(index > 0 ? 'dNone' : 'oops')\\n                .withClassName(lookId)\\n                .build()\\n                .connect()\\n                .then((look) => {\\n                  // setIFrame(1)\\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\\n                })\\n                .catch((error) => {\\n                  console.error('Connection error', error)\\n                })\\n            }\\n\\n            if (index === objToUse.looks.length - 1) {\\n              setTimeout(() => setIFrame(1), 1000)\\n            }\\n          })\\n        }\\n\\n        if (objToUse.dashboards.length) {\\n          objToUse.dashboards.map((item, index) => {\\n            let dashboardId = item.id\\n            let dashboardIsRendered = false;\\n            for (let i = 0; i < iFrameArray.length; i++) {\\n              if (iFrameArray[i].classList.contains('dashboard') && iFrameArray[i].classList.contains(dashboardId)) {\\n                dashboardIsRendered = true;\\n              }\\n            }\\n            if (!dashboardIsRendered) {\\n              LookerEmbedSDK.createDashboardWithId(dashboardId)\\n                .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\\n                .withClassName('iframe')\\n                .withClassName('dashboard')\\n                .withClassName(lookerResponseData.sharedFolder.dashboards.indexOf(item) > -1 ? \\\"shared\\\" : \\\"personal\\\")\\n                .withClassName('dNone')\\n                .withClassName(dashboardId)\\n                .build()\\n                .connect()\\n                .then((dashboard) => {\\n                  setTimeout(() => {\\n                    // setIFrame(1)\\n                  }, 1000)\\n                  LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\\n                })\\n                .catch((error) => {\\n                  console.error('Connection error', error)\\n                })\\n            }\\n\\n\\n            if (index === objToUse.dashboards.length - 1) {\\n              setTimeout(() => setIFrame(1), 1000)\\n            }\\n          })\\n        }\\n        setApiContent(objToUse)\\n      } else if (lookerContent.type === 'explore' &&\\n        lookerUser.user_attributes.permission_level === 'premium' &&\\n        value === 1) {\\n        // console.log('inside else ifff')\\n        let exploreId = lookerContent.id;\\n        // console.log('exploreId', exploreId)\\n        $(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`)).html('');\\n        //separate logic for embedding explore with qid vs. no qid\\n        if (qid) {\\n          // console.log('qid ifff')\\n          LookerEmbedSDK.createExploreWithId(exploreId)\\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\\n            .withClassName('exploreIframe')\\n            .withParams({\\n              qid: qid\\n            })\\n            .on('explore:state:changed', (event) => {\\n            })\\n            .build()\\n            .connect()\\n            .then((explore) => {\\n              console.log('explore', explore)\\n              // setTimeout(() => {\\n              setIFrame(1)\\n              setExploreObj(explore)\\n              // }, 1000)\\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\\n              setQid(null)\\n            })\\n            .catch((error) => {\\n              console.error('Connection error', error)\\n            })\\n        } else {\\n          // console.log('qid else')\\n          LookerEmbedSDK.createExploreWithId(exploreId)\\n            .appendTo(validIdHelper(`#embedContainer-${demoComponentType}-${lookerContent.id}`))\\n            .withClassName('exploreIframe')\\n            .on('explore:state:changed', (event) => {\\n            })\\n            .build()\\n            .connect()\\n            .then((explore) => {\\n              // console.log('explore', explore)\\n              // setTimeout(() => {\\n              setIFrame(1)\\n              setExploreObj(explore)\\n              // }, 1000)\\n              LookerEmbedSDK.init(`https://${lookerHost}.looker.com`);\\n              // setQid(null)\\n            })\\n            .catch((error) => {\\n              console.error('Connection error', error)\\n            })\\n        }\\n      }\\n      // else console.log('ellse')\\n    })\\n  }\\n\\n  return (\\n    <div className={`${classes.root} demoComponent`}\\n      style={{ height }}>\\n      <Card elevation={1} className={`\\n      ${classes.padding30} \\n      ${classes.height100Percent}\\n      ${classes.overflowYScroll}`\\n      }\\n      >\\n        <Grid container\\n          key={validIdHelper(type)} >\\n          <div className={classes.root}>\\n            {iFrameExists ? '' :\\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                <Card className={`${classes.card} ${classes.flexCentered}`}\\n                  elevation={0}\\n                  mt={2}\\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                  <CircularProgress className={classes.circularProgress} />\\n                </Card>\\n              </Grid>\\n            }\\n\\n            {/* additional loading logic, need embedContainer to exist but want it hidden until iFrame has content...*/}\\n            <Box className={iFrameExists ? `` : `${classes.hidden}`}>\\n              <AppBar position=\\\"static\\\" elevation={0}>\\n                <Tabs\\n                  className={classes.tabs}\\n                  value={value}\\n                  onChange={handleChange}\\n                  aria-label=\\\"simple tabs example\\\">\\n                  {tabContent.map((item, index) => (\\n                    <Tab\\n                      key={`${validIdHelper(demoComponentType + '-tab-' + index)}`}\\n                      label={index == 1 ?\\n                        <div>\\n\\n                          {lookerUser.user_attributes.permission_level != 'premium' ?\\n                            <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} /> : <Icon className={`fa fa-plus ${classes.faSm} ${classes.mr12}`} />}\\n                          {item.label}\\n                        </div> :\\n                        item.label}\\n                      className={value === 1 && index === 1 ? `${classes.hidden}` : index == 1 ? `${classes.mlAuto}` : ``}\\n                      style={index === 1 ? {\\n                        backgroundColor: '#5896E6',\\n                        borderRadius: '4px',\\n                        color: '#fff',\\n                        opacity: '1.0'\\n                      } : {}}\\n                      {...a11yProps(index)} />\\n                  ))}\\n                </Tabs>\\n              </AppBar>\\n              <Box className=\\\"tabPanelContainer\\\">\\n                <Grid container\\n                  spacing={3}\\n                  className={`${classes.noContainerScroll}`}>\\n                  {codeShow ?\\n                    <Grid item sm={6}\\n                      className={`${classes.positionFixedTopRight}`}\\n                    >\\n                      <CodeFlyout {...props}\\n                        classes={classes}\\n                        lookerUser={lookerUser}\\n                        height={height}\\n                      />\\n                    </Grid> : ''}\\n                  {tabContent.map((tabContentItem, tabContentItemIndex) => (\\n                    <TabPanel\\n                      key={`${validIdHelper(demoComponentType + '-tabPanel-' + tabContentItemIndex)}`}\\n                      value={value}\\n                      index={tabContentItemIndex}\\n                      style={{ width: '100%' }} //weird\\n                    >\\n                      <Grid container>\\n                        {\\n                          tabContentItemIndex === 0\\n                            ?\\n                            <React.Fragment\\n                              key={`${validIdHelper(demoComponentType + '-outerFragment-' + tabContentItemIndex)}`}>\\n                              <Grid item sm={4} >\\n                                <ApiHighlight height={500} classes={classes}>\\n                                  <TreeSideBar {...{\\n                                    togglePayWallModal,\\n                                    classes,\\n                                    demoComponentType,\\n                                    tabContent,\\n                                    tabContentItemIndex,\\n                                    action,\\n                                    apiContent,\\n                                    ...props\\n                                  }}\\n                                  />\\n                                </ApiHighlight>\\n                              </Grid>\\n                              <Grid item sm={8} >\\n                                <EmbedHighlight classes={classes}>\\n                                  <div\\n                                    className={`embedContainer ${validIdHelper(demoComponentType)}`}\\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                  >\\n                                  </div>\\n                                </EmbedHighlight>\\n                              </Grid>\\n                            </React.Fragment>\\n                            :\\n                            <Grid item sm={12} >\\n                              {/* couldn't get this to work */}\\n                              {/* {Object.keys(exploreObj).length ?\\n                                <EmbedHighlight classes={classes}>\\n                                  <div\\n                                    className=\\\"embedContainer\\\"\\n                                    id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                    key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                  >\\n                                  </div>\\n                                </EmbedHighlight> :\\n                                <Card className={`${classes.card} ${classes.flexCentered}`}\\n                                  elevation={0}\\n                                  mt={2}\\n                                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                                  <CircularProgress className={classes.circularProgress} />\\n                                </Card>} */}\\n                              <EmbedHighlight classes={classes}>\\n                                <div\\n                                  className=\\\"embedContainer\\\"\\n                                  id={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                  key={validIdHelper(`embedContainer-${demoComponentType}-${tabContentItem.id}`)}\\n                                >\\n                                </div>\\n                              </EmbedHighlight>\\n                            </Grid>\\n                        }\\n                      </Grid>\\n                    </TabPanel>\\n                  ))}</Grid>\\n              </Box>\\n            </Box >\\n          </div>\\n        </Grid >\\n      </Card>\\n    </div >\\n  )\\n}\\n\\n\\nfunction TreeSideBar(props) {\\n  const { staticContent, staticContent: { lookerContent }, classes, demoComponentType, tabContent, tabContentItemIndex, action, apiContent, lookerUser, togglePayWallModal } = props\\n  const sharedFolderId = lookerContent[0].type === 'folder' ? lookerContent[0].id : '';\\n  let treeCounter = 0;\\n  const [selected, setSelected] = useState(2);\\n  const expandedArr = Object.keys(apiContent).length ? [\\\"1\\\", \\\"\\\" + (2 + apiContent[Object.keys(apiContent)[0]].length)] : [];\\n  const [expanded, setExpanded] = useState(expandedArr);\\n\\n  const handleToggle = (event, nodeIds) => {\\n    setExpanded(nodeIds);\\n  }\\n\\n  const handleSelect = (event, nodeIds) => {\\n    setSelected(nodeIds);\\n  };\\n\\n\\n  useEffect(() => {\\n    setExpanded(expandedArr);\\n    if (selected !== 2) setSelected(2)\\n    // let innerTreeItemArray = $(\\\".innerTreeItem\\\");\\n    // console.log('innerTreeItemArray', innerTreeItemArray)\\n    // for (let i = 0; i < innerTreeItemArray.length; i++) {\\n    //   console.log('inside forrr', i)\\n    //   if (innerTreeItemArray[i].classList.contains('Mui-selected')) {\\n    //     console.log('inside iffff')\\n    //     innerTreeItemArray[i].classList.remove('Mui-selected')\\n    //   } else console.log('elllse')\\n    // }\\n  }, [apiContent]);\\n\\n\\n  return (\\n    <TreeView\\n      className={classes.tree}\\n      defaultCollapseIcon={<ExpandMoreIcon />}\\n      defaultExpandIcon={<ChevronRightIcon />}\\n      expanded={expanded}\\n      onNodeToggle={handleToggle}\\n      onNodeSelect={handleSelect}\\n    // multiSelect={false}\\n    >\\n      {apiContent ? Object.keys(apiContent).map((key, outerIndex) => (\\n        <React.Fragment\\n          key={`${validIdHelper(demoComponentType + '-innerFragment-' + outerIndex)}`}>\\n          <TreeItem\\n            key={`${validIdHelper(demoComponentType + '-outerTreeItem-' + outerIndex)}`}\\n            nodeId={\\\"\\\" + (treeCounter += 1)}\\n            // treecounter={treeCounter}\\n            label={_.capitalize(key)}\\n            icon={<Icon className={`fa fa-folder ${classes.icon}`} />}\\n            disabled={apiContent[key].length ? false : true}\\n          >\\n            {\\n              apiContent[key].length ?\\n                apiContent[key].map((item, index) => (\\n                  <TreeItem\\n                    key={`${validIdHelper(demoComponentType + '-innerTreeItem-' + treeCounter)}`}\\n                    nodeId={\\\"\\\" + (treeCounter += 1)}\\n                    treecounter={treeCounter}\\n                    selected={selected === treeCounter}\\n                    className={selected === treeCounter ? `Mui-selected innerTreeItem ${classes.whiteSpaceNoWrap}` : `innerTreeItem ${classes.whiteSpaceNoWrap}`}\\n                    contentid={item.id}\\n                    label={item.folder_id === sharedFolderId &&\\n                      key === 'looks' ?\\n                      <div\\n                        id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\\n                        key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\\n                        className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}\\n                      >\\n                        {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\\n                        <Grid container>\\n                          <Grid item sm={8} className={`${classes.overflowHidden}`}>\\n                            {item.title}</Grid>\\n                          <Grid item sm={4}>\\n                            <Button\\n                              id={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\\n                              key={`${validIdHelper(demoComponentType + '-innerTreeItem-Explore' + treeCounter)}`}\\n                              size=\\\"small\\\"\\n                              className={`${classes.ml12} ${classes.childHoverVisibility}`}\\n                              onClick={(event) => {\\n                                if (lookerUser.user_attributes.permission_level === 'premium') {\\n                                  action(\\n                                    key.substring(0, key.length - 1),\\n                                    item.id,\\n                                    'explore',\\n                                    item.client_id,\\n                                    tabContent[tabContentItemIndex + 1].id,\\n                                    validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\\n                                  );\\n                                  event.stopPropagation();\\n                                } else {\\n                                  // togglePayWallModal();\\n\\n                                  togglePayWallModal({\\n                                    'show': true,\\n                                    'permissionNeeded': 'explore'\\n                                  });\\n                                }\\n                              }\\n                              }\\n                              color=\\\"default\\\"\\n                            >\\n                              {lookerUser.user_attributes.permission_level === 'premium' ? 'Explore' : <div> <Icon className={`fa fa-lock ${classes.faSm} ${classes.mr12}`} />Explore</div>}\\n                            </Button>\\n                          </Grid>\\n                        </Grid>\\n\\n\\n                      </div>\\n                      : key === 'looks' ?\\n                        <div\\n                          id={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\\n                          key={`${validIdHelper(demoComponentType + '-innerTreeItem-LabelContainer' + treeCounter)}`}\\n                          className={`${classes.labelRoot} ${classes.parentHoverVisibility}`}>\\n                          <Grid container>\\n                            <Grid item sm={6} className={`${classes.overflowHidden}`}>\\n                              {/* {item.title.length > 15 ? item.title.substring(0, 15) + '...' : item.title} */}\\n                              {item.title}\\n                            </Grid>\\n                            <Grid item sm={6}>\\n                              <Button\\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-EditButton' + treeCounter)}`}\\n                                size=\\\"small\\\"\\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\\n                                onClick={(event) => {\\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\\n                                    // setSelected(treeCounter);\\n                                    action(\\n                                      key.substring(0, key.length - 1),\\n                                      item.id,\\n                                      'edit',\\n                                      item.client_id,\\n                                      tabContent[tabContentItemIndex + 1].id,\\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\\n                                    );\\n                                    event.stopPropagation();\\n                                  } else {\\n                                    // togglePayWallModal();\\n\\n                                    togglePayWallModal({\\n                                      'show': true,\\n                                      'permissionNeeded': 'explore'\\n                                    });\\n                                  }\\n                                }\\n                                }\\n                                color=\\\"primary\\\"\\n                              >\\n                                Edit\\n                                                                                            </Button>\\n                              <Button\\n                                id={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\\n                                key={`${validIdHelper(demoComponentType + '-innerTreeItem-DeleteButton' + treeCounter)}`}\\n                                size=\\\"small\\\"\\n                                className={`${classes.ml12} ${classes.childHoverVisibility}`}\\n                                onClick={(event) => {\\n                                  if (lookerUser.user_attributes.permission_level === 'premium') {\\n                                    // setSelected(treeCounter);\\n                                    action(\\n                                      key.substring(0, key.length - 1),\\n                                      item.id,\\n                                      'delete',\\n                                      item.client_id,\\n                                      tabContent[tabContentItemIndex + 1].id,\\n                                      validIdHelper(`embedContainer-${demoComponentType}-${tabContent[tabContentItemIndex + 1].id}`)\\n                                    );\\n                                    event.stopPropagation();\\n                                  } else {\\n                                    // togglePayWallModal();\\n\\n                                    togglePayWallModal({\\n                                      'show': true,\\n                                      'permissionNeeded': 'explore'\\n                                    });\\n                                  }\\n                                }\\n                                }\\n                                color=\\\"secondary\\\"\\n                              >\\n                                Delete\\n                                                                                            </Button>\\n                            </Grid>\\n                          </Grid>\\n\\n                        </div>\\n                        : <Grid container><Grid item sm={12}>{item.title}</Grid></Grid>\\n                    }\\n                    onClick={() => {\\n                      // setSelected(treeCounter)\\n                      action(\\n                        key.substring(0, key.length - 1), item.id)\\n                    }} />\\n\\n                ))\\n                :\\n                ''\\n            }\\n          </TreeItem>\\n\\n        </React.Fragment>\\n      )) : ''}\\n    </TreeView>\\n  )\\n}\";","import { makeStyles } from '@material-ui/core/styles';\nimport { grey, orange } from '@material-ui/core/colors';\n\nconst greyPrimary = grey[400];\nconst greySecondary = grey[100];\nconst orangePrimary = orange[400];\nconst orangeSecondary = orange[100];\n\nexport default makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n    overflow: 'scroll',\n    borderRadius: '8px'\n  },\n  heading: {\n    fontSize: theme.typography.pxToRem(15),\n    fontWeight: theme.typography.fontWeightRegular,\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  hidden: {\n    visibility: 'hidden',\n    position: 'absolute', //hack for obscuring other elements within Box\n    zIndex: -1\n  },\n  tabs: {\n    backgroundColor: 'white',\n    color: '#6c757d'\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400,\n  },\n  icon: {\n    marginRight: 12,\n    fontSize: '1rem',\n    overflow: 'visible'\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  mt12: {\n    marginTop: 12\n  },\n  w100: {\n    width: '100%'\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  // table: {\n  //   minWidth: 650,\n  // },\n  // tableContainer: {\n  //   maxHeight: 650,\n  // },\n  visuallyHidden: {\n    border: 0,\n    clip: 'rect(0 0 0 0)',\n    height: 1,\n    margin: -1,\n    overflow: 'hidden',\n    padding: 0,\n    position: 'absolute',\n    top: 20,\n    width: 1,\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  skeleton: {\n    minWidth: 275,\n    minHeight: 600,\n  },\n  card: {\n    minWidth: 275,\n    minHeight: 400\n  },\n  textCenter: {\n    textAlign: 'center'\n  },\n  bluePrimary: {\n    backgroundColor: 'rgba(69, 149, 236, 1)'\n  },\n  blueSecondary: {\n    backgroundColor: 'rgba(69, 149, 236, .5)',\n  },\n  orangePrimary: {\n    backgroundColor: 'rgba(243, 167, 89, 1)'\n  },\n  orangeSecondary: {\n    backgroundColor: 'rgba(243, 167, 89, .5)'\n  },\n  positionTopRight: {\n    position: 'absolute',\n    top: -30,\n    right: -50,\n    bottom: 0,\n    zIndex: 100\n  },\n  positionRelative: {\n    position: 'relative'\n  },\n  bottomBarSpacer: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  maxHeight600: {\n    maxHeight: 600,\n    overflow: 'scroll'\n  },\n  padding30: {\n    padding: 30\n  },\n  m12: {\n    margin: 12\n  },\n  m6: {\n    margin: 6\n  },\n  height100Percent: {\n    height: '100%',\n    overflow: 'scroll'\n  },\n  padding20: {\n    padding: 20\n  },\n  positionFixedTopRight: {\n    position: 'fixed',\n    top: 88,\n    right: 24,\n    bottom: 0,\n    zIndex: 100,\n  },\n  codeFlyoutContainer: {\n    backgroundColor: 'rgb(40, 42, 54)',\n    overflow: 'scroll',\n    borderRadius: '0 8px 8px 0'\n  },\n  padding10: {\n    padding: 10\n  },\n  overflowScroll: {\n    overflow: 'scroll'\n  },\n  overflowYScroll: {\n    overflowY: 'scroll',\n    overflowX: 'hidden'\n  },\n  noContainerScroll: {\n    width: '100%',\n    margin: 0\n  }\n}));","import React from 'react';\nimport { Typography, Box } from '@material-ui/core'\nimport PropTypes from 'prop-types';\n\nexport function TabPanel(props) {\n    const { children, value, index, ...other } = props;\n\n    return (\n        <Typography\n            component=\"div\"\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n            aria-labelledby={`simple-tab-${index}`}\n            {...other}\n        >\n            <Box p={3}>{children}</Box>\n        </Typography>\n    );\n}\n\nTabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired,\n};\n\nexport function a11yProps(index) {\n    return {\n        id: `simple-tab-${index}`,\n        'aria-controls': `simple-tabpanel-${index}`,\n    };\n}\n\nexport function descendingComparator(a, b, orderBy) {\n    if (a[orderBy] && b[orderBy] && b[orderBy].value < a[orderBy].value) {\n        return -1;\n    }\n    if (a[orderBy] && b[orderBy] && b[orderBy].value > a[orderBy].value) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function getComparator(order, orderBy) {\n    return order === 'desc'\n        ? (a, b) => descendingComparator(a, b, orderBy)\n        : (a, b) => -descendingComparator(a, b, orderBy);\n}\n\nexport function stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n        const order = comparator(a[0], b[0]);\n        if (order !== 0) return order;\n        return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n}","import $ from 'jquery';\nimport _ from 'lodash';\nimport React, { useState, useEffect, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button,\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\n} from '@material-ui/core'\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\nimport CodeFlyout from '../CodeFlyout';\nimport rawSampleCode from '!!raw-loader!./QueryBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\nimport useStyles from './styles.js';\nimport { ApiHighlight } from '../../Highlights/Highlight';\nimport { TabPanel, a11yProps, descendingComparator, getComparator, stableSort } from './helpers.js';\nimport AppContext from '../../../AppContext';\nconst { validIdHelper, prettifyString } = require('../../../tools');\n\nexport default function QueryBuilder(props) {\n  // console.log('QueryBuilder')\n\n  const topBarBottomBarHeight = 112;\n  const sideBarWidth = 240 + 152; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\n  const [value, setValue] = useState(0);\n  const [apiContent, setApiContent] = useState({});\n  const [clientSideCode, setClientSideCode] = useState('');\n  const [serverSideCode, setServerSideCode] = useState('');\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\n  const classes = useStyles();\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser } = props;\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\n\n  const handleChange = (event, newValue) => {\n    handleTabChange(0);\n    setValue(newValue);\n  };\n\n  useEffect(() => {\n    // call this is filterBar instead to make field chip dynamic\n    // lookerContent.map(lookerContent => {\n    //   setTimeout(() => performLookerApiCalls(lookerContent.queryBody, lookerContent.resultFormat), 100);\n    // })\n    setClientSideCode(rawSampleCode);\n    // setApiContent([])\n  }, [lookerContent, lookerUser])\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", () => {\n      setHeight((window.innerHeight - topBarBottomBarHeight))\n      setWidth((window.innerWidth - sideBarWidth))\n    });\n  })\n\n\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\n    // console.log('performLookerApiCalls')\n    // console.log('newQuery', newQuery)\n    // console.log('resultFormat', resultFormat)\n    // console.log('lookerContent', lookerContent)\n    let apiContentCopy = { ...apiContent }\n    apiContentCopy.status = 'running';\n    setApiContent(apiContentCopy)\n\n    let timer = Date.now();\n\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\n      body: {\n        query_id: lookerCreateQueryResponseData.id,\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\n      }\n    }))\n\n    let taskInterval = setInterval(async () => {\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      }));\n\n      if (lookerCheckTaskResponseData.status === 'complete') {\n        clearInterval(taskInterval);\n        setApiContent(lookerCheckTaskResponseData)\n        // setServerSideCode(lookerCreateTaskResponseData.code)\n      }\n\n      //time out after 30 seconds\n      if ((timer + (30 * 1000)) < Date.now()) {\n        clearInterval()\n        setApiContent([])\n      }\n    }, 1000)\n  }\n\n  return (\n    <div className={`${classes.root} demoComponent`}\n      style={{ height }}>\n      <Card elevation={1} className={`\n      ${classes.padding30} \n      ${classes.height100Percent}\n      ${classes.overflowYScroll}`\n      }\n      >\n        <Grid container\n          key={validIdHelper(type)} >\n          <div className={`${classes.root}`}>\n            <Grid item sm={12}>\n              <FilterBar {...props}\n                classes={classes}\n                action={performLookerApiCalls}\n                corsApiCall={corsApiCall}\n              />\n            </Grid>\n            {apiContent.status === 'running' ?\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                <Card className={`${classes.card} ${classes.flexCentered}`}\n                  elevation={0}\n                  mt={2}\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\n                  <CircularProgress className={classes.circularProgress} />\n                </Card>\n              </Grid>\n              : apiContent.data && apiContent.data.length ?\n                <Box>\n                  <Grid container\n                    spacing={3}\n                    className={`${classes.noContainerScroll}`}>\n                    {codeShow ?\n                      <Grid item sm={6}\n                        className={`${classes.positionFixedTopRight}`}\n                      >\n                        <CodeFlyout {...props}\n                          classes={classes}\n                          lookerUser={lookerUser}\n                          height={height}\n                        />\n                      </Grid> : ''}\n                    <Divider className={classes.divider} />\n                    <Grid item sm={12}>\n                      <Box className={`${classes.w100}`} mt={2}>\n                        < EnhancedTable\n                          {...props}\n                          classes={classes}\n                          rows={apiContent.data}\n                          lookerContent={lookerContent}\n                          width={width}\n                        />\n                      </Box>\n                    </Grid>\n                  </Grid>\n                </Box>\n                :\n                <Grid item sm={12} >\n                  <Typography variant=\"h6\" component=\"h6\" className={`${classes.gridTitle} ${classes.textCenter}`}>\n                    No results found, try a new query<br />\n                  </Typography>\n                </Grid>\n            }\n          </div >\n        </Grid >\n      </Card>\n    </div >\n  )\n}\n/**\n * seems inconsistent that filterbar performs performLookerApiCalls here??\n */\n\nfunction FilterBar(props) {\n  // console.log('FilterBar');\n  const { staticContent, staticContent: { lookerContent }, classes, action, lookerUser, corsApiCall } = props;\n  let measureCounter = 0;\n  let dimensionCounter = 0;\n\n\n  const initializeFieldChipDataHelper = () => {\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\n      return {\n        key: 'fieldChipData' + index,\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\n        datalabel: item,\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\n        fieldType: lookerContent[0].fieldType[item]\n      }\n    })\n    return initializedFields;\n  }\n\n  const [expanded, setExpanded] = useState(true);\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\n    return {\n      key: 'filter' + index,\n      label: key,\n      value: lookerContent[0].queryBody.filters[key],\n      type: lookerContent[0].filterType[key]\n    }\n  }) : '')\n\n  const handleExpansionPanel = (event, newValue) => {\n    setExpanded(expanded ? false : true);\n  };\n\n  const handleFieldChipClick = (chip, index) => {\n    let updatedFieldsChipData = [...fieldsChipData]\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\n    setFieldsChipData(updatedFieldsChipData)\n    setQueryModified(true)\n  }\n\n  const handleSelectChange = (index, newValue) => {\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[index].value = newValue;\n    setFilterData(updatedFiltersData)\n    setQueryModified(true)\n  }\n\n  const handleQuerySubmit = (event) => {\n    if (queryModified || queryShouldRun) {\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\n      let currentFilters = {}; //needs to be object\n      filtersData.map((item, index) => {\n        currentFilters[item.label] = item.value\n      })\n      let newQueryObj = { ...lookerContent[0].queryBody };\n      newQueryObj.fields = newFields;\n      newQueryObj.filters = currentFilters;\n\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\n\n      setQueryModified(false)\n      setQueryShouldRun(false)\n    } //else console.log('elllse')\n  }\n\n\n\n  useEffect(() => {\n    // console.log('useEffect lookerUser')\n    const lookerUserTimeHorizonMap = {\n      'basic': 'last 182 days',\n      'advanced': 'last 365 days',\n      'premium': 'last 730 days' //before today\n    }\n    let updatedFiltersData = [...filtersData]\n    updatedFiltersData[3].value = lookerUserTimeHorizonMap[lookerUser.user_attributes.permission_level] || \"182 days\";\n    setFilterData(updatedFiltersData);\n    setFieldsChipData(initializeFieldChipDataHelper())\n\n    setQueryShouldRun(true);\n  }, [lookerUser]);\n\n  useEffect(() => {\n    // console.log('useEffect queryShouldRun')\n    if (queryShouldRun) {\n      handleQuerySubmit();\n      setQueryModified(false);\n      setQueryShouldRun(false);\n    }\n  }, [queryShouldRun])\n\n\n  const datePermissionMap = {\n    'basic': [\"1 week\", \"1 month\", \"3 months\", \"last 182 days\"]\n  }\n  datePermissionMap.advanced = [...datePermissionMap.basic, \"last 365 days\"]\n  datePermissionMap.premium = [...datePermissionMap.advanced, \"last 730 days\"]\n\n  return (\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMore />}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <Grid container spacing={3}>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Select Metrics:\n      {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'measure' ?\n                      <Chip\n                        key={item.label}\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        measurecounter={measureCounter += 1}\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n          <Grid item sm={12}>\n            <Typography variant=\"subtitle1\">\n              Group By:\n                          {fieldsChipData.length ?\n                fieldsChipData.map((item, index) => {\n                  return (\n                    item.fieldType === 'dimension' ?\n                      <Chip\n                        key={item.label}\n                        dimensioncounter={dimensionCounter += 1}\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\n                        datalabel={item.label}\n                        onClick={() => handleFieldChipClick(item, index)}\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\n                      /> : ''\n                  )\n                }) : ''\n              }<br />\n            </Typography>\n          </Grid>\n\n          <Grid item sm={3}>\n            <Typography variant=\"subtitle1\">\n              Filter By:\n                      </Typography>\n            {filtersData.length ? filtersData.map((item, index) => {\n              return (\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\n                  {\n                    item.type === 'yesno' ?\n                      <>\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n                        <Select\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\n                          id={validIdHelper(`${item.label}FilterSelect`)}\n                          value={item.value}\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\n                        >\n                          <MenuItem value=\"Yes\">Yes</MenuItem>\n                          <MenuItem value=\"No\">No</MenuItem>\n                          <MenuItem value=\"All\">All</MenuItem>\n                        </Select>\n                      </>\n                      : item.type === 'date' ?\n                        <>\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\n\n                          <Select\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\n                            id={validIdHelper(`${item.label}FilterSelect`)}\n                            value={item.value || '6 months'}\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\n                          >\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\n                            )) : ''}\n                          </Select>\n                        </>\n                        : ''\n                  }\n                </FormControl>\n              )\n            }) : ''}\n          </Grid>\n          <Grid item sm={9}>\n            <br />\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              size=\"large\"\n              onClick={handleQuerySubmit}\n              disabled={queryModified ? false : true}\n            >Run Query</Button></Grid>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  )\n}\n\nfunction EnhancedTableHead(props) {\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\n  const createSortHandler = (property) => (event) => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow>\n        {Object.keys(rows[0]).map((key, index) => (\n          <TableCell\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\n            align={key.numeric ? 'right' : 'left'}\n            padding={key.disablePadding ? 'none' : 'default'}\n            sortDirection={orderBy === key ? order : false}\n          >\n            <TableSortLabel\n              active={orderBy === key}\n              direction={orderBy === key ? order : 'asc'}\n              onClick={createSortHandler(key)}\n            >\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\n              {orderBy === key ? (\n                <span className={classes.visuallyHidden}>\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\n                </span>\n              ) : null}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n      </TableRow>\n    </TableHead>\n  );\n}\n\nEnhancedTableHead.propTypes = {\n  classes: PropTypes.object.isRequired,\n  // numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  // onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n};\n\nfunction EnhancedTable(props) {\n  const { rows, classes, lookerContent, width } = props;\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\n  const [page, setPage] = React.useState(0);\n  const [dense, setDense] = React.useState(true);\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const handleChangeDense = (event) => {\n    setDense(event.target.checked);\n  };\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n  return (\n    <div className={`${classes.root} ${classes.padding10}`}>\n      <ApiHighlight classes={classes} >\n        <TableContainer style={{ maxWidth: width }}>\n          <Table\n            className={classes.table}\n            aria-labelledby=\"tableTitle\"\n            size={dense ? 'small' : 'medium'}\n            aria-label=\"enhanced table\"\n          >\n            <EnhancedTableHead\n              {...props}\n              classes={classes}\n              order={order}\n              orderBy={orderBy}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getComparator(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  return (\n                    <TableRow\n                      hover\n                      key={validIdHelper('TableRow-' + index)}\n                      id={validIdHelper('TableRow-' + index)}>\n                      {Object.keys(row).map((key, index) => (\n                        <TableCell\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\n                          align=\"right\">\n                          {row[key].rendered ? row[key].rendered : row[key].value}\n                        </TableCell>\n                      ))}\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n      </ApiHighlight>\n      <Grid container>\n        <Grid item sm={6}>\n          <FormControlLabel\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\n            label=\"Compact\"\n          /></Grid>\n        <Grid item sm={6}>\n          <TablePagination\n            rowsPerPageOptions={[5, 10, 25, 50]}\n            component=\"div\"\n            count={rows.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          /></Grid>\n      </Grid>\n      <div className={classes.bottomBarSpacer} />\n    </div>\n  );\n}","export default \"import $ from 'jquery';\\nimport _ from 'lodash';\\nimport React, { useState, useEffect, useContext } from 'react';\\nimport PropTypes from 'prop-types';\\nimport {\\n  AppBar, Tabs, Tab, Typography, Box, Grid, Icon, CircularProgress, Card, Button,\\n  ExpansionPanel, ExpansionPanelSummary, ExpansionPanelDetails, InputLabel, MenuItem, FormControl,\\n  Select, Table, TableBody, TableCell, TableContainer, TableHead, TablePagination, TableRow,\\n  TableSortLabel, FormControlLabel, Switch, Chip, Divider\\n} from '@material-ui/core'\\nimport { ExpandMore, Search, Done } from '@material-ui/icons';\\nimport CodeFlyout from '../CodeFlyout';\\nimport rawSampleCode from '!!raw-loader!./QueryBuilder.js'; // eslint-disable-line import/no-webpack-loader-syntax\\nimport useStyles from './styles.js';\\nimport { ApiHighlight } from '../../Highlights/Highlight';\\nimport { TabPanel, a11yProps, descendingComparator, getComparator, stableSort } from './helpers.js';\\nimport AppContext from '../../../AppContext';\\nconst { validIdHelper, prettifyString } = require('../../../tools');\\n\\nexport default function QueryBuilder(props) {\\n  // console.log('QueryBuilder')\\n\\n  const topBarBottomBarHeight = 112;\\n  const sideBarWidth = 240 + 152; //24 + 24 + 30 + 30 + 12 + 12 + 10 + 10\\n  const [value, setValue] = useState(0);\\n  const [apiContent, setApiContent] = useState({});\\n  const [clientSideCode, setClientSideCode] = useState('');\\n  const [serverSideCode, setServerSideCode] = useState('');\\n  const [height, setHeight] = useState((window.innerHeight - topBarBottomBarHeight));\\n  const [width, setWidth] = useState((window.innerWidth - sideBarWidth));\\n  const classes = useStyles();\\n  const { staticContent, staticContent: { lookerContent }, staticContent: { type }, activeTabValue, handleTabChange, lookerUser } = props;\\n  const { togglePayWallModal, show, codeShow, sdk, corsApiCall } = useContext(AppContext)\\n\\n  const handleChange = (event, newValue) => {\\n    handleTabChange(0);\\n    setValue(newValue);\\n  };\\n\\n  useEffect(() => {\\n    // call this is filterBar instead to make field chip dynamic\\n    // lookerContent.map(lookerContent => {\\n    //   setTimeout(() => performLookerApiCalls(lookerContent.queryBody, lookerContent.resultFormat), 100);\\n    // })\\n    setClientSideCode(rawSampleCode);\\n    // setApiContent([])\\n  }, [lookerContent, lookerUser])\\n\\n  useEffect(() => {\\n    window.addEventListener(\\\"resize\\\", () => {\\n      setHeight((window.innerHeight - topBarBottomBarHeight))\\n      setWidth((window.innerWidth - sideBarWidth))\\n    });\\n  })\\n\\n\\n  const performLookerApiCalls = async (newQuery, resultFormat) => {\\n    // console.log('performLookerApiCalls')\\n    // console.log('newQuery', newQuery)\\n    // console.log('resultFormat', resultFormat)\\n    // console.log('lookerContent', lookerContent)\\n    let apiContentCopy = { ...apiContent }\\n    apiContentCopy.status = 'running';\\n    setApiContent(apiContentCopy)\\n\\n    let timer = Date.now();\\n\\n    let lookerCreateQueryResponseData = await sdk.ok(sdk.create_query(newQuery))\\n    let lookerCreateTaskResponseData = await sdk.ok(sdk.create_query_task({\\n      body: {\\n        query_id: lookerCreateQueryResponseData.id,\\n        result_format: resultFormat || 'json_detail'//lookerContent[0].resultFormat || 'json'\\n      }\\n    }))\\n\\n    let taskInterval = setInterval(async () => {\\n      let lookerCheckTaskResponseData = await sdk.ok(sdk.query_task_results(lookerCreateTaskResponseData.id, {\\n        method: 'GET',\\n        headers: {\\n          Accept: 'application/json',\\n          'Content-Type': 'application/json'\\n        }\\n      }));\\n\\n      if (lookerCheckTaskResponseData.status === 'complete') {\\n        clearInterval(taskInterval);\\n        setApiContent(lookerCheckTaskResponseData)\\n        // setServerSideCode(lookerCreateTaskResponseData.code)\\n      }\\n\\n      //time out after 30 seconds\\n      if ((timer + (30 * 1000)) < Date.now()) {\\n        clearInterval()\\n        setApiContent([])\\n      }\\n    }, 1000)\\n  }\\n\\n  return (\\n    <div className={`${classes.root} demoComponent`}\\n      style={{ height }}>\\n      <Card elevation={1} className={`\\n      ${classes.padding30} \\n      ${classes.height100Percent}\\n      ${classes.overflowYScroll}`\\n      }\\n      >\\n        <Grid container\\n          key={validIdHelper(type)} >\\n          <div className={`${classes.root}`}>\\n            <Grid item sm={12}>\\n              <FilterBar {...props}\\n                classes={classes}\\n                action={performLookerApiCalls}\\n                corsApiCall={corsApiCall}\\n              />\\n            </Grid>\\n            {apiContent.status === 'running' ?\\n              <Grid item sm={12} style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                <Card className={`${classes.card} ${classes.flexCentered}`}\\n                  elevation={0}\\n                  mt={2}\\n                  style={{ height: height - 30 - ($('.MuiExpansionPanel-root:visible').innerHeight() || 0) }}>\\n                  <CircularProgress className={classes.circularProgress} />\\n                </Card>\\n              </Grid>\\n              : apiContent.data && apiContent.data.length ?\\n                <Box>\\n                  <Grid container\\n                    spacing={3}\\n                    className={`${classes.noContainerScroll}`}>\\n                    {codeShow ?\\n                      <Grid item sm={6}\\n                        className={`${classes.positionFixedTopRight}`}\\n                      >\\n                        <CodeFlyout {...props}\\n                          classes={classes}\\n                          lookerUser={lookerUser}\\n                          height={height}\\n                        />\\n                      </Grid> : ''}\\n                    <Divider className={classes.divider} />\\n                    <Grid item sm={12}>\\n                      <Box className={`${classes.w100}`} mt={2}>\\n                        < EnhancedTable\\n                          {...props}\\n                          classes={classes}\\n                          rows={apiContent.data}\\n                          lookerContent={lookerContent}\\n                          width={width}\\n                        />\\n                      </Box>\\n                    </Grid>\\n                  </Grid>\\n                </Box>\\n                :\\n                <Grid item sm={12} >\\n                  <Typography variant=\\\"h6\\\" component=\\\"h6\\\" className={`${classes.gridTitle} ${classes.textCenter}`}>\\n                    No results found, try a new query<br />\\n                  </Typography>\\n                </Grid>\\n            }\\n          </div >\\n        </Grid >\\n      </Card>\\n    </div >\\n  )\\n}\\n/**\\n * seems inconsistent that filterbar performs performLookerApiCalls here??\\n */\\n\\nfunction FilterBar(props) {\\n  // console.log('FilterBar');\\n  const { staticContent, staticContent: { lookerContent }, classes, action, lookerUser, corsApiCall } = props;\\n  let measureCounter = 0;\\n  let dimensionCounter = 0;\\n\\n\\n  const initializeFieldChipDataHelper = () => {\\n    let initializedFields = lookerContent[0].queryBody.fields.map((item, index) => {\\n      return {\\n        key: 'fieldChipData' + index,\\n        label: prettifyString(item.substring(item.lastIndexOf('.') + 1, item.length)),\\n        datalabel: item,\\n        selected: item === 'users.state' || item === 'users.country' || item === 'order_items.total_sale_price' ? true : false,\\n        fieldType: lookerContent[0].fieldType[item]\\n      }\\n    })\\n    return initializedFields;\\n  }\\n\\n  const [expanded, setExpanded] = useState(true);\\n  const [fieldsChipData, setFieldsChipData] = useState(lookerContent[0].queryBody ? initializeFieldChipDataHelper() : '');\\n  const [queryModified, setQueryModified] = useState(true); //set to true initially\\n  const [queryShouldRun, setQueryShouldRun] = useState(false); //for lookerUser useEffect\\n  const [filtersData, setFilterData] = useState(lookerContent[0].queryBody ? Object.keys(lookerContent[0].queryBody.filters).map((key, index) => {\\n    return {\\n      key: 'filter' + index,\\n      label: key,\\n      value: lookerContent[0].queryBody.filters[key],\\n      type: lookerContent[0].filterType[key]\\n    }\\n  }) : '')\\n\\n  const handleExpansionPanel = (event, newValue) => {\\n    setExpanded(expanded ? false : true);\\n  };\\n\\n  const handleFieldChipClick = (chip, index) => {\\n    let updatedFieldsChipData = [...fieldsChipData]\\n    updatedFieldsChipData[index].selected = updatedFieldsChipData[index].selected === false ? true : false\\n    setFieldsChipData(updatedFieldsChipData)\\n    setQueryModified(true)\\n  }\\n\\n  const handleSelectChange = (index, newValue) => {\\n    let updatedFiltersData = [...filtersData]\\n    updatedFiltersData[index].value = newValue;\\n    setFilterData(updatedFiltersData)\\n    setQueryModified(true)\\n  }\\n\\n  const handleQuerySubmit = (event) => {\\n    if (queryModified || queryShouldRun) {\\n      let newFields = fieldsChipData.filter(chip => chip.selected).map(item => item.datalabel);\\n      let currentFilters = {}; //needs to be object\\n      filtersData.map((item, index) => {\\n        currentFilters[item.label] = item.value\\n      })\\n      let newQueryObj = { ...lookerContent[0].queryBody };\\n      newQueryObj.fields = newFields;\\n      newQueryObj.filters = currentFilters;\\n\\n      corsApiCall(action, [newQueryObj, lookerContent[0].resultFormat]);\\n\\n      setQueryModified(false)\\n      setQueryShouldRun(false)\\n    } //else console.log('elllse')\\n  }\\n\\n\\n\\n  useEffect(() => {\\n    // console.log('useEffect lookerUser')\\n    const lookerUserTimeHorizonMap = {\\n      'basic': 'last 182 days',\\n      'advanced': 'last 365 days',\\n      'premium': 'last 730 days' //before today\\n    }\\n    let updatedFiltersData = [...filtersData]\\n    updatedFiltersData[3].value = lookerUserTimeHorizonMap[lookerUser.user_attributes.permission_level] || \\\"182 days\\\";\\n    setFilterData(updatedFiltersData);\\n    setFieldsChipData(initializeFieldChipDataHelper())\\n\\n    setQueryShouldRun(true);\\n  }, [lookerUser]);\\n\\n  useEffect(() => {\\n    // console.log('useEffect queryShouldRun')\\n    if (queryShouldRun) {\\n      handleQuerySubmit();\\n      setQueryModified(false);\\n      setQueryShouldRun(false);\\n    }\\n  }, [queryShouldRun])\\n\\n\\n  const datePermissionMap = {\\n    'basic': [\\\"1 week\\\", \\\"1 month\\\", \\\"3 months\\\", \\\"last 182 days\\\"]\\n  }\\n  datePermissionMap.advanced = [...datePermissionMap.basic, \\\"last 365 days\\\"]\\n  datePermissionMap.premium = [...datePermissionMap.advanced, \\\"last 730 days\\\"]\\n\\n  return (\\n    <ExpansionPanel expanded={expanded} onChange={handleExpansionPanel} elevation={0}>\\n      <ExpansionPanelSummary\\n        expandIcon={<ExpandMore />}\\n        aria-controls=\\\"panel1a-content\\\"\\n        id=\\\"panel1a-header\\\"\\n      >\\n        <Search /><Typography className={`${classes.heading} ${classes.ml12}`}>Build Query:</Typography>\\n        {/* <Typography className={classes.heading}>Build Query:</Typography> */}\\n      </ExpansionPanelSummary>\\n      <ExpansionPanelDetails>\\n        <Grid container spacing={3}>\\n          <Grid item sm={12}>\\n            <Typography variant=\\\"subtitle1\\\">\\n              Select Metrics:\\n      {fieldsChipData.length ?\\n                fieldsChipData.map((item, index) => {\\n                  return (\\n                    item.fieldType === 'measure' ?\\n                      <Chip\\n                        key={item.label}\\n                        // key={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\\n                        measurecounter={measureCounter += 1}\\n                        className={item.selected ? `${classes.orangePrimary} ${classes.m6}` : `${classes.m6}`}\\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\\n                        datalabel={item.label}\\n                        onClick={() => handleFieldChipClick(item, index)}\\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\\n                      /> : ''\\n                  )\\n                }) : ''\\n              }<br />\\n            </Typography>\\n          </Grid>\\n          <Grid item sm={12}>\\n            <Typography variant=\\\"subtitle1\\\">\\n              Group By:\\n                          {fieldsChipData.length ?\\n                fieldsChipData.map((item, index) => {\\n                  return (\\n                    item.fieldType === 'dimension' ?\\n                      <Chip\\n                        key={item.label}\\n                        dimensioncounter={dimensionCounter += 1}\\n                        className={item.selected ? `${classes.bluePrimary} ${classes.m6}` : `${classes.m6}`}\\n                        label={prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}\\n                        datalabel={item.label}\\n                        onClick={() => handleFieldChipClick(item, index)}\\n                        icon={item.selected ? <Done className={classes.dBlock} /> : <Done className={classes.dNone} />}\\n                      /> : ''\\n                  )\\n                }) : ''\\n              }<br />\\n            </Typography>\\n          </Grid>\\n\\n          <Grid item sm={3}>\\n            <Typography variant=\\\"subtitle1\\\">\\n              Filter By:\\n                      </Typography>\\n            {filtersData.length ? filtersData.map((item, index) => {\\n              return (\\n                <FormControl className={item.value.length ? classes.formControl : classes.hidden} key={validIdHelper(`${item.label}FormControl`)}>\\n                  {\\n                    item.type === 'yesno' ?\\n                      <>\\n                        <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\\n                        <Select\\n                          labelId={validIdHelper(`${item.label}FilterLabel`)}\\n                          id={validIdHelper(`${item.label}FilterSelect`)}\\n                          value={item.value}\\n                          onChange={(event) => handleSelectChange(index, event.target.value)}\\n                        >\\n                          <MenuItem value=\\\"Yes\\\">Yes</MenuItem>\\n                          <MenuItem value=\\\"No\\\">No</MenuItem>\\n                          <MenuItem value=\\\"All\\\">All</MenuItem>\\n                        </Select>\\n                      </>\\n                      : item.type === 'date' ?\\n                        <>\\n                          <InputLabel id={validIdHelper(`${item.label}FilterLabel`)}>{prettifyString(item.label.substring(item.label.lastIndexOf('.') + 1, item.label.length))}:</InputLabel>\\n\\n                          <Select\\n                            labelId={validIdHelper(`${item.label}FilterLabel`)}\\n                            id={validIdHelper(`${item.label}FilterSelect`)}\\n                            value={item.value || '6 months'}\\n                            onChange={(event) => handleSelectChange(index, event.target.value)}\\n                          >\\n                            {lookerUser.user_attributes.permission_level ? datePermissionMap[lookerUser.user_attributes.permission_level].map(item => (\\n                              <MenuItem key={validIdHelper(item)} value={item}>{_.capitalize(item)}</MenuItem>\\n                            )) : ''}\\n                          </Select>\\n                        </>\\n                        : ''\\n                  }\\n                </FormControl>\\n              )\\n            }) : ''}\\n          </Grid>\\n          <Grid item sm={9}>\\n            <br />\\n            <Button\\n              color=\\\"primary\\\"\\n              variant=\\\"contained\\\"\\n              size=\\\"large\\\"\\n              onClick={handleQuerySubmit}\\n              disabled={queryModified ? false : true}\\n            >Run Query</Button></Grid>\\n        </Grid>\\n      </ExpansionPanelDetails>\\n    </ExpansionPanel>\\n  )\\n}\\n\\nfunction EnhancedTableHead(props) {\\n  const { classes, onSelectAllClick, order, orderBy, numSelected, rowCount, onRequestSort, rows } = props;\\n  const createSortHandler = (property) => (event) => {\\n    onRequestSort(event, property);\\n  };\\n\\n  return (\\n    <TableHead>\\n      <TableRow>\\n        {Object.keys(rows[0]).map((key, index) => (\\n          <TableCell\\n            key={validIdHelper(key + '-TableHead-TableCell-' + index)}\\n            id={validIdHelper(key + '-TableHead-TableCell-' + index)}\\n            align={key.numeric ? 'right' : 'left'}\\n            padding={key.disablePadding ? 'none' : 'default'}\\n            sortDirection={orderBy === key ? order : false}\\n          >\\n            <TableSortLabel\\n              active={orderBy === key}\\n              direction={orderBy === key ? order : 'asc'}\\n              onClick={createSortHandler(key)}\\n            >\\n              {prettifyString(key.substring(key.lastIndexOf('.') + 1, key.length))}\\n              {orderBy === key ? (\\n                <span className={classes.visuallyHidden}>\\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\\n                </span>\\n              ) : null}\\n            </TableSortLabel>\\n          </TableCell>\\n        ))}\\n      </TableRow>\\n    </TableHead>\\n  );\\n}\\n\\nEnhancedTableHead.propTypes = {\\n  classes: PropTypes.object.isRequired,\\n  // numSelected: PropTypes.number.isRequired,\\n  onRequestSort: PropTypes.func.isRequired,\\n  // onSelectAllClick: PropTypes.func.isRequired,\\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\\n  orderBy: PropTypes.string.isRequired,\\n  rowCount: PropTypes.number.isRequired,\\n};\\n\\nfunction EnhancedTable(props) {\\n  const { rows, classes, lookerContent, width } = props;\\n  const [order, setOrder] = React.useState('asc');\\n  const [orderBy, setOrderBy] = React.useState(Object.keys(rows[0])[0]);\\n  const [page, setPage] = React.useState(0);\\n  const [dense, setDense] = React.useState(true);\\n  const [rowsPerPage, setRowsPerPage] = React.useState(25);\\n\\n  const handleRequestSort = (event, property) => {\\n    const isAsc = orderBy === property && order === 'asc';\\n    setOrder(isAsc ? 'desc' : 'asc');\\n    setOrderBy(property);\\n  };\\n\\n  const handleChangePage = (event, newPage) => {\\n    setPage(newPage);\\n  };\\n\\n  const handleChangeRowsPerPage = (event) => {\\n    setRowsPerPage(parseInt(event.target.value, 10));\\n    setPage(0);\\n  };\\n\\n  const handleChangeDense = (event) => {\\n    setDense(event.target.checked);\\n  };\\n\\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\\n  return (\\n    <div className={`${classes.root} ${classes.padding10}`}>\\n      <ApiHighlight classes={classes} >\\n        <TableContainer style={{ maxWidth: width }}>\\n          <Table\\n            className={classes.table}\\n            aria-labelledby=\\\"tableTitle\\\"\\n            size={dense ? 'small' : 'medium'}\\n            aria-label=\\\"enhanced table\\\"\\n          >\\n            <EnhancedTableHead\\n              {...props}\\n              classes={classes}\\n              order={order}\\n              orderBy={orderBy}\\n              onRequestSort={handleRequestSort}\\n              rowCount={rows.length}\\n            />\\n            <TableBody>\\n              {stableSort(rows, getComparator(order, orderBy))\\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\\n                .map((row, index) => {\\n                  return (\\n                    <TableRow\\n                      hover\\n                      key={validIdHelper('TableRow-' + index)}\\n                      id={validIdHelper('TableRow-' + index)}>\\n                      {Object.keys(row).map((key, index) => (\\n                        <TableCell\\n                          key={validIdHelper(key + '-TableBody-TableCell-' + index)}\\n                          id={validIdHelper(key + '-TableBody-TableCell-' + index)}\\n                          className={lookerContent[0].fieldType[key] === 'dimension' ? classes.blueSecondary : classes.orangeSecondary}\\n                          align=\\\"right\\\">\\n                          {row[key].rendered ? row[key].rendered : row[key].value}\\n                        </TableCell>\\n                      ))}\\n                    </TableRow>\\n                  );\\n                })}\\n              {emptyRows > 0 && (\\n                <TableRow style={{ height: (dense ? 33 : 53) * emptyRows }}>\\n                  <TableCell colSpan={6} />\\n                </TableRow>\\n              )}\\n            </TableBody>\\n          </Table>\\n        </TableContainer>\\n      </ApiHighlight>\\n      <Grid container>\\n        <Grid item sm={6}>\\n          <FormControlLabel\\n            control={<Switch checked={dense} onChange={handleChangeDense} />}\\n            label=\\\"Compact\\\"\\n          /></Grid>\\n        <Grid item sm={6}>\\n          <TablePagination\\n            rowsPerPageOptions={[5, 10, 25, 50]}\\n            component=\\\"div\\\"\\n            count={rows.length}\\n            rowsPerPage={rowsPerPage}\\n            page={page}\\n            onChangePage={handleChangePage}\\n            onChangeRowsPerPage={handleChangeRowsPerPage}\\n          /></Grid>\\n      </Grid>\\n      <div className={classes.bottomBarSpacer} />\\n    </div>\\n  );\\n}\";","import _ from 'lodash'\nimport React, { useState, useEffect, useContext } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppContext from '../../AppContext';\nimport {\n  Modal, Fade, Grid, Paper, Card, CardContent, CardActions, Button, Typography, Chip, Divider, List, ListItem, ListItemAvatar, Avatar, ImageIcon, ListItemText\n\n} from '@material-ui/core';\nimport { Rating } from '@material-ui/lab'\n\n\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport CheckIcon from '@material-ui/icons/Check';\nimport LookerUserPermissions from '../../lookerUserPermissions.json';\nconst { validIdHelper } = require('../../tools');\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    position: 'absolute',\n    width: 1000,\n    height: 604,\n    overflow: 'scroll',\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  card: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between',\n    // height: 520,\n    overflow: 'scroll',\n    cursor: 'pointer',\n    '&:hover': {\n      transform: 'scale(1.05)',\n      transition: 'transform .2s'\n    }\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  padding15: {\n    padding: 15\n  },\n  divider: {\n    marginTop: 15,\n    marginBottom: 15,\n    color: '#fff'\n  },\n  basic: {\n\n  },\n  advanced: {\n\n  },\n  premium: {\n    // backgroundColor: '#5F6BD8',\n    // color: '#ffffff'\n  },\n  font75: {\n    fontSize: '.75em'\n  },\n  font875: {\n    // fontSize: '.875em'\n  },\n  padding30: {\n    padding: 30\n  }\n}));\n\nfunction getModalStyle() {\n  const top = 10 //+ rand();\n  const left = 50 //+ rand();\n\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${left}%, -${top}%)`,\n  };\n}\n\n\nexport function MonetizationModal({ props, switchLookerUser }) {\n  const { payWallModal, togglePayWallModal, lookerUser } = useContext(AppContext);\n  const [modalStyle] = React.useState(getModalStyle);\n  const classes = useStyles();\n\n  const modalListMap = {\n    'basic': [\n      '6 months of order data history',\n      'Atom Merchant Dashboards',\n      'Download PDFs, CSVs'\n    ],\n    'advanced': [\n      'Full year of order data history',\n      'Drill to row level information',\n      'Download row level information',\n      'Schedule dashboards for delivery (to you or others)',\n      'Set alerts and key threshold notifications'],\n    'premium': [\n      '2 Full years of order data history',\n      'Analyze your own data and save custom reports',\n      'View premium level, productivity enhancing reports',\n      'Share your reports with colleagues in Atom',\n      'Text message alerts',\n      // 'Notify active shoppers on Atom',\n      // 'Apply Atoms advanced AI insights to stay ahead of trends'\n    ]\n  }\n\n\n  return (\n    < Modal\n      className={`${classes.modal} `}\n      open={payWallModal.show || false}\n      onClose={togglePayWallModal}\n    >\n      <Fade in={payWallModal.show || false}>\n        <div\n          style={modalStyle}\n          className={`${classes.paper} ${classes.padding30}`}>\n          <Grid container\n            spacing={3}>\n            {Object.keys(LookerUserPermissions).map(key => {\n              return (\n                <Grid item sm={4}\n                  key={validIdHelper(`monetizationModal-gridItem-${key}`)}\n                >\n                  <Card className={`${classes.card} ${classes[key]}`}\n                    elevation={1}\n                    style={key === lookerUser.user_attributes.permission_level ? {\n                      // transform: 'scale(1.05)',\n                      // transition: 'transform .2s',\n                      backgroundColor: '#5F6BD8',\n                      color: '#ffffff',\n                      height: 519\n                    } : {\n                        height: 519\n                      }}\n                    onClick={() => {\n                      switchLookerUser(key, 'permission')\n                      togglePayWallModal()\n                    }}>\n                    <CardContent>\n                      <Typography variant=\"h6\" display=\"justify\">\n                        {_.capitalize(key)}\n                      </Typography>\n                      <Typography\n                        display=\"justify\">\n                        <Rating\n                          name=\"read-only\"\n                          value={key === 'basic' ? \"3\" : key === \"advanced\" ? \"4\" : \"5\"}\n                          readOnly /></Typography>\n                      <Typography variant=\"subtitle1\" style={{ fontStyle: 'italic' }}>\n                        {key === 'basic' ?\n                          'Drive your business with clear KPIs' :\n                          key === 'advanced' ?\n                            'Deeper insights, operations' :\n                            'Drive your business with Atom'\n                        }\n                      </Typography>\n\n                      <Divider className={`${classes.divider} `} />\n\n                      <List className={classes.root}>\n                        {\n                          modalListMap[key].map((item, index) => (\n                            <ListItem dense={true}\n                              className={classes.font875}\n                              key={`monetizationModal-ListItem-${key}-${index}`}\n                            >\n                              <ListItemIcon\n                              >\n                                <CheckIcon fontSize=\"small\" />\n                              </ListItemIcon>\n                              <ListItemText primary={item} />\n                            </ListItem>\n                          ))\n                        }\n                      </List>\n                    </CardContent>\n                    <CardActions disableSpacing={false}>\n                      <Button\n                        color=\"primary\"\n                        variant=\"outlined\"\n                        // disabled={key === lookerUser.user_attributes.permission_level ? true : false}\n                        fullWidth\n                        onClick={() => {\n                          switchLookerUser(key, 'permission')\n                          togglePayWallModal()\n                        }}\n                        style={key === lookerUser.user_attributes.permission_level ? { color: '#ffffff', borderColor: \"#ffffff\" } : {}}>\n                        {key === lookerUser.user_attributes.permission_level ? \"Active\" :\n                          Object.keys(modalListMap).indexOf(lookerUser.user_attributes.permission_level) < Object.keys(modalListMap).indexOf(key) ?\n                            'Upgrade' :\n                            'Switch'}\n                      </Button>\n                    </CardActions>\n                  </Card>\n                </Grid>\n              )\n            })}\n          </Grid>\n        </div >\n      </Fade >\n    </Modal >\n  );\n}\n","import _ from 'lodash'\n// import $ from 'jquery';\nimport React, { Component } from 'react'\nimport clsx from 'clsx';\nimport { withStyles } from \"@material-ui/core/styles\";\nimport {\n  Drawer, CssBaseline, AppBar, Toolbar, Typography,\n  Divider, IconButton, Tabs, Tab, Icon, Box, Avatar,\n  ListSubheader, List, ListItem, ListItemIcon, ListItemText,\n  Badge, FormControlLabel, Switch, Button\n} from '@material-ui/core/';\n\nimport { AddAlert, ShowChart, VisibilityOutlined, DateRangeOutlined, Search, FindInPage, Code, TableChartOutlined, LibraryBooksOutlined, Menu, ChevronLeft } from '@material-ui/icons';\nimport HomeIcon from '@material-ui/icons/Home'; //can't reuse home name\nimport { createMuiTheme, makeStyles, ThemeProvider } from '@material-ui/core/styles';\nimport { blue, grey } from '@material-ui/core/colors';\nimport UserMenu from './Material/UserMenu';\nimport { LookerEmbedSDK } from '@looker/embed-sdk'\nimport UsecaseContent from '../usecaseContent.json';\nimport SplashPage from './Demo/SplashPage/SplashPage';\nimport Dashboard from './Demo/Dashboard/Dashboard';\nimport CustomVis from './Demo/CustomVis/CustomVis';\nimport ReportBuilder from './Demo/ReportBuilder/ReportBuilder';\nimport QueryBuilder from './Demo/QueryBuilder/QueryBuilder';\nimport AppContext from '../AppContext';\n// import { HighlightSourcesLegend } from './HighlightSourcesLegend';\nimport style from 'react-syntax-highlighter/dist/esm/styles/hljs/agate';\nimport './Home.css'; //needed for iframe height\nimport { MonetizationModal } from './Demo/MonetizationModal';\nimport BottomBar from './Material/BottomBar';\nimport LookerUserPermissions from '../lookerUserPermissions.json';\nimport { lookerUserTimeHorizonMap } from '../App';\n\n\n\n\nconst drawerWidth = 240;\nconst { validIdHelper } = require('../tools');\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    backgroundColor: 'rgb(229, 229, 229)'\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    zIndex: 1201,\n    backgroundColor: \"#343D4E\"\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    borderRight: 'none',\n    backgroundColor: 'transparent'\n  },\n  drawerPaper: {\n    width: drawerWidth,\n    borderRight: 'none',\n    backgroundColor: 'transparent'\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n    // backgroundColor: '#343D4E',\n    // color: '#ffff'\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  tabs: {\n    borderRight: `1px solid ${theme.palette.divider}`,\n  },\n  dNone: {\n    display: 'none'\n  },\n  dBlock: {\n    display: 'block'\n  },\n  relative: {\n    position: 'relative'\n  },\n  absolute: {\n    position: 'absolute'\n  },\n  right0: {\n    right: 0\n  },\n  top0: {\n    top: 0\n  },\n  right24: {\n    right: 24\n  },\n  top24: {\n    top: 24\n  },\n  ml12: {\n    marginLeft: 12\n  },\n  mr12: {\n    marginRight: 12\n  },\n  mt12: {\n    marginTop: 12\n  },\n  highlightLegend: {\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n    zIndex: 1200\n  },\n  tree: {\n    height: 240,\n    flexGrow: 1,\n    maxWidth: 400\n  },\n  parentHoverVisibility: {\n    '&:hover $childHoverVisibility': {\n      visibility: 'visible'\n    }\n\n  },\n  childHoverVisibility: {\n    visibility: 'hidden'\n  },\n  fontSize1em: {\n    fontSize: '1em'\n  },\n  padding10: {\n    padding: 10\n  },\n  mt5: {\n    marginTop: 5\n  },\n  mb5: {\n    marginBottom: 5\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n  },\n  list: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: 'transparent'\n    // theme.palette.background.paper,\n  },\n  nested: {\n    paddingLeft: theme.spacing(4),\n  },\n  mlAuto: {\n    marginLeft: 'auto'\n  },\n  mrAuto: {\n    marginRight: 'auto'\n  },\n  appBarBottom: {\n    top: 'auto',\n    bottom: 0,\n    // backgroundColor: 'transparent'\n  },\n  hidden: {\n    visibility: 'hidden'\n  },\n  roundedTab: {\n    borderRadius: '0 100px 100px 0'\n  },\n  paddingBottom30: {\n    paddingBottom: 30\n  },\n  mtAuto: {\n    marginTop: 'auto'\n  },\n  mb10: {\n    marginBottom: 10\n  }\n});\n\nconst defaultTheme = createMuiTheme({})\nconst atomTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: grey[900],\n    },\n    secondary: {\n      main: grey[400],\n    },\n  },\n})\n\nconst vidlyTheme = createMuiTheme({\n  palette: {\n    primary: {\n      main: blue[500],\n    },\n  },\n})\n\nclass Home extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      drawerOpen: window.innerWidth > 768 ? true : false, //true,\n      drawerTabValue: 0,\n      activeTabValue: 0,\n      activeUsecase: '',\n      appLayout: '',\n      highlightShow: false,\n      payWallModal: {},\n      selectedMenuItem: '',\n      renderedDemoComponents: [],\n      codeShow: false,\n    }\n  }\n\n  togglePayWallModal = (modalContent) => {\n    this.setState({ payWallModal: { ...modalContent } })\n  }\n\n  toggleHighlightShow = () => {\n    // if (this.state.codeShow) this.toggleCodeShow()\n    this.setState({ highlightShow: !this.state.highlightShow })\n  }\n\n  toggleCodeShow = () => {\n    // console.log('toggleCodeShow')\n    // console.log('000 toggleCodeShthis.state.codeShow', this.state.codeShow)\n\n    this.setState({ codeShow: !this.state.codeShow })\n    // console.log('1111 toggleCodeShthis.state.codeShow', this.state.codeShow)\n  }\n\n  handleTabChange = newValue => {\n    this.setState({\n      activeTabValue: newValue\n    })\n  }\n\n\n\n  handleDrawerChange = (open) => {\n    this.setState({\n      drawerOpen: open\n    })\n  }\n\n  handleMenuItemSelect = (newValue, fromSplash) => {\n    // console.log('handleMenuItemSelect')\n    this.handleTabChange(0)\n\n    if (this.state.highlightShow) this.toggleHighlightShow()\n    if (this.state.codeShow) this.toggleCodeShow()\n\n    let selectedMenuItemValue = ''\n    if (fromSplash) {\n      UsecaseContent[this.state.activeUsecase].demoComponents.map(item => {\n        if (item.type !== \"splash page\") {\n          item.lookerContent.map(lookerContentItem => {\n            if (lookerContentItem.id === newValue) {\n              selectedMenuItemValue = validIdHelper(item.type + lookerContentItem.id)\n            }\n          })\n        }\n      })\n    } else selectedMenuItemValue = newValue;\n\n    let renderedDemoComponentsCopy = [...this.state.renderedDemoComponents]\n    if (renderedDemoComponentsCopy.indexOf(selectedMenuItemValue) == -1) renderedDemoComponentsCopy.unshift(selectedMenuItemValue)\n\n    this.setState((prevState) => ({\n      selectedMenuItem: selectedMenuItemValue,\n      renderedDemoComponents: [...renderedDemoComponentsCopy]\n    }))\n  };\n\n  componentDidMount(props) {\n\n    // console.log('Home componentDidMount')\n    // console.log('this.props', this.props)\n\n    let { usecaseFromUrl } = this.props || 'atom';\n\n    this.setState({\n      activeUsecase: usecaseFromUrl,\n      appLayout: UsecaseContent[usecaseFromUrl].layout || 'left-sidebar'\n    }, () => {\n      LookerEmbedSDK.init(`https://${this.props.lookerHost}.looker.com`, '/auth');\n    })\n\n    window.addEventListener(\"resize\", () => {\n      // console.log('resize event')\n      this.setState({ drawerOpen: window.innerWidth > 768 ? true : false })\n    });\n\n  }\n\n  componentDidUpdate(prevProps) {\n    // console.log('componentDidUpdate')\n    let prevPermissionLevel = prevProps.lookerUser.user_attributes.permission_level;\n    let currPermissionLevel = this.props.lookerUser.user_attributes.permission_level;\n    let prevUserBrand = prevProps.lookerUser.user_attributes.brand;\n    let currUserBrand = this.props.lookerUser.user_attributes.brand;\n\n    if ((prevPermissionLevel !== currPermissionLevel) || (prevUserBrand !== currUserBrand)) {\n      // console.log('we are inside this iffff')\n      LookerEmbedSDK.init(`https://${this.props.lookerHost}.looker.com`, '/auth');\n      this.setState({\n        renderedDemoComponents: [this.state.selectedMenuItem]\n      })\n    }\n  }\n\n  handleUserMenuSwitch = async (newValue, property) => {\n    // console.log('handleUserMenuSwitch')\n    // console.log('newValue', newValue)\n    // console.log('property', property)\n    //eg to review this 9/8\n    let newLookerUser = { ...this.props.lookerUser }\n    // console.log('new looker user',newLookerUser)\n    if (property === 'brand') {\n      newLookerUser.user_attributes.brand = newValue\n    } else if (property === 'permission') {\n      // console.log('permission',newValue)\n      newLookerUser.permissions = LookerUserPermissions[newValue] || LookerUserPermissions['basic']\n      newLookerUser.user_attributes.permission_level = newValue\n      newLookerUser.user_attributes.time_horizon = lookerUserTimeHorizonMap[newValue]\n    }\n    const x = await fetch('/updatelookeruser', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newLookerUser)\n    })\n    // console.log(x)\n\n    this.setState({\n      renderedDemoComponents: [this.state.selectedMenuItem]\n    }, () => {\n      if (property === 'brand') {\n        this.props.switchUserAttributeBrand(newValue);\n      } else if (property === 'permission') {\n        this.props.switchLookerUser(newValue);\n      }\n    })\n\n  }\n\n\n\n\n  render() {\n\n    //how to make this dynamic????\n    const demoComponentMap = {\n      \"splashpage19\": SplashPage,\n      \"customfilter5\": Dashboard,\n      \"simpledashboard9\": Dashboard,\n      \"customfilter1\": Dashboard,\n      \"customvis\": CustomVis,\n      \"querybuilderexplorelite\": QueryBuilder,\n      \"reportbuilder14\": ReportBuilder,\n    };\n\n    const demoComponentKeyMap = [\"splashpage19\",\n      \"customfilter5\",\n      \"simpledashboard9\",\n      \"customfilter1\",\n      \"customvis\",\n      \"querybuilderexplorelite\",\n      \"reportbuilder14\"\n    ]\n\n    const themeMap = {\n      \"atom\": atomTheme,\n      \"vidly\": vidlyTheme\n    }\n\n    const { drawerTabValue, drawerOpen, activeTabValue, activeUsecase, selectedMenuItem, renderedDemoComponents } = this.state;\n    const { handleTabChange, handleMenuItemSelect, handleDrawerChange } = this;\n    const {\n      classes,\n      lookerUser,\n      applySession,\n      lookerUserAttributeBrandOptions,\n      lookerHost,\n      userProfile,\n      sdk,\n      corsApiCall } = this.props;\n\n\n\n    // Use Lodash to sort array by 'name'\n    let orderedDemoComponentsForMenu = activeUsecase ? _.orderBy(UsecaseContent[activeUsecase].demoComponents, ['menuCategory'], ['asc']) : [];\n    let orderedDemoComponentsForMenuObj = {};\n    let expandedTreeItemsArr = [];\n    let cumulativePusher = 0;\n    orderedDemoComponentsForMenu.map((item, index) => {\n      if (orderedDemoComponentsForMenuObj.hasOwnProperty(item.menuCategory)) {\n        orderedDemoComponentsForMenuObj[item.menuCategory] = [...orderedDemoComponentsForMenuObj[item.menuCategory], item]\n      } else {\n        orderedDemoComponentsForMenuObj[item.menuCategory] = [item];\n        cumulativePusher += 1;\n        expandedTreeItemsArr.push(\"\" + (index + cumulativePusher));\n      }\n    })\n\n\n    if (activeUsecase && !selectedMenuItem.length) {\n      let selectedMenuItemVal =\n        UsecaseContent[activeUsecase].demoComponents[0].lookerContent[0].id ?\n          validIdHelper(UsecaseContent[activeUsecase].demoComponents[0].type + UsecaseContent[activeUsecase].demoComponents[0].lookerContent[0].id) :\n          validIdHelper(UsecaseContent[activeUsecase].demoComponents[0].type)\n      this.setState({\n        selectedMenuItem: selectedMenuItemVal,\n        renderedDemoComponents: [selectedMenuItemVal]\n      }, () => {\n      })\n    }\n\n    return (\n      <div className={classes.root} >\n        <AppContext.Provider value={\n          {\n            show: this.state.highlightShow,\n            toggleShow: this.toggleHighlightShow,\n            payWallModal: this.state.payWallModal,\n            togglePayWallModal: this.togglePayWallModal,\n            lookerUser,\n            userProfile,\n            codeShow: this.state.codeShow,\n            toggleCodeShow: this.toggleCodeShow,\n            lookerHost,\n            sdk,\n            atomTheme,\n            corsApiCall\n          }\n        } >\n          <ThemeProvider theme={activeUsecase ? themeMap[activeUsecase] : defaultTheme}>\n            <CssBaseline />\n            <TopBar {...this.props}\n              classes={classes}\n              activeUsecase={activeUsecase}\n              lookerUser={lookerUser}\n              applySession={applySession}\n              lookerUserAttributeBrandOptions={lookerUserAttributeBrandOptions}\n              handleUserMenuSwitch={this.handleUserMenuSwitch}\n              handleDrawerChange={this.handleDrawerChange}\n              drawerOpen={drawerOpen} />\n            <Drawer\n              className={classes.drawer}\n              variant=\"persistent\"\n              anchor=\"left\"\n              open={drawerOpen}\n              classes={{\n                paper: classes.drawerPaper,\n              }}\n            >\n              <div className={classes.drawerHeader}>\n                <IconButton onClick={() => handleDrawerChange(false)}>\n                  <ChevronLeft />\n                </IconButton>\n              </div>\n\n              {Object.keys(orderedDemoComponentsForMenuObj).length ?\n                <MenuList {...this.props}\n                  classes={classes}\n                  activeUsecase={activeUsecase}\n                  orderedDemoComponentsForMenuObj={orderedDemoComponentsForMenuObj}\n                  selectedMenuItem={selectedMenuItem}\n                  handleMenuItemSelect={handleMenuItemSelect}\n                /> : ''}\n\n              <MonetizationModal\n                switchLookerUser={this.handleUserMenuSwitch}\n              />\n              <BottomBar classes={classes} lookerUser={lookerUser} />\n            </Drawer>\n            <main\n              className={clsx(classes.content, {\n                [classes.contentShift]: drawerOpen,\n              })}\n            >\n              <div className={classes.drawerHeader} />\n              {activeUsecase ?\n                UsecaseContent[activeUsecase].demoComponents.map((item, index) => {\n                  const key = item.lookerContent[0].id ? validIdHelper(item.type + item.lookerContent[0].id) : validIdHelper(item.type);\n                  const DemoComponent = demoComponentMap[key];\n                  return (\n                    <React.Fragment\n                      key={validIdHelper(`outerFragment-${item.type}-${index}`)}>\n                      {renderedDemoComponents.indexOf(key) > -1 ?\n                        <Box key={validIdHelper(`box-${item.type}-${index}`)}\n                          className={key === selectedMenuItem ? `` : `${classes.hide}`}\n                        >\n                          {/* {key === selectedMenuItem ? */}\n                          <DemoComponent\n                            key={validIdHelper(`demoComponent-${item.type}-${index}`)}\n                            staticContent={item}\n                            handleMenuItemSelect={handleMenuItemSelect}\n                            activeTabValue={activeTabValue}\n                            handleTabChange={handleTabChange}\n                            lookerUser={lookerUser}\n                            activeUsecase={activeUsecase}\n                            lookerHost={lookerHost}\n                            userProfile={userProfile}\n                          />\n                          {/* : ''} */}\n\n                        </Box> : ''}\n                    </React.Fragment>)\n                }) :\n                ''\n              }\n            </main >\n            {/* <BottomBar classes={classes} lookerUser={lookerUser} /> */}\n          </ThemeProvider>\n        </AppContext.Provider>\n      </div >\n    )\n  }\n}\nexport default withStyles(styles)(Home);\n\nfunction TopBar(props) {\n  const { classes, activeUsecase, lookerUser, applySession, lookerUserAttributeBrandOptions, handleUserMenuSwitch, drawerOpen, handleDrawerChange } = props\n\n  return (\n    <AppBar\n      position=\"fixed\"\n      className={clsx(classes.appBar)}\n    // className={clsx(classes.appBar, {\n    //   [classes.appBarShift]: drawerOpen,\n    // })}\n    >\n      <Toolbar>\n\n        <IconButton\n          color=\"inherit\"\n          aria-label=\"open drawer\"\n          onClick={() => handleDrawerChange(!drawerOpen)}\n          edge=\"start\"\n        // className={clsx(classes.menuButton, drawerOpen && classes.hide)}\n        >\n          {drawerOpen ? <ChevronLeft /> : <Menu />}\n          {/* <Menu /> */}\n        </IconButton>\n\n        {activeUsecase ?\n          <Avatar alt=\"Icon\"\n            src={require(`../images/${activeUsecase}.svg`)}\n            variant=\"square\"\n          /> : ''}\n\n        <Badge badgeContent={3} color=\"error\" className={`${classes.mlAuto} ${classes.mr12} `} >\n          <AddAlert />\n        </Badge>\n        <UserMenu\n          lookerUser={lookerUser}\n          onLogoutSuccess={applySession}\n          lookerUserAttributeBrandOptions={lookerUserAttributeBrandOptions}\n          handleUserMenuSwitch={handleUserMenuSwitch}\n        />\n      </Toolbar>\n    </AppBar>\n  )\n}\n\nfunction MenuList(props) {\n  // const { toggleShow } = useContext(AppContext)\n  // const { show } = useContext(AppContext)\n  // const { codeShow } = useContext(AppContext)\n  const { classes, activeUsecase, orderedDemoComponentsForMenuObj, selectedMenuItem, handleMenuItemSelect } = props\n  const demoComponentIconMap = {\n    \"splashpage19\": HomeIcon,\n    \"customfilter5\": VisibilityOutlined,\n    \"simpledashboard9\": ShowChart,\n    \"customfilter1\": TableChartOutlined,\n    \"customvis\": DateRangeOutlined,\n    \"querybuilderexplorelite\": Search,\n    \"reportbuilder14\": LibraryBooksOutlined,\n  }\n\n  return (<List\n    component=\"nav\"\n    aria-labelledby=\"nested-list-subheader\"\n    className={classes.list}\n  >\n    {activeUsecase ? Object.keys(orderedDemoComponentsForMenuObj).map((outerItem, outerIndex) => {\n      return (\n        < React.Fragment\n          key={`${validIdHelper(outerItem + '-menuList-' + outerIndex)}`}>\n          <ListItem\n            key={`${validIdHelper(outerItem + '-outerListItem-' + outerIndex)}`}\n          // className={'roundedTab'}\n          >\n            <ListItemText primary={outerItem === 'home' ? '' : _.capitalize(outerItem)} />\n          </ListItem>\n          < List component=\"div\" disablePadding\n            key={`${validIdHelper(outerItem + '-innerList-' + outerIndex)}`}>\n            {orderedDemoComponentsForMenuObj[outerItem].map((item, innerIndex) => {\n              const key = item.lookerContent[0].id ? validIdHelper(item.type + item.lookerContent[0].id) : validIdHelper(item.type);\n              const MatchingIconComponent = demoComponentIconMap[key]\n\n              return (\n                <ListItem\n                  button\n                  className={`${classes.nested} ${classes.roundedTab}`}\n                  key={`${validIdHelper(outerItem + '-innerListItem-' + innerIndex)}`}\n                  onClick={\n                    () => handleMenuItemSelect(validIdHelper(item.lookerContent[0].id ? item.type + item.lookerContent[0].id : item.type))\n                  }\n                  selected={validIdHelper(item.lookerContent[0].id ? item.type + item.lookerContent[0].id : item.type) === selectedMenuItem}\n                >\n                  <ListItemIcon>\n                    <MatchingIconComponent />\n                  </ListItemIcon>\n                  <ListItemText primary={_.capitalize(item.label)} />\n                </ListItem>\n              )\n            })}\n          </List>\n        </React.Fragment>\n      )\n    }) : ''\n    }\n  </List >\n  )\n}","import _ from 'lodash'\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { Grid, Card, CardActions, CardContent, Typography } from '@material-ui/core'\nimport { grey, orange } from '@material-ui/core/colors';\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\nimport './Home.css';\nconst { validIdHelper } = require('../tools');\nconst lightGrey = grey[200];\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper,\n  },\n  flexCentered: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  card: {\n    minWidth: 350,\n    minHeight: 500,\n    left: '75%',\n    top: '50%',\n    transform: `translate(-75%, -50%)`,\n    position: 'absolute',\n    textAlign: 'center',\n    backgroundColor: lightGrey\n  },\n  h100: {\n    height: '100%'\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  actions: {\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  cardCopy: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: `translate(-50%, -50%)`,\n    margin: '0',\n    width: '80%',\n  }\n}));\n\n\nexport default function SignIn(props) {\n\n  // console.log('SignIn')\n  // console.log('props', props)\n\n  const { googleClientId, onSuccess, onFailure, usecaseFromUrl } = props;\n  // console.log('usecaseFromUrl', usecaseFromUrl)\n  const classes = useStyles();\n  const backgroundImageInt = Math.floor(Math.random() * 4) + 1;\n  const backgroundImage = require(`../images/${usecaseFromUrl}_background${backgroundImageInt}.jpg`);\n  const logoImage = require(`../images/${usecaseFromUrl}_logo_black.svg`)\n\n  return (\n    <div className={`${classes.root} demoComponent ${classes.h100}`}>\n      <Grid container\n        key={validIdHelper('sign in page')}\n        className={`${classes.h100}`}>\n        <Grid item sm={12} className={'sign-in-background-img'}\n          style={{\n            backgroundImage: `url(${backgroundImage})`,\n            backgroundSize: 'cover'\n          }}\n        >\n          <Card className={classes.card}>\n            <div className={classes.cardCopy}>\n              <img\n                src={logoImage}\n              />\n              <CardContent >\n                <Typography variant=\"h5\" component=\"h2\">\n                  Welcome\n                            </Typography>\n                <Typography variant=\"body2\" component=\"p\">\n                  Please sign in to access <br /> your merchant portal\n                            </Typography>\n              </CardContent>\n              <CardActions className={`${classes.actions}`} >\n                <GoogleLogin\n                  clientId={googleClientId}\n                  buttonText=\"Login\"\n                  onSuccess={onSuccess}\n                  onFailure={onSuccess}\n                  cookiePolicy={'single_host_origin'}\n                />\n              </CardActions>\n            </div>\n          </Card>\n        </Grid>\n      </Grid>\n    </div >\n  )\n}","// https://www.npmjs.com/package/@looker/sdk#using-a-proxy-for-authentication\n\nimport { AuthToken, AuthSession, BrowserTransport } from \"@looker/sdk\";\n\nexport class PblSession extends AuthSession {\n  fetchToken() {\n    return fetch(\"\");\n  }\n  activeToken = new AuthToken();\n  constructor(settings, transport) {\n    super(settings, transport || new BrowserTransport(settings));\n  }\n  isAuthenticated() {\n    const token = this.activeToken;\n    if (!(token && token.access_token)) return false;\n    return token.isActive();\n  }\n  async getToken() {\n    if (!this.isAuthenticated()) {\n      const token = await this.fetchToken();\n      this.activeToken.setToken(await token.json());\n    }\n    return this.activeToken;\n  }\n  async authenticate(props) {\n    const token = await this.getToken();\n    if (token && token.access_token) {\n      props.mode = \"cors\";\n      delete props.credentials;\n      props.headers = {\n        ...props.headers,\n        Authorization: `Bearer ${this.activeToken.access_token}`\n      };\n    }\n    return props;\n  }\n}\n\nexport class PblSessionEmbed extends PblSession {\n\n  accessToken;\n\n  constructor(options) {\n    super(options);\n    this.accessToken = options.accessToken;\n  }\n\n  fetchToken() {\n    return this.accessToken;\n  }\n\n  async getToken() {\n    if (!this.isAuthenticated()) {\n      this.activeToken.setToken(this.fetchToken());\n    }\n    return this.activeToken;\n  }\n}","import React from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport Home from './components/Home';\nimport SignIn from './components/SignIn';\nimport LookerUserPermissions from './lookerUserPermissions.json';\nimport InitialLookerUser from './initialLookerUser.json';\nimport UsecaseContent from './usecaseContent.json';\nimport LookerUserAttributeBrandOptions from './lookerUserAttributeBrandOptions.json';\nimport { Looker40SDK, DefaultSettings } from \"@looker/sdk\";\nimport { PblSessionEmbed } from './LookerHelpers/pblsession'\n\nexport const lookerUserTimeHorizonMap = {\n  'basic': 'last 182 days',\n  'advanced': 'last 365 days',\n  'premium': 'last 730 days' //before today\n}\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  responseGoogle = (response) => {\n    if (response.error) {\n      console.log('response.error', response.error)\n    } else {\n      this.props.applySession(response.profileObj)\n    }\n  }\n\n  render() {\n\n    const { from } = this.props.location.state || { from: { pathname: '/analytics' } } //needs work?\n    const { pathname } = this.props.location\n    const { userProfile } = this.props\n\n    const googleClientId = `${process.env.REACT_APP_GOOGLE_CLIENT_ID}.apps.googleusercontent.com`\n    if (Object.keys(userProfile).length) {\n      return (\n        <div className=\"App\">\n          <Redirect to={from} />\n        </div>\n      )\n    } else {\n      return (\n        <SignIn\n          googleClientId={googleClientId}\n          onSuccess={this.responseGoogle}\n          onFailure={this.responseGoogle}\n          usecaseFromUrl={usecaseHelper()}\n        />\n      )\n    }\n  }\n}\n\nconst PrivateRoute = ({\n  component: Component,\n  lookerContent,\n  userProfile,\n  lookerUser,\n  lookerHost,\n  switchLookerUser,\n  applySession,\n  lookerUserAttributeBrandOptions,\n  switchUserAttributeBrand,\n  usecaseFromUrl,\n  sdk,\n  checkToken,\n  corsApiCall,\n  ...rest }) => (\n    < Route {...rest} render={(props) => (\n      Object.keys(userProfile).length ?\n        <Component {...props}\n          lookerContent={lookerContent}\n          userProfile={userProfile}\n          lookerUser={lookerUser}\n          lookerHost={lookerHost}\n          switchLookerUser={switchLookerUser}\n          applySession={applySession}\n          lookerUserAttributeBrandOptions={lookerUserAttributeBrandOptions}\n          switchUserAttributeBrand={switchUserAttributeBrand}\n          usecaseFromUrl={usecaseFromUrl}\n          sdk={sdk}\n          corsApiCall={corsApiCall}\n        />\n        : <Redirect to={{\n          pathname: '/',\n          state: { from: props.location }\n        }} />\n    )} />\n  )\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userProfile: {},\n      lookerUser: {\n        ...InitialLookerUser\n      },\n      lookerHost: '',\n      activeUsecase: '',\n      sdk: '',\n      lookerTokenExpires: ''\n    }\n  }\n\n  componentDidMount() {\n    // console.log('App componentDidMount')\n    this.checkSession()\n  }\n\n  checkSession = async () => {\n    // console.log('checkSession')\n    // this.applySession({}) //force logout\n    let sessionResponse = await fetch('/readsession', {\n      method: 'GET',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    const sessionResponseData = await sessionResponse.json();\n    // console.log('sessionResponseData', sessionResponseData)\n    const { userProfile } = sessionResponseData.session\n    const lookerUser = sessionResponseData.session.lookerUser ? sessionResponseData.session.lookerUser : this.state.lookerUser;\n    const lookerHost = sessionResponseData.session.lookerHost ? sessionResponseData.session.lookerHost : this.state.lookerHost;\n    const accessToken = sessionResponseData.session.lookerApiToken ? sessionResponseData.session.lookerApiToken.api_user_token : '';\n    const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + (sessionResponseData.session.lookerApiToken.api_user_token.expires_in * 1000)\n    // const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + 10000;\n\n    //make sure defined and contains properties\n    if (userProfile && Object.keys(userProfile).length) {\n      // console.log('000 this.state.sdk', this.state.sdk)\n      //do we want to do this everytime client loads or save in session somehow?\n      let sdk = createSdkHelper({ lookerHost, accessToken })\n      // console.log('1111 sdk', sdk)\n\n      this.setState((prevState) => ({\n        userProfile,\n        lookerUser: {\n          ...prevState.lookerUser,\n          external_user_id: userProfile.email,\n          first_name: userProfile.givenName,\n          last_name: userProfile.familyName,\n          permissions: LookerUserPermissions[lookerUser.user_attributes.permission_level] || LookerUserPermissions['basic'],\n          user_attributes: {\n            ...lookerUser.user_attributes || {\n              \"locale\": \"en_US\",\n              \"country\": \"USA\",\n              \"brand\": \"Calvin Klein\",\n              \"permission_level\": \"basic\"\n            }\n          }\n        },\n        lookerHost,\n        sdk,\n        lookerTokenExpires\n      }), () => {\n        // console.log('checkSession callback 1111 this.state.lookerUser', this.state.lookerUser)\n        // console.log('this.state.sdk', this.state.sdk)\n        // console.log('this.state.lookerTokenExpires', this.state.lookerTokenExpires)\n      })\n    }\n  }\n\n  // called by responseGoogle once it gets response\n  applySession = async (userProfile) => {\n    // console.log('applySession')\n    // console.log('userProfile', userProfile)\n\n    if (Object.keys(userProfile).length === 0) {\n      let sessionData = await fetch('/endsession', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n      this.setState({\n        userProfile: {},\n        lookerUser: { ...InitialLookerUser }\n      })\n    } else {\n      // console.log('inside else')\n      let sessionData = await fetch('/writesession', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ userProfile, lookerUser: this.state.lookerUser })\n      })\n      const sessionResponseData = await sessionData.json();\n      // console.log('sessionResponseData', sessionResponseData)\n      const lookerUser = sessionResponseData.session.lookerUser ? sessionResponseData.session.lookerUser : this.state.lookerUser;\n      const lookerHost = sessionResponseData.session.lookerHost ? sessionResponseData.session.lookerHost : this.state.lookerHost;\n      const accessToken = sessionResponseData.session.lookerApiToken ? sessionResponseData.session.lookerApiToken.api_user_token : '';\n      const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + (sessionResponseData.session.lookerApiToken.api_user_token.expires_in * 1000)\n      // const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + 10000;\n\n      let sdk = createSdkHelper({ lookerHost, accessToken })\n\n      this.setState(prevState => ({\n        userProfile,\n        lookerUser: {\n          ...prevState.lookerUser,\n          external_user_id: userProfile.email,\n          first_name: userProfile.givenName,\n          last_name: userProfile.familyName,\n          permissions: LookerUserPermissions[lookerUser.user_attributes.permission_level] || LookerUserPermissions['basic'], //assume good initially,\n          user_attributes: {\n            ...lookerUser.user_attributes || {\n              \"locale\": \"en_US\",\n              \"country\": \"USA\",\n              \"brand\": \"Calvin Klein\",\n              \"time_horizon\": \"last 6 months\",\n              \"permission_level\": \"basic\",\n            }\n          }\n        },\n        lookerHost,\n        sdk,\n        lookerTokenExpires\n      }), () => {\n        // console.log('this.state.sdk', this.state.sdk)\n        // console.log('this.state.lookerTokenExpires', this.state.lookerTokenExpires)\n      });\n    }\n  }\n\n  switchLookerUser = (newUser) => {\n    // console.log('switchLookerUser')\n    // console.log('newUser', newUser)\n    // console.log('LookerUserPermissions[newUser]', LookerUserPermissions[newUser])\n\n    let userAttributeCopy = { ...this.state.lookerUser.user_attributes, \"permission_level\": newUser }\n    userAttributeCopy.time_horizon = lookerUserTimeHorizonMap[newUser];\n\n    this.setState(prevState => ({\n      lookerUser: {\n        ...prevState.lookerUser,\n        permissions: LookerUserPermissions[newUser],\n        user_attributes: userAttributeCopy\n      }\n    }), async () => {\n\n      let lookerUserResponse = await fetch('/updatelookeruser', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.lookerUser)\n      })\n\n      let lookerUserResponseData = await lookerUserResponse.json();\n    });\n  }\n\n  switchUserAttributeBrand = (newAttribute) => {\n    // console.log('switchUserAttributeBrand')\n    // console.log('newAttribute', newAttribute)\n\n    let userAttributeCopy = { ...this.state.lookerUser.user_attributes }\n    userAttributeCopy.brand = newAttribute;\n\n    let usecaseFromUrl = usecaseHelper();\n\n    this.setState(prevState => ({\n      lookerUser: {\n        ...prevState.lookerUser,\n        user_attributes: userAttributeCopy,\n        group_ids: [UsecaseContent[usecaseFromUrl].groupIds[newAttribute.replace(\"'\", \"\")]] //needed to replace apostrophe\n      }\n    }), async () => {\n      let lookerUserResponse = await fetch('/updatelookeruser', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(this.state.lookerUser)\n      })\n\n      let lookerUserResponseData = await lookerUserResponse.json();\n    });\n  }\n\n  corsApiCall = async (func, args = []) => {\n    // console.log('corsApiCall');\n    // console.log({ func });\n    // console.log({ args });\n    await this.checkToken()\n    let res = func(...args)\n    return res\n  }\n\n  checkToken = async () => {\n    if (Date.now() > this.state.lookerTokenExpires) {\n      let sessionResponse = await fetch('/refreshlookertoken', {\n        method: 'GET',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        }\n      })\n      let sessionResponseData = await sessionResponse.json();\n      const lookerHost = sessionResponseData.session.lookerHost ? sessionResponseData.session.lookerHost : this.state.lookerHost;\n      const accessToken = sessionResponseData.session.lookerApiToken ? sessionResponseData.session.lookerApiToken.api_user_token : '';\n      const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + (sessionResponseData.session.lookerApiToken.api_user_token.expires_in * 1000)\n      // const lookerTokenExpires = sessionResponseData.session.lookerApiToken.api_token_last_refreshed + 10000;\n\n      let sdk = createSdkHelper({ lookerHost, accessToken })\n\n      this.setState({\n        sdk,\n        lookerTokenExpires\n      })\n    }\n  }\n\n  render() {\n\n    const { userProfile, lookerContent, lookerUser, lookerHost,\n      sdk } = this.state;\n\n\n    let usecaseFromUrl = usecaseHelper();\n\n    return (\n      <Router>\n        <div>\n          <Route path='' render={(props) => <Login\n            {...props}\n            applySession={this.applySession}\n            userProfile={userProfile}\n            lookerUser={lookerUser}\n            switchLookerUser={this.switchLookerUser}\n            lookerHost={lookerHost}\n          />}\n          />\n          <PrivateRoute path='/analytics' component={Home}\n            lookerContent={lookerContent}\n            userProfile={userProfile}\n            lookerUser={lookerUser}\n            applySession={this.applySession}\n            lookerHost={lookerHost}\n            switchLookerUser={this.switchLookerUser}\n            lookerUserAttributeBrandOptions={LookerUserAttributeBrandOptions}\n            switchUserAttributeBrand={this.switchUserAttributeBrand}\n            usecaseFromUrl={usecaseFromUrl}\n            sdk={sdk}\n            corsApiCall={this.corsApiCall}\n          />\n        </div>\n      </Router>\n    )\n  }\n}\nexport default App\n\nexport function usecaseHelper() {\n  let keyArr = Object.keys(UsecaseContent);\n  let url = window.location.href;\n  for (let i = 0; i < keyArr.length; i++) {\n    if (url.indexOf(keyArr[i]) > -1) {\n      return keyArr[i];\n    }\n  }\n  return 'atom';\n}\n\nexport function createSdkHelper({ accessToken, lookerHost }) {\n\n  // console.log('createSdkHelper')\n  // console.log('accessToken', accessToken)\n  // console.log('lookerHost', lookerHost)\n\n  const session = new PblSessionEmbed({\n    ...DefaultSettings(),\n    base_url: `https://${lookerHost}.looker.com:19999`,\n    accessToken\n  });\n  // console.log('session', session)\n\n  let sdk = new Looker40SDK(session);\n  return sdk;\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/atom_splash_blog.57457a86.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_splash_inventory.6bbb655e.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_splash_trends.dbd4fdc6.jpg\";","module.exports = __webpack_public_path__ + \"static/media/atom_logo_black.a213ea2a.svg\";","module.exports = {\n  makeid: (length) => {\n    var result = '';\n    var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var charactersLength = characters.length;\n    for (var i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n  },\n\n\n  validIdHelper: (str) => {\n    // console.log('validIdHelper')\n    // console.log('str', str)\n    //need to replace special characters that may be associated with id...\n    return str.replace(/[^a-zA-Z0-9-.#]/g, \"\")\n  },\n\n  prettifyString: (str) => {\n    var i, frags = str.split('_');\n    for (i = 0; i < frags.length; i++) {\n      frags[i] = frags[i].charAt(0).toUpperCase() + frags[i].slice(1);\n    }\n    return frags.join(' ');\n  },\n\n  getUrlVars: (url) => {\n    var hash;\n    var myJson = {};\n    var hashes = url.slice(url.indexOf('?') + 1).split('&');\n    for (var i = 0; i < hashes.length; i++) {\n      hash = hashes[i].split('=');\n      myJson[hash[0]] = hash[1];\n      // If you want to get in native datatypes\n      // myJson[hash[0]] = JSON.parse(hash[1]); \n    }\n    return myJson;\n  },\n\n\n  decodeHtml: (html) => {\n    var txt = document.createElement(\"textarea\");\n    txt.innerHTML = html;\n    return txt.value;\n  }\n}"],"sourceRoot":""}